1

Effect of Different Batch Size Parameters on
Predicting of COVID19 Cases
Ali Narin1 , Ziynet Pamuk2
and Electronics Enginering, Zonguldak Bulent Ecevit University, Zonguldak, Turkey
2 Biomedical Enginering, Zonguldak Bulent Ecevit University, Zonguldak, Turkey
{alinarin,ziynet.pamuk}@beun.edu.tr

arXiv:2012.05534v1 [eess.IV] 10 Dec 2020

1 Electrical

Abstract—The new coronavirus 2019, also known as COVID19,
is a very serious epidemic that has killed thousands or even
millions of people since December 2019. It was defined as a
pandemic by the world health organization in March 2020. It
is stated that this virus is usually transmitted by droplets caused
by sneezing or coughing, or by touching infected surfaces. The
presence of the virus is detected by real-time reverse transcriptase
polymerase chain reaction (rRT-PCR) tests with the help of a
swab taken from the nose or throat. In addition, X-ray and CT
imaging methods are also used to support this method. Since
it is known that the accuracy sensitivity in rRT-PCR test is
low, auxiliary diagnostic methods have a very important place.
Computer-aided diagnosis and detection systems are developed
especially with the help of X-ray and CT images. Studies on
the detection of COVID19 in the literature are increasing day
by day. In this study, the effect of different batch size (BH=3,
10, 20, 30, 40, and 50) parameter values on their performance in
detecting COVID19 and other classes was investigated using data
belonging to 4 different (Viral Pneumonia, COVID19, Normal,
Bacterial Pneumonia) classes. The study was carried out using
a pre-trained ResNet50 convolutional neural network. According
to the obtained results, they performed closely on the training
and test data. However, it was observed that the steady state in
the test data was delayed as the batch size value increased. The
highest COVID19 detection was 95.17% for BH = 3, while the
overall accuracy value was 97.97% with BH = 20. According to
the findings, it can be said that the batch size value does not
affect the overall performance significantly, but the increase in
the batch size value delays obtaining stable results.
Keywords—COVID19; ResNet50; Batch size; Pre-trained CNN
model.

I.

INTRODUCTION

Epidemic and seasonal flu infections cause severe pneumonia and high mortality rates [1]. Pneumonia is an inflammation
of the lung tissue [2], [3]. Thus, human breathing becomes
painful and oxygen intake decreases. Pneumonia occurs due
to viruses, bacteria, and fungi [4]. Nowadays the whole world
is struggling with the COVID19 epidemic. Deaths from pneumonia developing due to the SARS-COV-2 virus are increasing
day by day. The vast majority (99%) of people suffering from
COVID19 epidemic disease have mild symptoms [5]. Although
the remaining 1% seems small, it actually refers to millions of
people. These people suffer from pneumonia caused by SARSCOV-2. Pandemic captured elderly, obese, pregnant women
or people with chronic diseases should be admitted in the

intensive care unit of the hospital. Mortality rates of these
patients are high [1]. According to the World Health Organization’s 2019 report, pneumonia ranks first among infectionrelated deaths worldwide [6]. The most important method of
diagnosis of pneumonia worldwide is chest X-ray [7]. Doctors
make a diagnosis by looking at a chest X-ray. However, doctors
deal with many patients and work long hours in disasters such
as epidemics. At the same time, healthcare workers have a
very high risk of getting sick. For such reasons, engineers
working with artificial intelligence work on decision support
systems to facilitate the work of doctors. In recent years,
Deep Learning (DL) technique has been able to diagnose
diseases (e.g. lung disease, metastasis detection for breast
cancer, skin lesion classification, diabetic retinopathy, attention
deficit hyperactivity disorder) just like specialist physicians
[8]. DL is one of the most successful artificial intelligence
techniques and is an effective tool to help radiologists analyze
[9]. There is interest in using convolutional neural networks
(CNNs) to analyze medical imaging to provide computeraided diagnosis (CAD) [10]. CNNs are one of the powerful
deep learning architectures. CNN is intuitively widely used
in many practical applications such as pattern recognition and
image classification [11]. CAD systems based on deep learning
and medical imaging are becoming more and more research
centers [12]. Verma and others suggest a CNN model prepared
without any preparation to group and identify the occurrence
of pneumonia disease from a particular chest X-ray image
test product line [4]. Gusztáv Gaál and colleagues provide a
new approach to deep learning to diagnose pneumonia, lung
segmentation, a basic but challenging task. In this system,
state-of-the-art fully CNNs are used together with a competing
critic model [13]. In the study of Ilyas Sirazitdinov, he explores
opportunities to apply machine learning solutions for the
automatic detection and localization of pneumonia in chest
X-ray images. RetinaNet and Mask R-CNN are recommended
for the detection and localization of pneumonia [2]. Wesley
O’Quinn and his friends have detected pneumonia using chest
X-rays and AlexNet transfer network in deep learning [14].
Stephan and others proposed a CNN model trained from
scratch to classify the presence of pneumonia from chest Xray images [15]. Sreeja and others used the neural network
classification model in Keras to classify Normal and Pneumonia using lung X-ray data [16]. Longjiang and others evaluate
the effectiveness of the deep learning model in segmenting

2

the lung and thorax regions on pediatric chest X-rays (CXR)
[17]. For the diagnosis of pneumonia, M.Toğaçar and others
use existing CNNs, which are AlexNet, VGG16 and VGG19
[18]. Apostopolus and others performed a common pneumonia,
COVID19-induced pneumonia, and an evolutionary neural
network for healthy differentiation for automatic detection of
COVID19. In particular, the procedure called transfer learning
has been adopted. With transfer learning, the detection of
various abnormalities in small medical image datasets is an
achievable goal, often with remarkable results [19]. Based
on chest X-ray images, Zhang and others aim to develop a
deep learning-based model that can detect COVID19 with high
sensitivity, providing fast and reliable scanning [9]. Ghoshal
and Tucker used the dropweights-based Bayesian CNNs model
using chest X-ray images for diagnosis of COVID19 [8]. Hemdan and others used VGG19 and DenseNet models to diagnose
COVID19 from X-ray images [11]. Apostopolus and others
performed automatic detection from X-ray images using CNNs
with Transfer Learning [20]. In another study, Apostopolus
used the latest technology CNN called MobileNet and used 7
classes [19]. Sethy and Behera proposed a methodology based
on Deep Learning to detect a patient infected with coronavirus
using X-ray images. In addition to the ResNet50 method, they
also worked on the SVM model [21].
In our first study in the diagnosis of pneumonia developed
due to COVID19, we classified the chest x-ray images using
CNN-based ResNet50, InceptionV3 and Inception-ResNetV2
models. As a result of this study, ResNet50 model achieved
the highest performance with 98% classification performance
[22]. Based on the results obtained from this study, the effects
of the different bacthsize hyper-parameter on the performance
of the COVID19 cases were examined. For this, pre-trained
ResNet50 model and X-ray images in 4 classes (COVID19,
Normal, Viral Pneumonia, Bacterial Pneumonia) were used.
The flow chart of the proposed study is given in Figure 1.

Figure 1: Representation of the study.

II.

MATERIAL AND METHODS

A. Dataset
Two different databases were used to obtain X-ray images.
There are four different classification processes on X-Ray
images. Of these, 219 images for COVID19 positive, 1341
images for normal and 1345 images for viral pneumonia were

obtained from radiography-database images on Kaggle page
[23]. In addition to these data, 1350 X-ray images, which
are pneumonia from bacteria, were also obtained from a
different database on the Kaggle page [24]. Normal, COVID19,
Bacterial pneumonia and Viral pneumonia chest X-ray images
are given in the Figure 2.

Figure 2: X-Ray images of 4 different classes a) COVID19 b)
Viral pneumonia c) Normal d) Bacterial pneumonia

B. Convolutional Neural Networks
CNN is a machine learning model. CNN differs from other
neural network models by direct processing of data to produce
results [25], [26] and is widely used in medical images because
it can impress image processing for classification, detection
and segmentation [27]. A standard CNN model usually includes convolution, pooling, and fully connected layers. The
properties are obtained by the convolution layer with activation
function. The pooling layer reduces the number of features
and model parameters that reduce the number of calculations.
In particular, the Relu activation function is used on the Fully
Connected Layer, and the SoftMax activation function is added
to the end of this layer and provides a categorical probability
distribution output using CNN output. The performances of
deep learning models vary according to the hyper-parameters
used. In order for the model to exhibit high performance,
values such as data number, batch size value, learning rate,
optimization algorithms, Epoch amount, activation functions,
kernel size should be determined appropriately. In this study,
the effect of bathsize parameters, which means how many data
will be processed at the same time, will be examined.
C. ResNet Model
Kaiming He proposed Residual neural network (ResNet)
in 2015 [28]. The hypothesis behind ResNet is that deeper
networks are more difficult to optimize. Because the deeper

3

model should be able to perform as well as the shallower model
by copying the learned parameters from the shallow model
and adjusting the additional layers to identity mapping. More
specifically, every residual block has two 3x3 convolutional
layers. Periodically, the number of filters are doubled and
spatial downsampling is operated.

D. Metrics
Predictive performances of classes are determined by four
different measurements. The metrics are:

Accuracy

=

Recall

=

P recision =
F 1 − Score

=

TP + TN
TP + TN + FP + FN
TP
TP + FN
TP
TP + FP
2 ∗ P recision ∗ Recall
P recision + Recall

where TP is the number of correctly classified
subjects, FN is the number of misclassified positive
as negative, TN is the number of correctly classified
subjects, and FP is the number of misclassified
subjects as positive.

III.

(1)
(2)
(3)
(4)
positive
subjects
negative
negative

Figure 3: The training performance of different BH parameters.

RESULTS AND DISCUSSION

Tensorflow-keras libraries supported by Python programming language were used for the training of the deep learning
model. Original images have been resized and converted to
224x224. No other pre-processing was applied to the images.
In updating the model weights, the ADAM algorithm, the
Epoch number as 30 and the Learning rate as 0.0001 were
determined. In addition to the direct transfer of the weights
of the ResNet50 model, the model was trained with 3 layers
added to the end of the model. Training and test performance
of six different batch size (3,10,20,30,40,50) values are given
in Figure 3 and Figure 4.
As can be seen from Figure 3, It is seen that the model
exhibits an training performance over 99% according to all
BH parameters. In the zoomed graph, it is seen that low BH
values get slightly lower.
Considering Figure 4, it can be said that low GH values
reach a stable result at low epoch (rapidly) values. As the
BH value increases, the time to reach stability increases. This
means that more epoch values may be needed. When we
compare these results with the general performance values
given in Table 1, the fact that the BH value is not too small
and not too large makes the performance values higher. The
highest COVID19 detection was 95.17% for BH = 3 and the
highest overall performance value and F1 score value were
obtained for BH = 20.

Figure 4: Test performance of different BH parameters.

4

Batch Size
3
10
20
30
40
50

Accuracy (%)
97.73
95.29
97.97
97.82
97.93
95.66

Recall (%)
95.17
91.51
94.95
95.01
94.91
91.62

Precision (%)
94.41
88.64
95.98
95.70
95.96
92.83

F1-Measure (%)
94.57
88.84
95.40
95.30
95.34
91.50

[18]

[19]

Table I: Obtained classification accuracies with different batch
size.
[20]

R EFERENCES
[1]

[2]

[3]
[4]

[5]
[6]
[7]

[8]

[9]

[10]

[11]

[12]

[13]

[14]

[15]

[16]

[17]

Q. Zou, S. Zheng, X. Wang, S. Liu, J. Bao, et al., "Influenza Aassociated severe pneumonia in hospitalized patients: Risk factors and
NAI treatments," International Journal of Infectious Diseases, 92 :
208–213, 2020.
I. Sirazitdinov, M. Kholiavchenko, T. Mustafaev, Y. Yixuan, R. Kuleev,
"Deep neural network ensemble for pneumonia localization from a largescale chest x-ray database," Computers and Electrical Engineering, 78:
388–399,2019.
C.J. Saul, D.Y. Urey, C.D. Taktakoglu, "Early diagnosis of pneumonia
with deep learning," arxiv.org, 1904.00937,2020.
G. Verma, S. Prakash, "Pneumonia classification using deep learning in
healthcare," International Journal of Innovative Technology and Exploring Engineering (IJITEE), 9(4):1715-1723,2020.
https://www.worldometers.info/coronavirus
https://www.who.int/
A.K. Jaiswal, P. Tiwari, S. Kumar, D. Gupta, A. Khanna, et al., "Identifying pneumonia in chest x-rays: A deep learning approach,"Measurement
145: 511–51, 2019.
B. Ghoshal, A. Tucker, "Estimating uncertainty and interpretability in deep learning for coronavirus (covid-19) detection," arxiv.org,
2003.10769,2020.
J. Zhang, Y. Xie, Y. Li, C. Shen, Y. Xia, "Covid-19 screening on chest
x-ray images using deep learning based anomaly detection," arxiv.org,
2003.12338v1,2020.
J.R. Zech, M.A. Badgeley, M. Liu, A.B. Costa, J.J. Titano,
E.K.
Oermann, "Variable generalization performance of a deep
learning model to detect pneumonia in chest radiographs: A
cross-sectional study," PLOS Medicine, 15(11): e1002683,2018.
https://doi.org/10.1371/journal.pmed.1002683
E.E. Hemdan, M.A. Shouman, M.E. Karar, "COVIDX-Net: A framework of deep learning classifiers to diagnose covid-19 in x-ray images,"arxiv.org,2003.11055,2020.
G. Liang, L. Zheng, "A transfer learning method with deep residual
network for pediatric pneumonia diagnosis,"Computer Methods and
Programs in Biomedicine, 187,2020.
G. Ga´al, B. Maga, A. Luk´acs,"Attention u-net based adversarial architectures for chest x-ray lung segmentation," arxiv.org,
2003.10304,2020.
W.O. Quinn, R.J. Haddad, D.L. Moore,"Pneumonia radiograph diagnosis utilizing deep learning network," IEEE 2nd International Conference on Electronic Information and Communication Technology, 763767,2019.
O. Stephan, M. Sain, U.J. Maduh, D. Jeong, "An efficient deep learning
approach to pneumonia classification in healthcare," Hindawi Journal of
Healthcare Engineering,4180949, 2019.
S. Sreeja, L. Bhavya, S. Swamynath, R. Dhanuja, "Chest x-ray pneumonia prediction using machine learning algorithms," International Journal
for Research in Applied Science Engineering Technology (IJRASET),
7(4):3227-3230,2019.
E. Longjiang,Z. Baisong, G. Yunmei, Z. Changmeng, Z. Mingjie, et al.,
"Using deep-learning techniques for pulmonary-thoracic segmentations

[21]
[22]

[23]

[24]
[25]

[26]

[27]

[28]

and improvement of pneumonia diagnosis in pediatric chest radiographs,"
Pediatric Pulmonology, 54:1617-1626,2019.
M. Toğaçar, B. Ergen, Z. Cömert, F. Özyurt, "A deep feature learning
model for pneumonia detection applying a combination of mrmr feature
selection and machine learning models," IRBM, 2019.
I.D. Apostopolus, S.I. Aznaouridis, M.A. Tzani,"Extracting possibly
representative COVID-19 biomarkers from x-ray images with deep
learning approach and image data related to pulmonary diseases," Journal
of Medical and Biological Engineering, 40:462–469, 2020.
I. D. Apostolopoulos, T. A. Mpesiana,"Covid-19: automatic detection
from x-ray images utilizing transfer learning with convolutional neural
networks,"Physical and Engineering Sciences in Medicine, 2020.
P. K. Sethy, S. K. Behera, "Detection of coronavirus disease (covid-19)
based on deep features," Preprints, 2020030300, 2020.
A. Narin, C. Kaya, Z. Pamuk, "Automatic Detection of Coronavirus
Disease (COVID-19) Using X-ray Images and Deep Convolutional
Neural Networks," 2020.
M.E.H. Chowdhury, T. Rahman, A. Khandakar, R. Mazhar, M.A. Kadir,
Z.B. Mahbub, K.R. Islam,M.S. Khan, A. Iqbal, N. Al-Emadi,
M.B.I. Reaz, "Can AI help in screening viral and covid-19 pneumonia?,"arxiv.org,2003.13145,2020.
https://www.kaggle.com/paultimothymooney/chest-xray-pneumonia
U. R. Acharya, S. L. Oh, Y. Hagiwara , J. Hong Tan, H. Adeli, "Deep
convolutional neural network for the automated detection and diagnosis
of seizure using EEG signals,"Computers in Biology And Medicine, 100:
270-278, 2018.
A. Narin, "Detection of focal and non-focal epileptic seizure using
continuous wavelet transform-based scalogram images and pre-trained
deep neural networks," IRBM, 2020.
D. Han, Q. Liu, W. Fan, "A new image classification method using
CNN transfer learning and web data augmentation,"Expert Systems with
Applications, 95: 43-56, 2018.
K. He, X. Zhang, S. Ren, and J. Sun, "Deep residual learning for image
recognition," In Proceedings of the IEEE conference on computer vision
and pattern recognition,770–778, 2016.

