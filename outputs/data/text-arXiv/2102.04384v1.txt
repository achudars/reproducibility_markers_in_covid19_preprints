Draft – February 9, 2021

Efficient, Fair, and Incentive-Compatible
Healthcare Rationing

arXiv:2102.04384v1 [cs.GT] 8 Feb 2021

Haris Aziz†

Florian Brandl‡

As the COVID-19 pandemic shows no clear signs of subsiding, fair and eﬃcient
rationing of healthcare resources has emerged as an important issue that has been
discussed by medical experts, policy-makers, and the general public. We consider
a healthcare rationing problem where medical units are to be allocated to patients.
Each unit is reserved for one of several categories and the patients have diﬀerent
priorities for the categories. We present an allocation rule that respects the priorities,
complies with the eligibility requirements, allocates the largest feasible number of
units, and does not incentivize agents to hide that they qualify through a category.
Moreover, the rule is polynomial-time computable. To the best of our knowledge, it
is the ﬁrst known rule with the aforementioned properties.
Keywords: Allocation under priorities, healthcare rationing, assignment maximization.

1 Introduction
The COVID-19 pandemic has emerged as one of the biggest challenges the world has faced.
It has resulted in a frantic scientiﬁc race to produce the most eﬀective and safe vaccine to
stem the devastating eﬀects of the pandemic. Whereas there is encouraging initial news on the
creation of vaccines, there are still several scientiﬁc challenges on how to distribute, allocate,
and administer them in an eﬃcient and fair manner.
Since healthcare resources such as ventilators, antiviral treatments, and vaccines can be scarce
or costly, a fundamental question that arises is who to prioritize when making allocation decisions. For example, three important priority groups that are highlighted by medical practitioners and policy-makers are (1) health care workers; (2) other essential workers and people in
high-transmission settings; (3) and people with medical vulnerabilities associated with poorer
†
‡

UNSW Sydney and Data61 CSIRO, Australia, haris.aziz@unsw.edu.au
Princeton University, USA, brandl.ffx@gmail.com

1

Draft – February 9, 2021

COVID-19 outcomes (Persad et al., 2020; Truog et al., 2020). Other concerns that have been
discussed include racial equity (Bruce and Tallman, 2021).
When healthcare resources need to be allocated, it is not enough to identify priority groups.
There is also a need to algorithmically and transparently make these prioritized allocations
decisions (Emanuel et al., 2020; WHO, 2020). In a New York Times article, the issue has
been referred to as the one of the hardest decisions, health organizations need to make (Fink,
2020). Since the decisions need to be justiﬁed to the public, they must be aligned with the
ethical guidelines such as respecting priorities of various categories. These decisions are not
straightforward, especially when a patient is eligible for more than one category. When patients
are eligible for multiple categories, the decision on which category is used can have compounding
eﬀects on what categories other agents can use. A fundamental question that arises is the
following one:
How do we allocate scarce medical resources fairly and efficiently while taking into
account various ethical principles and priority groups?
The question is not just fundamental but the solution to the problem is time–critical as
various states, city councils, and municipalities start to roll out vaccines using their particular
ethical guidelines. The problem of health care rationing has recently been formally studied by
market designers. Pathak et al. (2020) were among the ﬁrst to frame the problem as a two-sided
matching problem in which patients are on one side and the resources units are on the other
side. By doing so, they linked the healthcare rationing problem with the rich ﬁeld of two-sided
matching (Roth and Sotomayor, 1990).
Pathak et al. suggested dividing the units into diﬀerent reserve categories, each with its
own priority ranking of the patients. The categories and the category-speciﬁc priorities represent the ethical principles and guidelines that a policy-maker may wish to implement.1 For
example, a category for senior people may have an age-speciﬁc priority ranking that puts
the eldest citizens ﬁrst. Having a holistic framework that considers diﬀerent types of priorities has been termed important in healthcare rationing .2 The approach of Pathak et al.
has been recommended or adopted by various organizations including the NASEM (National
Academies of Sciences, Engineering, and Medicine) Framework for Equitable Vaccine Allocation (NASEM-National Academies of Sciences, Engineering, and Medicine, 2020) and has been
endorsed in medical circles (Persad et al., 2020; Sönmez et al., 2020). The approach has been
covered widely in the media, including the New York Times and the Washington Post.3
For their two-sided matching formulation, Pathak et al. (2020) proposed a solution for
the problem.
1

2

One of their key insights was that running the Deferred Acceptance algo-

See for example, the book by Bognar and Hirose (2014) on the ethics of healthcare rationing that discusses
many of these principles.
In a report issued by the Deeble Institute for Health Policy Research, Martin (2015) writes that “To establish
robust healthcare rationing in Australia, decision-makers need to acknowledge the various implicit and explicit

3

priorities that influence the process and develop a decision-making tool that incorporates them.”
https://www.covid19reservesystem.org/media

2

Draft – February 9, 2021

rithm (Gale and Shapley, 1962; Roth, 2008) on the underlying problem satisﬁes basic relevant
axioms (eligibility compliance, respect of priorities, and non-wastefulness). They also showed
when all the category priorities are consistent with a global baseline priority, then there is a
smart reserves algorithm that computes a maximum size matching satisfying the basic axioms.
The smart reserves approach makes careful decisions about which category should be availed by
which patient. However, the problem of such a smart reserves approach for the general problem
with heterogeneous priorities has not been addressed in the literature. In this paper, we set out
to address this issue and answer the following research problem.
For the general healthcare rationing problem with heterogeneous priorities, how do we
allocate resources in a fair, economically efficient, strategyproof, and computationally
tractable way?
Contribution For the general healthcare rationing problem, we ﬁrst highlight that naively
ascribing strict preferences over the categories to the agents can have adverse eﬀects on the
eﬃciency of the outcome when patients are eligible for multiple categories. If the eligibility
requirements are treated as hard constraints, it leads to ineﬃcient allocation of resources. If the
eligibility requirements are treated as soft constraints, then the outcome does not allocate the
resources optimally to the highest priority patients, thereby undermining important healthcare
guidelines and ethical principles.
We address the problem posed by Pathak et al. (2020), that of ﬁnding a maximum beneﬁciary assignment that respects priorities and other desirable axioms. Our main contribution is
presenting an allocation rule that
(i) complies with the eligibility requirements
(ii) respects the priorities of the categories (for each category, patients of higher priority are
served ﬁrst)
(iii) is non-wasteful (there is no unit that is unused but could be used by some eligible patient)
(iv) yields a maximal beneﬁciary allocation (allocates the largest feasible number of units to
patients who are eligible for the categories pertaining to the units)
(v) is strategyproof (does not incentivize agents to under-report the categories they qualify
for)
(vi) is monotonic in the quotas (selected agents remain selected if the category quotas weakly
increase) and
(vii) is strongly polynomial-time computable.
Our algorithm also immediately applies to the school choice problem in which students are
only interested in being matched with one of their acceptable schools. It also applies to hiring

3

Draft – February 9, 2021

settings in which applicants are interested in one of the positions and each of the departments
has its own priorities. Finally, it applies to many other rationing scenarios such as allocation of
limited slots at public events or visas to immigration applicants.

2 Related Work
The paper is related to an active area of research on matching with distributional constraints
(see, e.g., Kojima, 2019). One general class of distributional constraints that have been examined in matching market design pertains to common quotas over institutions such as hospitals (Kamada and Kojima, 2015, 2017; Biró et al., 2010; Goto et al., 2016).
Within the umbrella of work on matching with distributional constraints, particularly relevant to healthcare rationing is the literature on school choice with diversity constraints (Ehlers et al., 2014; Echenique and Yenmez, 2015; Kurata et al., 2017;
Aygün and Turhan, 2020; Aygün and Bó, 2020; Aziz et al., 2020; Gonczarowski et al., 2019).
Categories in healthcare rationing correspond to aﬃrmative action types in school choice. For
a brief survey, we suggest the book chapter by Heo (2019). Except for the special case in which
students have exactly one type (Ehlers et al., 2014), most of the approaches do not achieve
diversity goals optimally whereas in the healthcare rationing problem that we focus on, our goal
is to ﬁnd matchings that are maximal in terms of beneﬁciary assignment. Ahmed et al. (2017),
Dickerson et al. (2019), and Ahmadi et al. (2020) consider optimisation approaches for diverse
matchings but their objective and models are diﬀerent.
Pathak et al. (2020) were the ﬁrst to frame a rationing problem with category priorities as a
two-sided matching problem in which agents are simply interested in a unit of resource and the
resources are reserved for diﬀerent categories. They show that artiﬁcially enforcing strict preferences of the agents over the categories and running the deferred acceptance algorithm results
in desirable outcomes for the rationing problem. They note, however, that this approach may
lead to matchings that are not Pareto optimal. They then proposed to use the smart reserves
approach of Sönmez and Yenmez (2020) for the restricted problem when all the categories have
identical priorities. Our results can be viewed as simultaneously achieving the properties of the
two approaches of Pathak et al.. Firstly, we propose a new algorithm that achieves the same
properties for heterogeneous priorities as the smart reserves algorithm of Sönmez and Yenmez
(2020) and Pathak et al. (2020) for homogeneous priorities. Secondly, our algorithm has an
important advantage over the Deferred Acceptance formulation of Pathak et al. (2020) for the
case of heterogeneous priorities as our approach additionally achieves the important property of
maximality in beneﬁciary assignment. In followup work, Grigoryan (2020) considers optimisation approaches for variants of the problem but does not present any polynomial-time algorithm
or consider incentive issues. In contrast to the papers on healthcare rationing discussed above,
we also consider strategyproofness and monotonicity aspects and show that our rule complies
with them.
In this paper, we attempt to compute what are essentially maximum size stable match-

4

Draft – February 9, 2021

ings. The problem of computing such matchings is NP-hard if both sides have strict preferences/priorities (Biró et al., 2010).

In our problem, the agents essentially have dichoto-

mous preferences (categories they are/are not eligible for) and, hence, we are able to obtain
a polynomial-time algorithm for the problem.
Furthermore, our algorithm is strategyproof. In contrast, for other two-sided matching settings, it is known that maximizing the number of matched individuals results in incentive
and fairness impossibilities (see, e.g., Afacan et al., 2020; Krysta et al., 2014). Computing
outcomes that match as many agents as possible, has also been examined in related but
diﬀerent contexts (see, e.g., Aziz, 2018; Andersson and Ehlers, 2016; Abraham et al., 2007;
Bogomolnaia and Moulin, 2015).

3 Model
We adopt the healthcare rationing model of Pathak et al. (2020) with one generalization: we
allow the categories’ priorities over agents to be weak rather than strict. There are q identical
and indivisible units of some resource, which are to be allocated to the agents in a set N with
P
|N | = n. Each category c has a quota qc ∈ N with c∈C qc = q and a priority ranking %c ,
which is a preorder on N ∪ {∅}. An agent i is eligible for category c if i ≻c ∅. We say that

I = (N, C, (%c ), (qc )) is an instance (of the rationing problem). (For convenience, we will write
(%c ) and (qc ) for the proﬁle of priorities and quotas in the sequel.)
A matching µ : N → C ∪ {∅} is a function that maps each agent to a category or to ∅ and
satisﬁes the capacity constraints: for each c ∈ C, |µ−1 (c)| ≤ qc . For an agent i ∈ N , µ(i) = ∅
means that i is unmatched (that is, does not receive any unit) and µ(i) = c means that i receives
a unit reserved for category c. When convenient, we will identify a matching µ with the set of
agent-category pairs {{i, µ(i)} : µ(i) 6= ∅}.4
We introduce four axioms that are natural in the context of allocating medical units and
well-grounded in practice. For further motivation of these axioms, we recommend the detailed
discussions by Pathak et al. (2020).
The ﬁrst axiom we consider requires that matchings comply with eligibility requirements. It
speciﬁes that a patient should only take a unit of a category for which the patient is eligible.
For example, a young person should not take a unit from the units reserved for elderly people.
Definition 1 (Compliance with eligibility requirements). A matching µ complies with eligibility
requirements if for any i ∈ N and c ∈ C, µ(i) = c =⇒ i ≻c ∅.
The second axiom concerns the respect of priorities of categories. It rules out that a patient
is matched to a unit of some category c while some other agent with a higher priority for c is
unmatched.
Definition 2 (Respect of priorities). A matching µ respects priorities if for any i, j ∈ N and
c ∈ C, µ(i) = c and µ(j) = ∅ =⇒ j 6≻c i.
4

In graph theoretic terms, µ is a b-matching because multiple edges in µ can be adjacent to a category c.

5

Draft – February 9, 2021

An astute reader who is familiar with the theory of stable matchings will immediately realise
that the axiom “respect of priorities” is equivalent to justified envy-freeness in the context of
school-choice matchings (Abdulkadiroğlu and Sönmez, 2003).
Next, non-wastefulness requires that if an agent is unmatched despite being eligible for a
category, then all units reserved for that category are matched to other agents.
Definition 3 (Non-wastefulness). A matching µ is non-wasteful if for any i ∈ N and c ∈ C,
i ≻c ∅ and µ(i) = ∅ =⇒ |µ−1 (c)| = qc .
Not all non-wasteful matchings allocate the same number of units. In particular, some may
not allocate as many units as possible. A stronger eﬃciency notion prescribes that the number
of allocated units is maximal subject to compliance with the eligibility requirements.
Definition 4 (Maximal beneﬁciary assignment). A matching µ is a maximal beneficiary assignment if it has maximum size among all matchings complying with eligibility requirements.
These four axioms capture the ﬁrst guideline put forth in the report by the National Academies of Sciences, Engineering, and Medicine:

“ensure that allocation maxi-

mizes beneﬁt to patients, mitigates inequities and disparities, and adheres to ethical principles” (NASEM-National Academies of Sciences, Engineering, and Medicine, 2020, page 69)
The following example illustrates the deﬁnitions above.
Example 1. Suppose there are three agents and two categories with one reserved unit each.
N = {1, 2, 3},

C = {c1 , c2 },

qc1 = 1, qc2 = 1.

The priority ranking of c1 is 2 ≻c1 3 ≻c1 ∅ ≻c1 1 and the priority ranking of c2 is 2 ≻c2 ∅ ≻c2
1 ≻c2 3. Figure 1 illustrates this instance of the rationing problem.
Note that agent 1 is not eligible for any category, agent 2 is eligible for c1 and c2 , and agent
3 is eligible only for c1 . Thus, the following matchings comply with the eligibility requirements.
µ1 = ∅

µ2 = {{2, c1 }}

µ3 = {{2, c2 }}

µ4 = {{3, c1 }}

µ5 = {{2, c2 }, {3, c1 }}

All of these matchings except for µ4 respect priorities. Only µ2 and µ5 are non-wasteful. The
only matching that is a maximal beneﬁciary assignment is µ5 .
We are interested in allocation rules, which, for each instance, return a matching.
Definition 5 (Allocation rule). An allocation rule maps every instance I to a matching for I.
We say that an allocation rule f satisﬁes one of the axioms in Deﬁnitions 1 to 4 if f (I) satisﬁes
the axiom for all instances I. Moreover, we deﬁne a notion of strategyproofness for allocation
rules. Note that all units are identical and agents have no preferences over the category of the

6

Draft – February 9, 2021

1
qc1 =1
c1

2 ≻c1 3 ≻c1 ∅ ≻c1 1

c2

2 ≻c2 ∅ ≻c2 1 ≻c2 3

2

qc2 =1
3
Figure 1: The problem instance described in Example 1. A dotted line between an agent and a
category indicates that the agent is eligible for the category.
unit they receive However, they may have an incentive to hide being eligible for a category, or,
more generally, to aim for a lower priority for some category.5
Formalizing strategyproofness requires the following deﬁnition. Let (%c ) and (%′c ) be priority
proﬁles and i ∈ N . We say agent i’s priority decreases from (%c ) to (%′c ) if for all j, k 6= i and
c ∈ C,
j %c k ←→ j %′c k
j %c i −→ j %′c i and j ≻c i −→ j ≻′c i
That is, the priority rankings over agents other than i are the same in both proﬁles and i
can only move down in the priority rankings from (%c ) to (%′c ). We also say that i’s priority
decreases from I = (N, C, (%c ), (qc )) to I ′ = (N, C, (%′c ), (qc )). Strategyproofness requires that
if i is unmatched for I, then i is also unmatched for I ′ .
Definition 6 (Strategyproofness). An allocation rule f is strategyproof if f (I)(i) = ∅ implies
f (I ′ )(i) = ∅ whenever i’s priority decreases from I to I ′ .
In particular, with a strategyproof allocation rule, agents cannot beneﬁt from hiding that
they are eligible for a category.
Finally, we deﬁne a monotonicity axiom that requires that matched agents remain matched
if the categories’ quotas weakly increase.
Definition 7 (Monotonicity in quotas). An allocation rule f is monotonic in quotas if for any
two instances I and I ′ with quotas (qc ) and (qc′ ) so that qc ≤ qc′ for all c ∈ C, every agent who
is matched in f (I) is also matched in f (I ′ ).

5

In the context of school choice, lowering oneself in the priority ranking of a school is akin to students deliberately
underperformining in an entrance exam.

7

Draft – February 9, 2021

4 Issues with Breaking Ties and Applying the General Solution of
Pathak et al. (2020)
The approach of Pathak et al. (2020) is to frame the healthcare rationing problem as a twosided matching problem. They showed that if one artiﬁcially introduces (strict) preferences
for the agents over the categories they are eligible for and applies the Deferred Acceptance
algorithm, the resulting matching complies with the eligibility requirements, respects priorities,
and is non-wasteful (Pathak et al., 2020, Theorem 2). They state the algorithmic implications
of their result.
“Not only is this result a second characterization of matchings that satisfy our three
basic axioms, it also provides a concrete procedure to calculate all such matchings.”
Although considering all possible artiﬁcial preferences and running Deferred Acceptance gives
us all the matchings satisfying the three axioms, it is computationally expensive to consider
|C|!|N | diﬀerent preference proﬁles.
Not every preference proﬁle leads to a compelling outcome even if the categories have strict
priorities. For example, many preference proﬁles lead to matchings that are not maximal
beneﬁciary assignments. Our next example highlights this issue.
Example 2. Consider the instance in Example 1. Suppose we run the Deferred Acceptance
algorithm assuming all agents prefer c1 to c2 to c3 . Assuming agents can only be matched to
categories they are eligible for (compliance with eligibility requirements), the resulting matching
is µ2 = {{2, c1 }}. This matching is however not the most eﬃcient use of the resources because
it is possible to allocate all units while still satisfying the axioms in Deﬁnitions 1 to 3: µ5 =
{{3, c1 }, {2, c2 }}.
Hence, artiﬁcially inducing preferences of agents and running Deferred Acceptance can lead
to ineﬃcient allocations. Even if we ignore computational concerns and can assign preferences
to agents so that the matching selected by Deferred Acceptance is of maximum size and respects priorities, it is not clear whether such a rule satisﬁes strategyproofness and monotonicity
properties like the ones we introduced above. We propose a rule that circumvents both issues.

5 The Allocation Rule
Our allocation rule is based on an arbitrary permutation π of the agents called a baseline
ordering. For an agent i, π(i) is interpreted as the position of i in the baseline ordering.
Given an instance I = (N, C, (%c ), (qc )), we construct the corresponding reservation graph
GπI = (N ∪ C, E, w, (qc )), which is a bipartite, weighted graph. The two independent vertex sets
are N and C and the edge set E consists of all agent-category pairs so that the agent is eligible
for the category.
E = {{i, c} : i ∈ N, c ∈ C, i ≻c ∅}

8

Draft – February 9, 2021

1
qc1 =1
1 + 2ǫ +

c1

ǫ
4

2
1 + 2ǫ +

ǫ
4

c2
qc2 =1

3

1+ǫ+

ǫ
8

Figure 2: The reservation graph GπI for the instance I in Example 1. The dotted lines correspond
to edges in E. The numbers close to the edges are their weights according to w.
The weight of an edge {i, c} ∈ E is
w({i, c}) = 1 + wc ({i, c}) + wπ ({i, c})
where
(i) wc ({i, c}) = (n − ℓ)ǫ if i is in the ℓth most-preferred equivalence class in c’s priority
ranking, and
(ii) wπ ({i, c}) =
for some ǫ <

1
.
n2

ǫ
,
2π(i)

The reservation graph for the instance in Example 1 is depicted in Figure 2

where the baseline ordering is chosen as 123.
We say that a subset of edges M is a matching of GπI if each i ∈ N is adjacent to at most one
edge in M and each c ∈ C is adjacent to at most qc edges in M . Hence, each matching µ of I
induces a matching Mµ = {{i, c} ∈ E : µ(i) = c} of GπI and vice versa. We will not distinguish
between µ and Mµ in the sequel.
The intuition behind the edge weights is as follows. We want to ﬁnd a maximum size matching
of GπI . Among the maximum size matchings, we want to restrict attention to those that respect
priorities. Finally, among the latter set of matchings, we want to prioritize the agents who
are ranked early in the baseline ordering π (to achieve strategyproofness and monotonicity).
This can be done as follows. We ﬁrst care about whether a category ﬁnds an agent acceptable,
in which case there is an edge with weight at least 1. Secondly, we give additional weight if
an agent is high in the priority ranking of the category. Finally, matching agents who come
early in the baseline ordering gives more weight than matching agents who come late. By the
choice of ǫ, the weight a matching can obtain through wc and wπ is always less than 1. Hence,
ordering matchings by weight reﬁnes the order induced by size. Similarly, wπ is chosen so that
the sum of weights a matching can get through wπ is less than ǫ (which is smallest possible

9

Draft – February 9, 2021

non-zero diﬀerence in the weight of any two matchings according to wc ). Thus, matching agents
to categories for which they have high priority is prioritized over matching agents who come
early in the baseline ordering.
Consider an allocation rule that chooses a maximal weight matching of GπI for every instance
I (with π ﬁxed). The following three lemmas show that any such allocation rule satisﬁes all
of the axioms deﬁned above. By construction of the reservation graph, each maximal weight
matching complies with the eligibility requirements, is a maximum size matching, and respects
priorities. We verify these facts in Lemma 1. Lemma 2 and Lemma 3 show that the above
allocation rules are strategyproof and monotonic, with the former taking up the bulk of the
work.
Lemma 1. Every maximal weight matching of GπI
(i) complies with acceptability requirements,
(ii) is of maximum size among feasible matchings,
(iii) respects priorities, and
(iv) matches the same set of agents.
Proof. Let µ be a maximal weight matching of GπI .
(i) If {i, c} is an edge in GπI , then i ≻c ∅. Hence, any matching of GπI complies with the
acceptability requirements. In particular, µ does.
(ii) For any edge e ∈ E,
w(e) ≤ 1 + (n − 1)ǫ +

1
ǫ
<1+
2
n

1
(recall the deﬁnition of wc and wπ ). Hence, w(e) ∈ [1, 1 + n1 ). Moreover, every
n2
matching µ′ of GπI has cardinality at most n as |µ′ | ≤ n = |N | since every agent can be matched
P
to at most one category. Hence, w(µ′ ) = e∈µ′ w(e) ∈ [|µ′ |, |µ′ | + 1). So w(µ) ≥ w(µ′ ) implies
|µ| ≥ |µ′ |. Hence, µ is a maximal size matching (and, thus, also non-wasteful).

since ǫ <

(iii) If µ does not respect priorities, there exist i, j ∈ N and c ∈ C so that µ(i) = c, µ(j) = ∅,
and j ≻c i. In particular, lj ≤ li − 1, where lj is the rank of j’s equivalence class in the priority
ranking of c (and similarly for i). Then
ǫ
2π(j)
> 1 + (n − lj − 1)ǫ + ǫ
ǫ
≥ 1 + (n − li )ǫ + π(i) = w({i, c})
2

w({j, c}) = 1 + (n − lj )ǫ +

It follows that µ′ = µ − ({{i, c}} ∪ {{j, c}} is a matching of GπI with w(µ′ ) > w(µ). Since this
contradicts that µ has maximal weight, µ has to respect priorities.
(iv) We show that, more generally, any two matchings µ and µ′ of GπI with w(µ) = w(µ′ )
match the same set of agents. In the proof of (ii), we have observed that w(µ) ∈ [|µ|, |µ| + 1)

10

Draft – February 9, 2021

and w(µ′ ) ∈ [|µ′ |, |µ′ | + 1). So the fact that w(µ) = w(µ′ ) implies |µ| = |µ′ |. Recalling that
w(µ) = |µ| + wc (µ) + wπ (µ) (and similarly for µ′ ) gives
wc (µ) + wπ (µ) = wc (µ′ ) + wπ (µ′ )

(1)

Now wc (µ) and wc (µ′ ) are integer multiples of ǫ and wπ (µ) < ǫ and wπ (µ′ ) < ǫ. It follows from
(1) that
wπ (µ) = wπ (µ′ )

(2)

Inserting the deﬁnition of wπ gives
X

{i,c}∈µ

ǫ
2π(i)

=

X

{i,c}∈µ′

ǫ
2π(i)

This equality holds if and only if {i ∈ N : µ(i) ∈ C} = {i ∈ N : µ′ (i) ∈ C}. That is, if µ and µ′
match the same set of agents.
The proof of Lemma 2 will use some graph-theoretical terminology. Let a0 , . . . , am be a
sequence of vertices in GπI . If P = {{al−1 , al } : l ∈ {1, . . . , m}} ⊂ E, we call P a path in GπI .
The length of P is |P | and a0 and am are the initial and terminal vertex of P . If µ is a matching
of GπI , P is an alternating path for µ if {ai−1 , ai } ∈ µ if and only if i is even and either a0 ∈ N and
P
P
a0 is unmatched in µ or a0 ∈ C and |µ−1 (a0 )| < qc . If, moreover, e∈P \µ w(e) > e∈P ∩µ w(e),

P is an augmenting path for µ in GπI .

Lemma 2. Let i ∈ N and I and I ′ be instances so that i’s priority decreases from I to I ′ . If
i is unmatched in some maximal weight matching of GπI , then i is unmatched in all maximal
weight matchings of GπI′ .
Proof. Let GπI = (N ∪ C, E, w, (qc )) and GπI′ = (N ∪ C, E ′ , w′ , (qc )). It suﬃces to consider the
case that i’s priority for only one category decreases from I to I ′ . That is, there is d ∈ C so
that %c = %′c for all c 6= d. Repeated application of this case yields the general statement.
Let µ and µ′ be maximal weight matchings of GπI and GπI′ , respectively. Assume for contradiction that µ(i) = ∅ and µ′ (i) 6= ∅.
Claim 1. µ and µ′ match the same number of agents (|µ| = |µ′ |).
Proof. It follows from the deﬁnition of the reservation graph that either E = E ′ (if i ≻′d ∅) or
E = E ′ ∪ {{i, d}} (if ∅ ≻d i). In particular, E ′ ⊂ E so that µ′ is also a matching of GπI . Since
µ is a maximal weight matching of GπI , it follows from Lemma 1(ii) that µ is a maximal size
matching of GπI . Hence, |µ| ≥ |µ′ |. Similarly, since µ(i) = ∅, µ is also a matching of GπI′ . Since
µ′ is a maximal weight matching of GπI′ , we conclude |µ′ | ≥ |µ|. Together, |µ| = |µ′ |.
Figure 3 depicts the situation we reason about in the remainder in the proof.

11

Draft – February 9, 2021

Claim 2. There is an augmenting path for µ in GπI′ that alternates between edges in µ′ and
edges in µ with initial vertex i and an agent who is unmatched in µ′ as terminal vertex. That
is, there is a path P = Pµ′ ∪ Pµ with
Pµ′ = {{js−1 , cs } : s ∈ {1, . . . , n}} ⊂ µ′ − µ
Pµ = {{js , cs } : s ∈ {1, . . . , n}} ⊂ µ − µ′
j0 = i and µ′ (jn ) = ∅
the js are pairwise distinct
w′ (Pµ′ ) > w′ (Pµ )
Proof. Since i is matched in µ′ and unmatched in µ (µ′ (i) 6= ∅ and µ(i) = ∅), there is a path
P = Pµ′ ∪ Pµ in GπI′ that alternates between edges in µ′ and µ and starts at i. (Pµ′ = {i, µ′ (i)}
and Pµ = ∅ is one such path.) Assume that P is of maximal length among all such path starting
at i. By Claim 1 and Lemma 1(ii), µ is a maximal size matching of GπI′ . Hence, P has even
length (otherwise alternating along P would yield a matching of larger size than µ, namely the
matching µ−Pµ ∪Pµ′ ). We conclude that P is induced by a sequence i = j0 , c1 , j1 , . . . , cn , jn with
{js−1 , cs } ∈ µ′ and {js , cs } ∈ µ for all s ∈ {1, . . . , n} for some j1 , . . . , jn ∈ N and c1 , . . . , cn ∈ C.
Since P is of maximal length, it follows that µ′ (jn ) = ∅.
Now Pµ and Pµ′ are matchings of GπI′ . Since i is unmatched in Pµ but is matched in Pµ′ , Pµ
and Pµ′ do not match the same set of agents. By the proof of Lemma 1(iv), w′ (Pµ ) 6= w′ (Pµ′ ).
If w′ (Pµ ) > w′ (Pµ′ ), then P is an augmenting path for µ′ in GπI′ , so that µ′ − Pµ′ ∪ Pµ is a
matching with larger weight than µ′ . This contradicts that µ′ is a maximal weight matching of
GπI′ . Hence, w′ (Pµ′ ) > w′ (Pµ ).
Claim 3. cs = d for some s ∈ {1, . . . , n}.
Proof. We have w({j, c}) = w′ ({j, c}) for all j ∈ N and c 6= d. So if cs 6= d for all s ∈ {1, . . . , n},
then, by Claim 2, P is an augmenting path for µ in GπI . Since this would contradict that µ is
a maximal weight matching of GπI , the claim follows.
If i ∼d j for some agent j 6= i, then w(e) = w′ (e) for possibly all edges e ∈ E ′ except for
e = {i, d}. Hence, since i is unmatched in µ, w(Pµ ) = w′ (Pµ ) and w(Pµ′ ) ≥ w′ (Pµ′ ). Thus, by
Claim 2, µ − Pµ ∪ Pµ′ is a matching of GπI with larger weight than µ, which is a contradiction.
Hence, we assume that the equivalence class of i in the priority ranking of d contains only i
itself.
Let S = {s1 , . . . , sm−1 } be the indices of the agents who are matched to category d in µ′
labeled in increasing order (µ′ (jsl ) = d, sl−1 < sl ). By Claim 3, S is non-empty. Let s0 = 0
and sm = n. For l ∈ {1, . . . , m}, denote by P l the segment of P from jsl−1 to jsl (for example,
if s1 = 1, P 1 = {{j0 , c1 }, {j1 , c1 }} and µ′ (j1 ) = d). Lastly, let Pµl = Pµ ∩ P l and Pµl ′ = Pµ′ ∩ P l .
Note that
|Pµu | = |Pµu′ |

12

(3)

Draft – February 9, 2021

i
c1

j1

..
.

..
.

P1

cs1
js1
cs1 +1
js1 +1
cs1 +2
..
.

..
.

P2

jn−1
cn
jn
Figure 3: Augmenting path for µ in GI ′ alternating between edges in µ′ (in red) and edges in
µ (in blue). The dotted regions indicate the paths P 1 and P 2 in the proof of Claim 4
(when m = 2).
for all l ∈ {1, . . . , m} since each P l has even length (the initial and terminal vertex of each P l
is an agent) and P l alternates between edges in µ′ and µ.
We will in the following freely and without mentioning use the fact that
X

wπ (e) < ǫ = wc′ ({j, d}) − wc ({j, d}) = w′ ({j, d}) − w({j, d})

e∈µ

if i ≻d j and j %′d i (and similarly for µ′ ).
Claim 4. w′ (Pµl ) ≥ w′ (Pµl ′ ) for l ∈ {1, . . . , m}.
Proof.
Case 1. Let l = 1. We show that alternating µ along the path P 1 cannot increase the weight
of µ in GπI′ . By construction, no edge on the path P 1 is adjacent to the category d. Hence,
w(e) = w′ (e) for all e ∈ P 1 so that
w′ (Pµ1 ) = w(Pµ1 ) and w′ (Pµ1′ ) = wc (Pµ1′ )
Moreover, µ − Pµ1 ∪ Pµ1′ is a matching of GπI since i is unmatched in µ. Since µ is a maximal
weight matching of GπI , it follows that
0 ≥ w(µ − Pµ1 ∪ Pµ1′ ) − w(µ) = w(Pµ1′ ) − w(Pµ1 ) = w′ (Pµ1′ ) − w′ (Pµ1 )
Hence, w′ (Pµ1 ) ≥ w′ (Pµ1′ ).

13

Draft – February 9, 2021

Case 2. Let l ∈ {2, . . . , m} and assume that jsl %d i. Then w(e) = w′ (e) for all e ∈ P l . The
same argument as in Case 1 shows that w′ (Pµl ) ≥ w′ (Pµl ′ ).
Case 3. Let l ∈ {2, . . . , m} and assume that i ≻d jsl . Assume for contradiction that w′ (Pµl ′ ) >
w′ (Pµl ). Observe that
w′ ({jsl , d}) ≤ w({jsl , d}) + ǫ ≤ w({i, d})

(4)

where the ﬁrst inequality is an equality if and only if jsl %′d i. Now µ̄ = µ−Pµl ∪Pµl ′ −{{jsl , d}}∪
{{i, d}} is a matching of GπI since i is unmatched in µ (note that csl +1 = d). We have
w(Pµl ′ − {{jsl , d}}) + w({i, d}) = w′ (Pµl ′ − {{jsl , d}}) + w({i, d})
≥ w′ (Pµl ′ − {{jsl , d}}) + w′ ({jsl , d}) = w′ (Pµl ′ )

(5)

where the ﬁrst equality uses that {jsl , d} is the only edge in Pµl ′ adjacent to d and the inequality
uses (4). Hence,
w(µ̄) − w(µ) = w(Pµl ′ − {{jsl , d}} ∪ {{i, d}}) − w(Pµl ) ≥ w′ (Pµl ′ ) − w′ (Pµl ) > 0
where we used (5) and w(Pµl ) ≤ w′ (Pµl ) for the ﬁrst inequality and the assumption we seek to
contradict for the last. This contradicts that µ is a maximal weight matching of GπI . Hence,
w′ (Pµl ) ≥ w′ (Pµl ′ ).

Finally, we observe that Claim 4 gives
′

w (Pµ ) =

m
X

w

′

(Pµl )

≥

l=1

m
X

w′ (Pµl ′ ) = w′ (Pµ′ )

l=1

But this contradicts Claim 2. Hence, it cannot be that µ(i) = ∅ while µ′ (i) 6= ∅.

Lemma 3. Let I = (N, C, (%c ), (qc )) and I ′ = (N, C, (%c ), (qc′ )) be two instances so that qc ≤ qc′
for all c ∈ C. If i ∈ N is matched in some maximal weight matching of GπI , then i is matched
in any maximal weight matching of GπI′ .
Proof. Let µ and µ′ be maximal weight matchings of GπI and GπI′ , respectively. Assume that
µ(i) = c 6= ∅ and µ′ (i) = ∅. We derive a contradiction by constructing an augmenting path for
either µ in GπI or µ′ in GπI′ . We will use without further mention that GπI and GπI′ have the
same set of vertices and edges and the same weight function. Moreover, since qc ≤ qc′ for all c,
every matching of GπI is also a matching of GπI′ .
Let P be the set of all paths in GπI that alternate between edges in µ and µ′ and contain the
edge {i, µ(i)} ∈ µ − µ′ . Note that P is non-empty since {{i, µ(i)}} ∈ P. Let P = Pµ ∪ Pµ′ be
of maximal length among all paths in P.
Pµ and Pµ′ are matchings of GπI′ that do not match the same set of agents. Hence, by the
proof of Lemma 1(iv), w(Pµ ) 6= w(Pµ′ ). If w(Pµ ) > w(Pµ′ ), then P is an augmenting path for

14

Draft – February 9, 2021

µ′ in GπI′ . Since i is unmatched in µ′ and P has maximal length, µ′ − Pµ′ ∪ Pµ is a matching of
GπI′ . The weight of this matching is larger than that of µ′ , contradicting that µ′ has maximal
weight. Similarly, if w(Pµ ) < w(Pµ′ ), then |Pµ′ | ≥ |Pµ |, so that the initial vertex of P is i and
the terminal vertex is an agent j ∈ N that is unmatched in µ. Hence, µ − Pµ ∪ Pµ′ is a matching
of GπI , which has larger weight than µ, a contradiction.
We summarize the conclusions of Lemmas 1, 2, and 3 in the following theorem.
Theorem 1. Any allocation rule that chooses a maximal weight matching of GπI for every
instance I
(i) complies with acceptability requirements,
(ii) is of maximum size among feasible matchings,
(iii) respects priorities,
(iv) is strategyproof, and
(v) is monotonic in quotas.

6 Computational Aspects
In this section, we discuss the computational complexity of ﬁnding maximal weight matchings.
We show that a maximal weight matching of GπI can be computed in strongly polynomial-time.
Hence, an allocation rule that chooses maximal weight matchings can be implemented eﬃciently.
The polynomial-time guarantee follows from the fact that a maximum weight b-matching with
upper capacities on the nodes can be computed in strongly polynomial time even if edge weights
are rational (Schrijver, 2003, Theorem 32.5).
Reduction from b-matchings to matchings One can avoid having to compute a maximal
weight b-matching and use a standard algorithm for ﬁnding maximal weight matchings. We
can expand GπI by cloning each vertex c ∈ C exactly qc times. Cloning means replacing the
vertex by several vertices with the same neighbors and weights on the adjacent edges. In the
expanded graph, we have a vertex for each of the units reserved for a category rather than a
single vertex for each category. We can compute a maximal weight matching of the expanded
graph using the Hungarian Algorithm (see, e.g., Kuhn, 2010) for bipartite graphs, which runs in
polynomial-time. It is straightforward to see that a maximal weight matching of the expanded
graph corresponds in the obvious way to a maximal weight b-matching in the original reservation
graph.

15

Draft – February 9, 2021

1
qc1 =1

c1

1 + 2ǫ
2
1 + 2ǫ

3

c2
qc2 =1

1+ǫ

Figure 4: The modiﬁed reservation graph GI for the instance I in Example 1. The dotted lines
correspond to edges in E. The numbers close to the edges are their weights according
to w.
Avoiding high-precision weights Although maximal weight matchings of the reservation graph
can be computed in strongly polynomial-time, our approach requires using weights of high precision (the space requirement is still |C|n log n bits) because of the exponentially small weights
of the weight function wπ . To avoid these high-precision weights, we provide an alternative
polynomial-time algorithm that gives the same outcome. It iteratively computes maximum
weight b-matchings of at most n graphs. These graphs are the same as the reservation graph
GπI except that the weights wπ awarded based on the baseline ordering are omitted.
More precisely, for a given instance I, the corresponding modified reservation graph GI =
(N ∪ C, E, w, (qc )) has the same set of vertices and edges and the same quotas as the reservation
graph GπI . We weight of an edge {i, c} ∈ E is
w({i, c}) = 1 + wc ({i, c})
where wc is deﬁned as in Section 5. The modiﬁed reservation graph for the instance in Example 1
is depicted in Figure 4.
′

To state our algorithm, we also deﬁne a graph HIN that is parametrized by a subset of agents
N ′ . It is identical to GI except that for each i ∈ N ′ and each c with i ≻c ∅, wi (c) = 2n + 1.
The algorithm is speciﬁed in pseudo-code Algorithm 1. The main idea of the algorithm is to
work on the graph GI and iteratively go through the agents in the baseline ordering and build
the working set of selected agents N ∗ . The set of agents in N ∗ can all be matched in some
maximum weight matching of GI . For the new agent i under consideration, we check whether
i can be matched in a maximum weight matching of GI that also matches the agents currently
N ∗ ∪{i}

in N ∗ . This is checked by modifying the weights of GI to consider the graph HI
graph

N ∗ ∪{i}
HI

. The

is the same as graph GI except that a large weight of 2n is added to the edges

adjacent to agents in N ∗ ∪ {i}. This ensures that there is a maximum weight matching in GI
N ∗ ∪{i}

that matches the agents in N ∗ ∪ {i} if and only if the maximum weight matching of HI

16

Draft – February 9, 2021

N ∗ ∪{i}

has weight mw (HI

) = mw (GI ) + 2n(|N ∗ | + 1), where mw (G) is the weight of a maximum

weight matching in a graph G.
Algorithm 1
Input: I = (N, C, (%c ), (qc )); a baseline ordering π over agents in N
Output: A matching of GI .
1:

Construct the modiﬁed reservation graph GI .

2:

Compute the weight mw(GI ) of a maximum weight matching of GI .

3:

Selected set of agents N ∗ ← ∅

4:

for agent i ∈
/ N ∗ down the ordering π do
N ∗ ∪{i}

Consider graph HI

5:

that is identical to GI except that for all j ∈ N and c ∈ C,

w({j, c}) =


1 + 2n + wc ({j, c})
1 + w ({j, c})
c

N ∗ ∪{i}

if mw(HI

6:

if j 6∈ N ∗ ∪ {i}

) = mw(GI ) + 2n(|N ∗ | + 1) then

Add i to N ∗

7:

end if

8:
9:

if j ∈ N ∗ ∪ {i}

end for
∗

10:

Compute a maximum weight b-matching µ of HIN .

11:

return µ

Example 3 (Illustration of Algorithm 1). Suppose the baseline ordering is π = 123. In that
case the algorithm ﬁrst computes GI as shown in Figure 2. The maximum weight matching of
the graph is {{3, c1 }, {2, c2 }}. It is the unique maximum weight matching. Therefore, we are
unable to add agent 1 to N ∗ . We then check 2 and 3 which are able to be added to N ∗ .

7 Discussion
We presented an allocation rule that applies to resource allocation problems in which the resources are reserved for categories, each of which has a priority ranking over agents. The rule
has several properties that are desirable in applications. It is fair in the sense that it complies
with the acceptability requirements and respects the priorities, it is eﬃcient in that it yields
maximum size matchings, and it never incentivizes agents to under-report which categories they
are eligible for. Furthermore, weakly increasing quotas does not harm the agents who get a unit.
We

can

reframe

the

main

theorem

in

the

context

of

school

choice (Abdulkadiroğlu and Sönmez, 2003) by viewing agents as students and categories
as schools. The students are indiﬀerent between all schools that are acceptable for them. The
schools have priorities over the students. Then Theorem 1 reads as follows.

17

Draft – February 9, 2021

Theorem 2. Consider the school choice problem where the students partition the schools into
acceptable and unacceptable schools. Then, there is an allocation rule that only matches students to acceptable schools, has not justified envy, is non-wasteful, matches the maximal feasible
number of students, and is strategyproof for students.
Our allocation rule involves a baseline ordering π over the agents, which gives rise to a natural
ordering in which patients are allocated units. We can go down the ordering π and give a unit
to the agent that was matched by the allocation rule.
We assumed that the categories and their capacities are primitives of the model. A separate
research problem is to decide on the distribution of the units over the categories with the aim
to reduce the pandemic for the society. Finally, it will be useful to consider a more ﬁne-grained
model that allows quantifying how much a patient needs a unit.

Acknowledgements
This material is based on work supported by the Deutsche Forschungsgemeinschaft under grant
BR 5969/1-1. The authors thank Adi Ganguly for helpful comments.

References
A. Abdulkadiroğlu and T. Sönmez. School choice: A mechanism design approach. American
Economic Review, 93(3):729–747, 2003.
A. Abdulkadiroğlu and T. Sönmez. Ordinal eﬃciency and dominated sets of assignments.
Journal of Economic Theory, 112(1):157–172, 2003.
D. Abraham, A. Blum, and T. Sandholm. Clearing algorithms for barter exchange markets: Enabling nationwide kidney exchanges. In Proceedings of the 8th ACM Conference on Electronic
Commerce (ACM-EC), pages 295–304. ACM Press, 2007.
M. O. Afacan, I. Bó, and B. Turhan. Assignment maximization, 2020.
S. Ahmadi, F. Ahmed, J. P. Dickerson, M. Fuge, and S. Khuller. An algorithm for multi-attribute
diverse matching. In Proceedings of the Twenty-Ninth International Joint Conference on
Artificial Intelligence, IJCAI 2020, pages 3–9, 2020.
F. Ahmed, J. P. Dickerson, and M. Fuge. Diverse weighted bipartite b-matching. In Proceedings
of the 26th International Joint Conference on Artificial Intelligence, pages 35–41. AAAI Press,
2017.
T. Andersson and L. Ehlers. Assigning refugees to landlords in Sweden: Stable maximum
matchings. Technical Report 2016-08, Université de Montréal Papyrus Institutional Repository, 2016.

18

Draft – February 9, 2021

O. Aygün and I. Bó. College admission with multidimensional privileges: The Brazilian aﬃrmative action case. American Economic Journal: Microeconomics, 2020.
O. Aygün and B. Turhan. Dynamic reserves in matching markets: Theory and applications.
Journal of Economic Theory, 188, 2020.
H. Aziz. Mechanisms for house allocation with existing tenants under dichotomous preferences.
Journal of Mechanism and Institution Design, 2018.
H. Aziz, S. Gaspers, and Z. Sun. Mechanism design for school choice with soft diversity constraints. In Proceedings of the 29th International Joint Conference on Artificial Intelligence
(IJCAI), 2020.
P. Biró, T. Fleiner, R. W. Irving, and D. F. Manlove. The college admissions problem with
lower and common quotas. Theoretical Computer Science, 411(34):3136 – 3153, 2010.
P. Biró, D. F. Manlove, and S. Mittal. Size versus stability in the marriage problem. Theoretical
Computer Science, 411(16-18):1828–1841, 2010.
G. Bognar and I. Hirose. The Ethics of Health Care Rationing: An Introduction. Routledge,
2014.
A. Bogomolnaia and H. Moulin. Size versus fairness in the assignment problem. Games and
Economic Behavior, 90:119–127, 2015.
L. Bruce and R. Tallman. Promoting racial equity in covid-19 resource allocation. Journal of
Medical Ethics, 2021.
J. P. Dickerson, K. A. Sankararaman, A. Srinivasan, and P. Xu. Balancing relevance and diversity in online bipartite matching via submodularity. In Proceedings of the AAAI Conference
on Artificial Intelligence, volume 33, pages 1877–1884, 2019.
F. Echenique and M. B. Yenmez. How to control controlled school choice. American Economic
Review, 105(8):2679–94, August 2015.
L. Ehlers, I. E. Hafalir, M. B. Yenmez, and M. A. Yildirim. School choice with controlled choice
constraints: Hard bounds versus soft bounds. Journal of Economic Theory, 153:648—683,
2014.
E. J. Emanuel, G. Persad, R. Upshur, B. Thome, M. Parker, A. Glickman, C. Zhang, C. Boyle,
M. Smith, and J. P. Phillips. Fair allocation of scarce medical resources in the time of covid-19.
New England Journal of Medicine, 382(21):2049–2055, 2020.
S. Fink. The hardest questions doctors may face: Who will be saved? who won’t?, 2020.
D. Gale and L. S. Shapley. College admissions and the stability of marriage. The American
Mathematical Monthly, 69(1):9–15, 1962.

19

Draft – February 9, 2021

Y. A. Gonczarowski, N. Nisan, L. Kovalio, and A. Romm. Matching for the Israeli "Mechinot"
gap year: Handling rich diversity requirements. In Proceedings of the 20th ACM Conference
on Economics and Computation, pages 321–321, 2019.
M. Goto, A. Iwasaki, Y. Kawasaki, R. Kurata, Y. Yasuda, and M. Yokoo. Strategyproof
matching with regional minimum and maximum quotas. Artificial intelligence, 235:40–57,
2016.
A. Grigoryan. Eﬀective, fair and equitable pandemic rationing. Technical Report 3646539,
SSRN, Nov 2020.
E. J. Heo. Equity and diversity in college admissions. In J. Laslier, H. Moulin, R. Sanver, and
W. Zwicker, editors, The Future of Economic Design. Springer, 2019.
Y. Kamada and F. Kojima. Eﬃcient matching under distributional constraints: Theory and
applications. The American Economic Review, 105(1):67–99, 2015.
Y. Kamada and F. Kojima. Recent developments in matching with constraints. The American
Economic Review, 107(5):200–204, 2017.
F. Kojima. New directions of study in matching with constraints. In J.-F. Laslier, H. Moulin,
R. Sanver, and W. S. Zwicker, editors, The Future of Economic Design. Springer-Verlag,
2019. Forthcoming.
P. Krysta, D. F. Manlove, B. Rastegari, and J. Zhang. Size versus truthfulness in the house allocation problem. In Proceedings of the 15th ACM Conference on Economics and Computation
(ACM-EC), pages 453–470. ACM Press, 2014.
H. W. Kuhn. The Hungarian method for the assignment problem. In M. Jünger, T. M. Liebling,
D. Naddef, G. L. Nemhauser, W. R. Pulleyblank, G. Reinelt, G. Rinaldi, and L. A. Wolsey,
editors, 50 Years of Integer Programming 1958-2008 - From the Early Years to the State-ofthe-Art, pages 29–47. Springer, 2010.
R. Kurata, N. Hamada, A. Iwasaki, and M. Yokoo. Controlled school choice with soft bounds
and overlapping types. Journal of Artificial Intelligence Research, 58:153–184, 2017.
E. Martin. Rationing in healthcare. Technical Report 8, Deeble Institute, 2015.
NASEM-National Academies of Sciences, Engineering, and Medicine. Framework for Equitable
Allocation of COVID-19 Vaccine. Technical report, Washington, DC, 2020.
P. A. Pathak, T. Sönmez, M. U. Ünver, and M. B. Yenmez. Fair Allocation of Vaccines,
Ventilators and Antiviral Treatments: Leaving No Ethical Value Behind in Health Care
Rationing. Boston College Working Papers in Economics 1015, Boston College Department
of Economics, July 2020. URL https://ideas.repec.org/p/boc/bocoec/1015.html.

20

Draft – February 9, 2021

G. Persad, M. E. Peek, and E. J. Emanuel. Prioritizing groups for access to covid-19 vaccines.
JAMA, 324(16):1601–1602., 2020.
A. E. Roth. Deferred acceptance algorithms: history, theory, practice, and open questions.
International Journal of Game Theory, 36:537—569, 2008.
A. E. Roth and M. A. O. Sotomayor. Two-Sided Matching: A Study in Game Theoretic Modelling and Analysis. Cambridge University Press, 1990.
A. Schrijver. Combinatorial Optimization - Polyhedra and Efficiency. Springer, 2003.
T. Sönmez and M. B. Yenmez. Aﬃrmative action with overlapping reserves. Manuscript, 2020.
URL http://fmwww.bc.edu/EC-P/wp990.pdf.
T. Sönmez, P. A. Pathak., M. U. Ünver, G. Persad, R. D. Truog, and D. B. White. Categorized
priority systems: A new tool for fairly allocating scarce medical resources in the face of
profound social inequities. CHEST, 2020.
R. D. Truog, C. Mitchell, and G. Q. Daley. The toughest triage — allocating ventilators in a
pandemic. New England Journal of Medicine, 382(21):1973–1975, 2020.
WHO. A global framework to ensure equitable and fair allocation of COVID-19 products and
potential implications for COVID-19 vaccines. Technical report, 2020.

8 Appendix
Recall that all units are identical and the agents are indiﬀerent between receiving a unit through
any category. Hence, for the agents, the relevant characteristic of a matching is the set of
matched agents. We show that the maximal sets of agents (with respect to set inclusion)
matched in a matching that complies with the acceptability requirements, is non-wasteful,
and respects priorities, all have the same cardinality. By Lemma 1, there exists a maximal
beneﬁciary assignment satisfying these three axioms. Hence, every agent that is matched in
some matching satisfying the three axioms is matched in some matching that additionally is a
maximal beneﬁciary assignment.
Lemma 4. Let M be the set of all matchings for an instance I that comply with the acceptability requirements, are non-wasteful, and respect priorities. Then the maximal elements of
{µ−1 (C) : µ ∈ M} (with respect to set inclusion) have the same cardinality.
Proof. Let I be the collection of be maximal elements of {µ−1 (C) : µ ∈ M} and A and B in
I. Let µ and µ′ be matchings in M so that µ matches the agents in A (µ−1 (C) = A) and
µ′ matches the agents in B. It suﬃces to show that every maximal path (with respect to set
inclusion) that alternates between edges in µ and µ′ has even length.

21

Draft – February 9, 2021

Let i ∈ A − B. Among all paths that have i as initial vertex and alternate between edges in
µ and µ′ , let P be one that is maximal.
Suppose P has odd length, so that it is deﬁned by a sequence i = j0 , c1 , j1 , c2 , . . . , jn−1 , cn .
(Note

that

|(µ′ )−1 (cn )|

<

qcn

by

maximality

of

|P |.)

Let

S

=

{l

∈

{1, . . . , n} : there is j ∈ N with µ′ (j) = ∅ and j ≻cl jl−1 }.
If S 6= ∅, let l0 = max S and j ∈ N maximal with respect to %cl0 among all agents who
are unmatched in µ′ . Let µ′′ be the matching that results from alternating µ′ along the path
j, cl0 , . . . , jn−1 , cn . We claim that µ′′ ∈ M. We see that µ′′
(i) complies with the eligibility requirements since µ complies with the eligibility requirements
and j ≻cl0 jcl0 −1 ≻cl0 ∅.
(ii) respects priorities. For suppose k ∈ N is unmatched in µ′′ and k ≻c k′ for some k′ ∈ N
and c ∈ C. Then k is unmatched in µ′ and k 6= j. Hence, since µ′ respects priorities, we
only need to consider c = cl and k′ = jl−1 for some l ∈ {l0 +1, . . . , n} or c = cl0 and k′ = j.
By the choice of l0 and j, µ′′ (cl ) = jl−1 %cl k for all l ∈ {l0 + 1, . . . , n} and j %cl0 k.
(iii) is non-wasteful since µ′ is non-wasteful, µ′′ matches every agent that is matched in µ′ , and
µ′′ matches to every category at least as many agents as µ′ .
Hence, µ′′ ∈ M. The fact that µ′′ matches agents B ∪ {j} contradicts the maximality of B.
If S = ∅, alternating µ′ along P yields a matching in M that matches B ∪ {i}. The arguments
are the same as in the previous case.

22

