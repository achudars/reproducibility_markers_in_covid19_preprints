arXiv:1908.10934v2 [math.CO] 2 May 2020

DIVIDED SYMMETRIZATION AND QUASISYMMETRIC FUNCTIONS
PHILIPPE NADEAU AND VASU TEWARI
Abstract. Motivated by a question in Schubert calculus, we study the interplay of quasisymmetric polynomials with the divided symmetrization operator, which was introduced by Postnikov
in the context of volume polynomials of permutahedra. Divided symmetrization is a linear form
which acts on the space of polynomials in n indeterminates of degree n − 1. We first show that
divided symmetrization applied to a quasisymmetric polynomial in m indeterminates can be easily
determined. Several examples with a strong combinatorial flavor are given. Then, we prove that
the divided symmetrization of any polynomial can be naturally computed with respect to a direct
sum decomposition due to Aval-Bergeron-Bergeron, involving the ideal generated by positive degree
quasisymmetric polynomials in n indeterminates.

1. Introduction
In his seminal work [13], Postnikov introduced an operator called divided symmetrization that
plays a key role in computing volume polynomials of permutahedra. This operator takes a polynomial f (x1 , . . . , xn ) as input and outputs a symmetric polynomial f (x1 , . . . , xn ) n defined by
!
X
f (x1 , . . . , xn )
w· Q
f (x1 , . . . , xn ) n :=
,
1≤i≤n−1 (xi − xi+1 )
w∈Sn

where Sn denotes the symmetric group on n letters, naturally acting by permuting variables. When
f has degree n − 1, its divided symmetrization f n is a scalar. Given a = (a1 , . . . , an ) ∈ Rn , the
permutahedron Pa is the convex hull of all points of the form (aw(1) , . . . , aw(n) ) where w ranges over
all permutations in Sn . Postnikov [13, Section 3] shows that if a1 ≥ a2 ≥ · · · ≥ an , the volume of
1
Pa is given by (n−1)!
(a1 x1 + · · · + an xn )n−1 n . It is a polynomial in the ai ’s, and Postnikov goes
on to give a combinatorial interpretation of its coefficients.
While a great deal of research has been conducted into various aspects of permutahedra, especially
in regard to volumes and lattice point enumeration, divided symmetrization has received limited
attention. Amdeberhan [1] considered numerous curious instances of divided symmetrization for
various polynomials of all degrees. Petrov [12] studied a more general divided symmetrization
indexed by trees, which recovers Postnikov’s divided symmetrization in the case the tree is a path.
Amongst other results, Petrov provided a probabilistic interpretation involving sandpile-type model
for certain remarkable numbers called mixed Eulerian numbers.
Our own motivation for studying divided symmetrization stems from a problem in Schubert
calculus, which we sketch now. The flag variety F l(n) is a complex projective variety structure
on the set of complete flags, which are sequences F0 = {0} ⊂ F1 ⊂ F2 ⊂ · · · ⊂ Fn−1 ⊂ Fn = Cn
2010 Mathematics Subject Classification. Primary 05E05; Secondary 05A05, 05A10, 05E15.
Key words and phrases. divided symmetrization, quasisymmetric function, symmetric function.
The second author was supported by an AMS-Simons travel grant.
1

2

PHILIPPE NADEAU AND VASU TEWARI

of subspaces such that dim Fi = i. The Schubert varieties Xw ⊂ F l(n), indexed by permutations
in Sn , give rise to the basis of Schubert classes σw in the integral cohomology H ∗ (F l(n)). The
Peterson variety P etn is a subvariety of F l(n) of dimension n − 1, appearing as a special case of a
regular nilpotent Hessenberg variety. Our problem was to compute the number aw of points in its
intersection with a generic translate of a Schubert variety Xw , for w of length n − 1. Equivalently,
aw is the coefficient of the class [P etn ] ∈ H ∗ (F l(n)) on the class σw .
We show that aw is given by Sw (x1 , . . . , xn ) n where Sw is the celebrated Schubert polynomial attached to w. The results presented here are thus motivated by understanding the divided
symmetrization of Schubert polynomials.
In this article we set out to understand more about the structure of this operator acting on
polynomials of degree n − 1, since both Postnikov’s work and our own have this condition. Our
investigations led us to uncover a direct connection between divided symmetrization and quasisymmetric polynomials. We now detail these results.
The ring of quasisymmetric functions in the infinite alphabet x = {x1 , x2 , . . . } was introduced by
Gessel [9] and has since acquired great importance in algebraic combinatorics (all relevant definitions
are recalled in Section 2.2). A distinguished linear basis for this ring is given by the fundamental
quasisymmetric functions Fα where α is a composition. Given a positive integer n, consider a
quasisymmetric function f (x) of degree n − 1. We denote the quasisymmetric polynomial obtained
by setting xi = 0 for all i > m by f (x1 , . . . , xm ) and refer to the evaluation of f (x1 , . . . , xm ) at
x1 = · · · = xm = 1 by f (1m ). Our first main result states the following:
Theorem 1.1. For a quasisymmetric function f of degree n − 1, we have
Pn
X
f (x1 , . . . , xm ) n tm
j j
.
f (1 )t = m=1
(1 − t)n
j≥1

Natural candidates for f come from Stanley’s theory of P -partitions [16, 17]: To any naturally
labeled poset P on n − 1 elements, one can associate a quasisymmetric function KP (x) with
degree n − 1. Let L(P ) denote the set of linear extensions of P . Note that elements in L(P ) are
permutations in Sn−1 . Under this setup, we obtain the following corollary of Theorem 1.1.
Corollary 1.2. For m ≤ n, we have
KP (x1 , . . . , xm )

n

= |{π ∈ L(P ) | π has m − 1 descents}|.

We further establish connections with an ideal of polynomials investigated by [3, 2]. Let Jn
denote the ideal in Q[xn ] := Q[x1 , . . . , xn ] generated by homogeneous quasisymmetric polynomials
in x1 , . . . , xn of positive degree. Let Rn be the degree n − 1 homogeneous component of Q[xn ]
, and let Kn := Rn ∩ Jn . Aval-Bergeron-Bergeron [2] provide a distinguished basis for a certain
complementary space Kn† of Kn in Rn , described explicitly in Section 5.2. This leads to our second
main result.
Theorem 1.3. If f ∈ Rn is decomposed as f = g + h with g ∈ Kn† and h ∈ Kn , then
f

n

= g(1, . . . , 1).

We conclude our introduction with a brief outline of the article.
Outline of the article: Section 2 sets up the necessary notations and definitions. In Section 3
we gather several useful results concerning divided symmetrization that establish the groundwork

DIVIDED SYMMETRIZATION

3

for what follows. Corollary 3.5 and Lemma 3.7 are the key results of this section. In Section 4 we
focus on quasisymmetric polynomials, and Theorem 1.1 is proved in Section 4.2. In Section 4.3 we
apply our results to various fundamental-positive quasisymmetric functions that are ubiquitous in
algebraic combinatorics. In Section 5 deepens the connection with quasisymmetric polynomials by
way of Theorem 1.3, which gives a nice decomposition of divided symmetrization.
2. Background
We begin by recalling various standard combinatorial notions. Throughout, for a nonnegative
integer n, we set [n] := {i | 1 ≤ i ≤ n}. In particular, [0] = ∅. We refer the reader to [16, 17] for
any undefined terminology.
2.1. Compositions. Given a nonnegative integer k and a positive integer n, a weak composition
of k with n parts is a sequence (c1 , . . . , cn ) of nonnegative integers whose sum is k. We denote
(k)
the set of weak compositions of k with n parts by Wn . For the special case k = n − 1 which

′
(n−1)
(k)
will play a special role, we define Wn = Wn
. The size of a weak
. Clearly, |Wn | = n+k−1
k
composition c = (c1 , . . . , cn ) is the sum of its parts and is denoted by |c|. A strong composition is
a weak composition all of whose parts are positive. Given a weak composition c, we denote the
underlying strong composition obtained by omitting zero parts by c+ . Henceforth, by the term
composition, we always mean strong composition. Furthermore, we use boldface Roman alphabet
for weak compositions and the Greek alphabet for compositions. If the size of a composition α is
k, we denote this by α  k. We denote the number of parts of α by ℓ(α).
Given α = (α1 , . . . , αℓ(α) )  k for k a positive integer, we associate a subset Set(α) = {α1 , α1 +
α2 , . . . , α1 +· · ·+αℓ(α)−1 } ⊆ [k−1]. Clearly, this correspondence is a bijection between compositions
of k and subsets of [k − 1]. Given S ⊆ [k − 1], we define comp(S) to be the composition of k
associated to S under the preceding correspondence. The inclusion order on subsets allows us to
define the refinement order on compositions. More specifically, given α and β both compositions
of k, we say that β refines α, denoted by α 4 β, if Set(α) ⊆ Set(β). For instance, we have
α = (1, 3, 2, 2) 4 (1, 2, 1, 1, 1, 2) = β as Set(α) = {1, 4, 6} is a subset of Set(β) = {1, 3, 4, 5, 6}.
2.2. Polynomials. Given a positive integer n, define two operators Symn and Antin that respectively symmetrize and antisymmetrize functions of the variables x1 , . . . , xn :
X
f (xw(1) , . . . , xw(n) ),
Symn (f (x1 , . . . , xn )) =
w∈Sn

Antin (f (x1 , . . . , xn )) =

X

ǫ(w)f (xw(1) , . . . , xw(n) ).

w∈Sn

Here ǫ(w) denotes the sign of the permutation w. We denote the set of variables {x1 , . . . , xn } by
xn . Furthermore, set Q[xn ] := Q[x1 , . . . , xn ]. Given a nonnegative integer k, let Q(k) [xn ] denote
the degree k homogeneous component of Q[xn ]. Given a weak composition c = (c1 , . . . , cn ), let
Y c
xc :=
xi i .
1≤i≤n

4

PHILIPPE NADEAU AND VASU TEWARI
(k)

(k)

Via the correspondence c 7→ xc for c = (c1 , . . . , cn ) ∈ Wn , we see that Wn naturally indexes a
′
basis of the vector space Q(k) [xn ]. In particular Wn indexes the monomial basis of Rn . Recall from
the introduction that we refer toQQ(n−1) [xn ] as Rn .
Let ∆n = ∆(x1 , . . . , xn ) = 1≤i<j≤n (xi − xj ) denote the usual Vandermonde determinant.
Given f ∈ Q[xn ], we say that f is antisymmetric if w(f ) = ǫ(w)f for all w ∈ Sn . Recall that
if f is antisymmetric, then it is divisible by ∆n . We say that f is symmetric if w(f ) = f for all
w ∈ Sn . The space of symmetric polynomials in Q[xn ] is denoted by Λn , and we denote its degree
(d)
d homogeneous component by Λn . For the sake of brevity, we refer the reader to [17, Chapter 7]
and [10] for encyclopaedic exposition on symmetric polynomials, in particular on the relevance of
various bases of Λn to diverse areas in mathematics. Instead, we proceed to discuss the space of
quasisymmetric polynomials, which includes Λn and has come to occupy a central role in algebraic
combinatorics since its introduction by Gessel [9].
A polynomial f ∈ Q[xn ] is called quasisymmetric if the coefficients of xa and xb in f are
equal whenever a+ = b+ . We denote the space of quasisymmetric polynomials in x1 , . . . , xn by
(d)
(d)
QSymn and its degree d homogeneous component by QSymn . A basis for QSymn is given by
the monomial quasisymmetric polynomials Mα (x1 , . . . , xn ) indexed by compositions α  d. More
precisely, we set
X
(2.1)
Mα (x1 , . . . , xn ) =
xa .
(d)

a∈Wn
a+ =α

The reader may verify that f = x21 x2 + x21 x3 + x22 x3 + x1 x2 x3 is a quasisymmetric polynomial
in Q[x3 ], and it can be expressed as M(2,1) (x3 ) + M1,1,1 (x3 ). We note here that Mα (xn ) = 0 if
ℓ(α) > n.
Arguably the more important basis for QSymn consists of the fundamental quasisymmetric polynomials Fα (x1 , . . . , xn ) indexed by compositions α. We set
X
(2.2)
Fα (x1 , . . . , xn ) =
Mβ (x1 , . . . , xn ).
α4β

For instance F(1,2) (x3 ) = M(1,2) (x3 ) + M(1,1,1) (x3 ).

3. Divided symmetrization
We begin by establishing some basic results on divided symmetrization.
3.1. Basic properties.
Lemma 3.1 ([13]). Let f ∈ Q(k) [xn ] be a homogeneous polynomial.
(1) If k < n − 1, then f n = 0.
(2) If k ≥ n − 1, then f n ∈ Q(k−n+1) [xn ] is a symmetric polynomial.
Proof. We will proveQthe following more general result: Let S = {(i, j) | 1 ≤ i < j ≤ n}, and for
I ⊆ S define ∆I = (i,j)∈I (xi − xj ). Then we claim that Symn (f /∆I ) is 0 is k < |I| and is in
Q(k−|I|)[xn ] otherwise (the lemma is the special case I = {(i, i + 1) | i < n}).
First, factor the Vandermonde ∆n = ∆I ∆I c where I c := S \ I. Then
Symn (f /∆I ) = Symn (f ∆I c /∆n ) = Antin (f ∆I c )/∆n .

DIVIDED SYMMETRIZATION

5

The second identity follows from the fact that a permutation w acts on ∆n by the scalar ǫ(w). Now
Antin (f ∆I c ) is an antisymmetric polynomial, and is thus divisible by ∆n , therefore Symn (f /∆I )
is a symmetric polynomial. Since it has degree k − |I| as a rational function, the proof follows.

Since symmetric polynomials in Λn act as scalars for Symn , we obtain the following corollary.
Corollary 3.2. If f has a homogeneous symmetric factor of degree > deg(f )+1−n, then f

n

= 0.

Divided symmetrization behaves nicely with respect to reversing or negating the alphabet, as well
as adding a constant to each letter in our alphabet, as the next lemma states. We omit the
straightforward proof.
Lemma 3.3. Let f (x1 , . . . , xn ) ∈ Q[xn ] be homogeneous, and let g(x1 , . . . , xn ) := f (x1 , . . . , xn ) n .
Suppose c is an constant. We have the following equalities.
(1) f (xn , . . . , x1 ) n = (−1)n−1 g(x1 , . . . , xn ).
(2) f (−x1 , . . . , −xn ) n = (−1)deg(f )−n+1 g(x1 , . . . , xn ).
(3) f (x1 + c, . . . , xn + c) n = g(x1 + c, . . . , xn + c).
Our next lemma, whilst simple, is another useful computational aid. For a positive integer i
satisfying 1 ≤ i ≤ n − 1, let Cos(i, n − i) denote the set of permutations (in one-line notation)
such that σ1 < . . . < σi and σi+1 < . . . < σn . Equivalently, σ is either the identity or has a
unique descent in position i. Cos(i, n − i) is known to be the set of minimal length representatives
of the set of left cosets Sn /Si × Sn−i . For instance, if n = 4 and i = 2, then Cos(2, 2) equals
{1234, 1324, 1423, 2314, 2413, 3412}.
Lemma 3.4. Let f = (xi − xi+1 )g(x1 , . . . , xi )h(xi+1 , . . . , xn ) where g, h are homogeneous. Suppose
that g(x1 , . . . , xi ) i = p(x1 , . . . , xi ) and h(x1 , . . . , xn−i ) n−i = q(x1 , . . . , xn−i ). Then
X
p(xσ(1) , . . . , xσ(i) )q(xσ(i+1) , . . . , xσ(n) ).
f n=
σ∈Cos(i,n−i)

Proof. Under the given hypothesis, we have
Q

f (x1 , . . . , xn )
h(xi+1 , . . . , xn )
g(x1 , . . . , xi )
Q
=Q
1≤j≤n−1 (xj − xj+1 )
1≤k≤i−1 (xk − xk+1 )
i+1≤l≤n−1 (xl − xl+1 )

By considering representatives of left cosets Sn /Si × Sn−i we obtain


f

n






 g(x , . . . , x ) h(x , . . . , x ) 
 X


i+1
n 
1
i
τ  i−1
=
σ

n−1
Y


Y
τ
∈S
×S
σ∈Sn /Si ×Sn−i 

i
n−i
(xl − xl+1 ) 
(xk − xk+1 )
X

k=1

=

X

l=i+1

σ(p(x1 , . . . , xi )q(xi+1 , . . . , xn )).

σ∈Sn /Si ×Sn−i

The claim now follows.



6

PHILIPPE NADEAU AND VASU TEWARI

Lemma 3.4 simplifies considerably if deg(f ) = n − 1, and we employ the resulting statement
repeatedly throughout this article.
Corollary 3.5 ([12]). Let f ∈ Rn be such that
f = (xi − xi+1 )g(x1 , . . . , xi )h(xi+1 , . . . , xn ).
Then
f
In particular, f

n

n

 
n
g(x1 , . . . , xi )
=
i

i

h(x1 , . . . , xn−i )

n−i

.

= 0 if deg(g) 6= i − 1 (or equivalently deg(h) 6= n − i − 1).

Proof. We first deal with the case deg(g) 6= i − 1. If deg(g) < i − 1, then Lemma 3.1 implies that
g(x1 , . . . , xi ) i = 0. If deg(g) > i − 1, then deg(h) < n − i − 1 and thus h(x1 , . . . , xn−i ) n−i =
q(x1 , . . . , xn−i ) = 0, again by Lemma 3.1. It follows by Lemma 3.4 that f n = 0 if deg(g) 6= i − 1.
Now assume that deg(g) = i − 1. Then the polynomials p(x1 , . . . , xi ) and q(x1 , . . . , xn−i ) in the
statement of Lemma 3.4 are both constant polynomials by Lemma 3.1, thereby implying
X
f n=
p(xσ(1) , . . . , xσ(i) )q(xσ(i+1) , . . . , xσ(n) )
σ∈Cos(i,n−i)

(3.1)

 
n
g(x1 , . . . , xi )
=
i

h(x1 , . . . , xn−i )

i

n−i

,

where in arriving at the last equality we use the fact that |Cos(i, n − i)| =

n
i

Example 3.6. For 1 ≤ i ≤ n, let us show that
(3.2)

Y

If Xi :=

xj , then Xi

n−i

n

= (−1)

1≤j≤n
j6=i




.




n−1
.
i−1

We use induction on n. The claim is clearly true when n = 1, where the empty product is to be
interpreted as 1. Assume n ≥ 2 henceforth. By Corollary 3.5, for i = 1, . . . , n − 1, we have
Xi+1 − Xi

n

= (x1 . . . xi−1 )(xi − xi+1 )(xi+2 · · · xn )
 
n
x1 . . . xi−1 i x2 . . . xn−i n−i .
=
i

By the inductive hypothesis, we have x1 . . . xi−1
fore
(3.3)

Xi+1

n

− Xi

i

= 1 and x2 . . . xn−i
n−i−1

n

= (−1)

n

n−i

= (−1)n−i−1 . There-

 
n
.
i

By summation, this gives (3.2) up toP
a common additive
Pn constant.
The proof is then complete using ni=1 Xi n =
i=1 Xi n = 0, which follows from Corollary
P
3.2 because ni=1 Xi is symmetric in x1 , . . . , xn .

DIVIDED SYMMETRIZATION

7

′

3.2. Monomials of degree n − 1. If f = xc where c ∈ Wn , then [13, Proposition 3.5] gives us a
precise combinatorial description for f n . We reformulate this description, following Petrov [12]:
′
given c := (c1 , . . . , cn ) ∈ Wn , define the subset Sc ⊆ [n − 1] by
(3.4)

Sc := {k ∈ {1, . . . , n − 1} |

k
X

ci < k}.

i=1

P
Let psumk (c) := 1≤i≤k (ci − 1) for i = 0, . . . , n, so that by definition k ∈ [n − 1] belongs to Sc
if and only if psumk (c) < 0.
A graphical interpretation is helpful here: transform c into a path P (c) from (0, 0) to (n, −1) by
associating a step (1, ci −1) to each ci . For instance, Figure 1 depicts P (c) for c = (0, 3, 0, 0, 0, 1, 3, 0, ).
The successive y-coordinates of the integer points of P (c) are the values psumk (c), so that Sc consists of the abscissas of the points with negative y-coordinate. In our example, Sc = {1, 4, 5, 6} ⊆ [7].

Figure 1. P (c) when c = (0, 3, 0, 0, 0, 1, 3, 0) with Sc = {1, 4, 5, 6}.
For a subset S ⊆ [n − 1], let
(3.5)

βn (S) := |{w ∈ Sn | Des(w) = S}|,

where Des(w) := {1 ≤ i ≤ n − 1 | wi > wi+1 } is the set of descents of w. Whenever the n is
understood from context, we simply say β(S) instead of βn (S). Postnikov [13] shows that xc n for
′
c ∈ Wn equals β(Sc ) up to sign. His proof proceeds by computing constant terms in the Laurent
series expansion of the rational functions occurring in the definition of xc n . Petrov [12] gives a
more pleasing proof in a slightly more general context.
′

Lemma 3.7 (Postnikov). If c = (c1 , . . . , cn ) ∈ Wn , then
(3.6)

xc

n

= (−1)|Sc | β(Sc ).

We give a proof based on Petrov’s version in the appendix, which serves to illustrate the utility
of Corollary 3.5.
3.3. Catalan compositions and monomials. We now focus on xc
′
special subset of Wn . Consider CW n defined as
′

n

where c belongs to a

CW n = {c ∈ Wn | psumk (c) ≥ 0 for 1 ≤ k ≤ n − 1}.
P
P
Equivalently, c = (c1 , . . . , cn ) ∈ CW n if ki=1 ci ≥ k for all 1 ≤ k ≤ n − 1 and ni=1 ci = n − 1. The
paths P (c) for c ∈ CW n are those that remain weakly above the x-axis except that the ending point
has height −1. These are known as the (extended) Lukasiewicz paths. This description immediately
(3.7)

8

PHILIPPE NADEAU AND VASU TEWARI


implies that |CW n | = Catn−1 , the (n − 1)-th Catalan number equal to n1 2n−2
n−1 . In view of this, we
refer to elements of CW n as Catalan compositions. Observe that Sc = ∅ if and only if c ∈ CW n .
By Lemma 3.4, we have that xc n = 1 when c ∈ CW n , since the only permutation whose descent
set is empty is the identity permutation.
Definition 3.8. The monomials xc where c ∈ CW n are called Catalan monomials.
For example, the Catalan monomials of degree 3 obtained from elements of CW 4 are given by
{x31 , x21 x2 , x21 x3 , x1 x22 , x1 x2 x3 }.
Remark 3.9. We refer to the image of a Catalan monomial under the involution xi 7→ xn+1−i for
all 1 ≤ i ≤ n as an anti-Catalan monomial. These monomials are characterized by Sc = [n − 1].
By Lemma 3.4, the divided symmetrization of an anti-Catalan monomial yields (−1)n−1 .
The preceding discussion implies the following fact: If f (x1 , . . . , xn ) ∈ Rn is such that each
monomial appearing in f is a Catalan monomial, then f n = f (1n ). Here, f (1n ) refers to the
usual evaluation of f (x1 , . . . , xn ) at x1 = · · · = xn = 1. This statement is a very special case of a
more general result that we establish in Section 5.
4. Divided symmetrization of quasisymmetric polynomials
In this section we give a natural interpretation to the divided symmetrization of quasisymmetric
polynomials of degree n − 1.
4.1. Quasisymmetric monomials. We focus first on monomial quasisymmetric polynomials. Recall that for any positive integer m, xm refers the alphabet {x1 , . . . , xm }. Our first result shows in
particular that Mα (xm ) n depends solely on n, m and ℓ(α).
Proposition 4.1. Fix a positive integer n, and let α  n − 1. Then


m−ℓ(α) n − 1 − ℓ(α)
Mα (xm ) n = (−1)
(4.1)
m − ℓ(α)
for any m ∈ {ℓ(α), . . . , n − 1}, and

(4.2)

Mα (xn )

n

= 0.


Note that we could have a unified statement by defining ab to be 0 if b > a, as usual. However
it is useful to state the case m = n separately since it plays a special role in the proof, and will be
generalized in Lemma 5.3.
Proof. Our strategy is similar to that adopted in the proof of Lemma 3.7 given in Appendix A.
That is, we perform elementary transformations on the compositions α of a given length, so that
the value of Mα (xm ) n is preserved. Our transformations allow us to reach a ‘hook composition’
for which we can compute the quantity of interest.
We proceed by induction on ℓ := ℓ(α). If ℓ = 1, then we have to show that


n−1
n−1
m−1 n − 2
(4.3)
M(n−1) (xm ) n = x1 + · · · + xm n = (−1)
.
m−1

By Lemma 3.7, we know that xin−1 n = (−1)i−1 β([i − 1]) for 1 ≤ i ≤ n. Equation (4.3) now




n−1
a
= a+1
follows by induction using Pascal’s identity ab + b+1
b+1 and the values β([i − 1]) = i−1 .

DIVIDED SYMMETRIZATION

9

Assume ℓ ≥ 2 henceforth. Assume further that α = (α1 , . . . , αℓ ) is such that there exists a
k ∈ [ℓ − 1] with αk ≥ 2. Fix such a k. Define another composition α′ of size n − 1 and length ℓ by
(4.4)

α′ := (α1 , . . . , αk − 1, αk+1 + 1, . . . , αℓ ).

Let γ (resp. δ) be the composition obtained by restricted to the first k parts (resp. last ℓ − k parts)
of α′ (resp. α). We have
X
αk+1
· · · xαiℓℓ
xαi11 · · · xiαkk −1 (xik − xik+1 )xik+1
Mα (xm ) − Mα′ (xm ) =
1≤i1 <···<iℓ ≤m



ik+1 −1

=

X

1≤i1 <···<iℓ ≤m

=

m−1
X
r=1

(4.5)

=

m−1
X

xγi11 · · · xγikk 

X

X

r=ik



δ
1
· · · xiℓℓ−k
(xr − xr+1 ) xδik+1
δ

1
· · · xiℓℓ−k
xγi11 · · · xγikk (xr − xr+1 )xδik+1

1≤i1 <···<ik ≤r
r<ik+1 <···<iℓ ≤m

Mγ (x1 , . . . , xr )(xr − xr+1 )Mδ (xr+1 , . . . , xm ).

r=1

P
P
Set n1 := 1≤i≤k αi = |γ| + 1 and n2 := k<i≤ℓ α′k = |δ| + 1. Since Mγ (x1 , . . . , xr ) has degree
|γ| = n1 − 1, by Corollary 3.5 we obtain
 
n
(4.6)
Mγ (x1 , . . . , xn1 ) n1 Mδ (x1 , . . . , xm−n1 ) n2 .
Mα (xm ) − Mα′ (xm ) n =
n1
Now ℓ(γ) = k < ℓ, so by induction Mγ (x1 , . . . , xn1 ) n1 = 0 using (4.2). Therefore the expression
in (4.6) vanishes, and we conclude that Mα (x1 , . . . , xm ) n = Mβ (xm ) n , whenever α and α′ are
related via the transformation specified in (4.4). By performing a series of such transformations,
one can transform any composition α of length ℓ into the hook composition (1ℓ−1 , n − ℓ).
It follows that Mα (xm ) n depends only on ℓ, m, and n. To conclude, we distinguish the cases
m = n and m < n.
X
Mα (xn ).
Case I: If m = n, then for a fixed ℓ ≥ 2 consider Mℓ :=
αn−1, ℓ(α)=ℓ

Note that Mℓ ∈ Λn since it is the sum of all monomials xc where c is a weak composition of
n − 1 with ℓ nonzero integers. Thus Mℓ n = 0 by Corollary 3.2. It follows that Mα (xn ) n = 0
for any composition α with length ℓ, as desired.
Case II: If m < n, we compute the common value using the special composition α = (n − ℓ, 1ℓ−1 ).
By its definition, Mα (xm ) is the sum of all monomials of the form xin−ℓ xj1 · · · xjℓ−1 where 1 ≤ i ≤
m − ℓ + 1 and i < j1 < · · · < jℓ−1 ≤ m. We now want to apply Lemma 3.7 to each such monomial
xc , which requires to compute the sets Sc .
Now α was picked so that we have the simple equality Sc = [i − 1]. Indeed psumj (c) = −j < 0
for j = 1, . . . , i − 1 so that [i − 1] ⊆ Sc . For j = i, . . . , n − 1, we have psumj (c) ≥ 0: this is perhaps
most easily seen on the path P (c), since starting at abscissa i, only level and down steps occur,
with the last step being a down step to the point (n, −1). This last fact follows from m < n, which
is the reason why we needed to treat the case m = n separately in the proof.

10

PHILIPPE NADEAU AND VASU TEWARI
n−1
i−1 ,

We know that βn ([i − 1]) =
i, we obtain

Mα (xm )

and since there are

n

=

m−ℓ+1
X

(−1)i−1

i=1



m−i
ℓ−1

n−1
i−1

choices for {j1 , · · · , jℓ−1 } for a given




m−i
.
ℓ−1

To finish the proof, it remains to show the identity





m−ℓ+1
X
n−1 m−i
n−1−ℓ
(−1)i−1
= (−1)m−ℓ
(4.7)
.
i−1
ℓ−1
m−ℓ
i=1

This is done in Appendix B.



In the next subsection, we will see how Proposition 4.1 implies a pleasant result (Theorem 1.1)
for all quasisymmetric polynomials.
4.2. Divided symmetrization of quasisymmetric polynomials. In this subsection, we give
a natural interpretation of f (x1 , . . . , xm ) n for m ≤ n when f is a quasisymmetric polynomial in
x1 , . . . , xm with degree n − 1. To this end, we briefly discuss a generalization of Eulerian numbers
that is pertinent for us.
(n)
If φ(x) ∈ Q[x] satisfies deg(φ) < n, then (cf. [16, Chapter 4]) there exist hm (φ) ∈ Q such that
Pn−1 (n)
X
hm (φ)tm
j
(4.8)
.
φ(j)t = m=0
(1 − t)n
j≥1

(n)

By extracting coefficients, the hm (φ) are uniquely determined by the following formulas for j =
0, . . . , n − 1:

j 
X
n − 1 + i (n)
φ(j) =
(4.9)
hj−i (φ).
i
i=0

(n)
hi (φ)

Stanley calls the
the φ-eulerian numbers (cf. [16, Chapter 4.3]), and the numerator the
φ-eulerian polynomial. Indeed if φ(j) = j n−1 we get the classical Eulerian numbers An,i counting
permutations with i − 1 descents, and the Eulerian polynomial An (t).
Let QSym denote the ring of quasisymmetric functions. Let x denote the infinite set of variables
{x1 , x2 , . . . }. Elements of QSym may be regarded as bounded-degree formal power series f ∈ Q[[x]]
such that for any composition (α1 , . . . , αk ) the coefficient of xαi11 · · · xαikk equals that of xα1 1 · · · xαk k
whenever i1 < · · · < ik .
Equivalently, QSym is obtained by taking the inverse limit of the rings {QSymm } in finitely
many variables. Given f ∈ QSym, we thus have the natural restriction to QSymm :
f (x1 , . . . , xm ) := f (x1 , . . . , xm , 0, 0, . . .).
f (1m )

:= f (1, . . . , 1) by specializing the previous polynomial. The operations
Additionally, set
f 7→ f (x1 , . . . , xm ) and f 7→ f (1m ) are ring morphisms, which are denoted rm (f ) and ps1m (f )
respectively in [17, Section 7.8] in the context of symmetric functions.
Denote the degree n−1 homogeneous summand of QSym by QSym(n−1) , and let f ∈ QSym(n−1) .
Observe that f (1m ) is a polynomial in m of degree at most n − 1. By linearity is enough to check

DIVIDED SYMMETRIZATION

11

this on a basis of QSym(n−1) . We pick the quasisymmetric monomials Mα (x) (see (2.1)), so that
Mα (1m ) is the number of monomials in Mα (xm ), that is


m
m
Mα (1 ) =
(4.10)
,
ℓ(α)
evidently a polynomial in m of degree ℓ(α) ≤ n − 1.
Given f ∈ QSym(n−1) , let φf denote the polynomial of degree < n such that φf (m) = f (1m ) for
(n)
m ≥ 1. The φf -Eulerian numbers hm (φf ) are thus well defined for 1 ≤ m ≤ n − 1. Our first main
result is that these can be obtained by divided symmetrization:
Theorem 1.1. If f ∈ QSym(n−1) , then we have the identity
Pn
X
f (x1 , . . . , xm )
j j
(4.11)
f (1 )t = m=1
(1 − t)n

n

tm

.

j≥1

Equivalently, we have f (x1 , . . . , xm )

(n)

n

= hm (φf ) for 1 ≤ m ≤ n − 1, and f (x1 , . . . , xn )

n

= 0.

(n−1)
Proof. By linearity, it suffices
, and we pick the monomial
 toprove this for any basis of QSym
j
basis. We have Mα (1j ) =
by (4.10), so by summing we get
ℓ(α)
X j 
tℓ(α) (1 − t)n−ℓ(α)−1
tℓ(α)
=
tj =
(4.12)
ℓ(α)
(1 − t)n
(1 − t)ℓ(α)+1
j≥1

The coefficient of tm in the numerator is given by (−1)m−ℓ(α)

n−1−ℓ(α)
m−ℓ(α)

0 for m = n. These are precisely the values of Mα (x1 , . . . , xm )
thereby completing the proof.

n

for 1 ≤ m ≤ n − 1, and

computed in Proposition 4.1,


Remark 4.2. Using the identities (4.9), one obtains for j ≥ 1:
(4.13)

j

f (1 ) =


j 
X
n−1+i
i

i=1

f (x1 , . . . , xi ) n ,

which is easily inverted to give for m ≤ n:
(4.14)

f (x1 , . . . , xm )

n

=

m−1
X
i=0

 
n
(−1)
f (1m−i ).
i
i

Note that both sides only depend on the quasisymmetric polynomial f (x1 , . . . , xm ), and not the
whole quasisymmetric function. Since any quasisymmetric polynomial in Q[xm ] can be written
as such a restriction f (x1 , . . . , xm ), it follows that (4.14) gives a way to compute the divided
symmetrization of any quasisymmetric polynomial in Q[xm ].
We can apply Theorem 1.1 to some special families of symmetric and quasisymmetric functions.

12

PHILIPPE NADEAU AND VASU TEWARI

Example 4.3. Fix λ ⊢ n − 1 and set ℓ := ℓ(λ). Consider the power sum symmetric function pλ .
For j ≥ 0, we have that φpλ (j) = j ℓ and therefore:
X

φpλ (j)tj =

j≥0

Aℓ (t)
Aℓ (t)(1 − t)n−ℓ−1
=
(1 − t)ℓ+1
(1 − t)n

Theorem 1.1 implies that
min(ℓ(λ),m)

(4.15)

pλ (x1 , . . . , xm )

n

X

=

m−i

Aℓ(λ),i (−1)

i=1




n − 1 − ℓ(λ)
.
m−i

A natural question is to study the action of divided symmetrization on other classical bases of
symmetric functions. For monomial symmetric functions mλ , this is obtained immediately from
Proposition 4.1. The case of Schur functions sλ is treated in Example 4.6. As for elementary
symmetric functions eλ and the homogeneous symmetric functions hλ , we omit the computations
given the unwieldy expressions that one obtains. Instead, we discuss the case of the important basis
of QSym given by fundamental quasisymmetric functions Fα , in which case divided symmetrization
behaves as well as one could hope.
4.3. Expansions into fundamental quasisymmetric functions. The following pleasant fact
falls out of Theorem 1.1.
Proposition 4.4. For any γ  n − 1, and for m ≤ n, we have
(4.16)
Thus if f ∈ QSym(n−1)

Fγ (xm ) n = δm,ℓ(γ) .
X
expands as f =
cα Fα , then for any positive integer m < n
αn−1

f (xm )

(4.17)

n

=

X

cα .

αn−1
ℓ(α)=m

Proof. By expanding the definition (2.2), we have that Fγ (xj ) is the sum of all monomials xi1 . . . xin−1
with 1 ≤ i1 ≤ i2 ≤ · · · ≤ in−1 ≤ j and it < it+1 whenever t ∈ {γ1 , γ1 + γ2 , . . . , γ1 + · · · + γℓ(α)−1 }.

By counting these monomials we obtain Fγ (1j ) = j−ℓ(γ)+n−1
, and therefore
n−1
X
X j − ℓ(γ) + n − 1
tℓ(γ)
j j
.
Fγ (1 )t =
tj =
(1 − t)n
n−1
j≥0

j≥0

A comparison of this last expression with (4.11) implies the claim.



If a quasisymmetric function expands nonnegatively in terms of fundamental quasisymmetric
functions, we call it F -positive. To emphasize the significance of Proposition 4.4, we discuss some
examples of F -positive quasisymmetric functions arising naturally in the wild. Our examples fall
into two categories broadly, and we do not aim to be exhaustive.

DIVIDED SYMMETRIZATION

13

4.3.1. (P, ω)-partitions. Arguably the most natural context in which F -positive quasisymmetric
functions arise is that of (P, ω)-partitions. We describe the setup briefly, referring the reader to
[17, Section 7.19] for a more detailed exposition. Let (P, ≤P ) be a finite poset on n − 1 elements.
A labeling of P is a bijection ω : P → [n − 1]. Given a labeled poset (P, ω), a (P, ω)-partition is a
map γ : P → Z>0 with the following properties:
◦ If i ≤P j and ω(i) < ω(j), then γ(i) ≤ γ(j).
◦ If i ≤P j and ω(i) > ω(j), then γ(i) < γ(j).
Let A(P, ω) denote the set of all (P, ω)-partitions. Furthermore, define the Jordan-Hölder set
L(P, ω) to be the set of all permutations π ∈ Sn−1 such that the map w : P → [n − 1] defined by
w(ω −1 (πj )) = j is a linear extension of P . Consider the formal power series
X Y
(4.18)
KP,ω =
xγ(i) .
γ∈A(P,ω) i∈P

The central result in Stanley’s theory of (P, ω)-partitions is that
X
(4.19)
KP,ω =
Fcomp(π) ,
π∈L(P,ω)

where we abuse notation and denote the composition of n − 1 corresponding to the descent set of
π by comp(π).
Proposition 4.4 specializes to the following result.
Corollary 4.5. Fix a positive integer n. Let (P, ω) be a labeled poset on n − 1 elements. The
following equality holds for m ≤ n:
KP,ω (xm )

n

= |{π ∈ L(P, ω) | π has m − 1 descents }|.

Examples of quasisymmetric functions arising from (P, ω)-partitions, either implicitly or explicitly, abound in combinatorics. For instance, skew Schur functions [9], chromatic symmetric
functions [15] and their quasisymmetric refinement [14], the matroid quasisymmetric function of
Billera-Jia-Reiner [7] are all examples of F -positive quasisymmetric functions that can be understood in terms of (P, ω)-partitions.
Example 4.6. The Schur functions sλ are of the form KP,ω where P = Pλ is the poset given by
the Young diagram of λ, and ω labels rows of the diagram from bottom to top, and from left to
right in each row. Thus Corollary 4.5 gives us that when λ ⊢ n − 1, sλ (xm ) n is the number of
standard Young tableaux of shape λ with m − 1 descents.
Remark 4.7. Recall from the introduction that we were initially interested in the values aw given
by the divided symmetrization of Schubert polynomials Sw , where w ∈ Sn has length n − 1. When
w is a Grassmannian permutation of shape λ and descent m, one has Sw = sλ (xm ). The previous
example then shows that the intersection number aw is the number of standard Young tableaux of
shape λ with m − 1 descents.
4.3.2. Edge-labeled posets. We proceed to discuss another class of quasisymmetric functions arising
from posets, except now the edges in the Hasse diagram have labels rather than the vertices. An
edge-labeled poset P is a finite graded poset with unique maximal element 1̂ and unique minimal
element 0̂ whose cover relations are labeled by integers. Assume that the rank of P is n − 1. Let

14

PHILIPPE NADEAU AND VASU TEWARI

C(P ) be the set of maximal chains in P . Given ρ ∈ C(P ), the edge labels in ρ read from 0̂ to 1̂ give
the word w(ρ) corresponding to ρ. Define Des(ρ) to be the descent set of w(ρ) and comp(ρ) to be
the composition of n − 1 corresponding to Des(ρ).
Bergeron and Sottile [5] define a quasisymmetric function FP (x) by
X
(4.20)
FP =
Fcomp(ρ) .
ρ∈C(P )

The result analogous to Corollary 4.5 in the current context is the following.
Corollary 4.8. Fix a positive integer n. Let P be an edge-labeled poset of rank n−1. The following
equality holds for m ≤ n:
FP (xm )

n

= |{ρ ∈ C(P ) | w(ρ) has m − 1 descents }|.

The quasisymmetric functions FP can be considered a common generalization of Stanley symmetric functions, skew Schur functions, and skew Schubert functions by making the appropriate
choice of edge-labeled poset P : in this case one picks intervals in the weak Bruhat order, Young’s
lattice and Grassmannian Bruhat order respectively. Furthermore, in special cases, FP also equals
Ehrenborg’s flag quasisymmetric function [8]. The reader is referred to [6] for further motivation
to study FP .
We conclude this section by describing the case of the Stanley symmetric function. Recall that
a permutation v covers a permutation u in the (right) weak order on Sn if there exists a simple
transposition si such that usi = v and ℓ(v) = ℓ(u) + 1. Label this cover relation by i, and given
w ∈ Sn , consider the interval Pw = [e, w] in the weak order, where e denote the identity permutation
in Sn . The words read from the maximal chains of P are reduced words for w. The corresponding
FPw is the Stanley symmetric function Fw , which has degree ℓ(w). We thus get the following result:
Proposition 4.9. If w has length n − 1, then Fw (xm )
with m descents.

n

is the number of reduced words for w

5. Decomposition of the divided symmetrization operator.
We proceed to another perspective on divided symmetrization, one which relates it to the study
of super-covariant polynomials initiated by Aval-Bergeron [3] and Aval-Bergeron-Bergeron [2].
5.1. Divided symmetrization and the ideal Jn . Let In be the ideal in Q[xn ] generated by
symmetric polynomials with positive degree. It is an immediate consequence of Corollary 3.2 that
f n = 0 for any f in Rn ∩ In . It turns out that the result still holds when replacing symmetric
by quasisymmetric, which is the focus of this section.
Definition 5.1. We denote by Jn the ideal of Q[xn ] generated by homogeneous quasisymmetric
polynomials in x1 , . . . , xn with positive degree.
Obviously In ⊂ Jn . Let us define Kn := Rn ∩ Jn . Then we have the following result:
Proposition 5.2. If f ∈ Kn , then f
We first prove the following lemma.

n

= 0.

DIVIDED SYMMETRIZATION

15

Lemma 5.3. Fix a positive integer n ≥ 2. Let p be a nonnegative integer satisfying 1 ≤ p ≤ n − 1,
(n−1−p)
α  p and c ∈ Wn
. Then we have
Mα (xn )xc

n

= 0.

Note that the case p = n − 1 is exactly the case m = n of Proposition 4.1.
Proof of Lemma 5.3. Broadly speaking, our strategy is similar to that adopted in the proof of
Proposition 4.1. We proceed by induction on n. In the case n = 2, we have α = (1) and c = (0, 0).
Then M(1) (x2 ) 2 = 0 by Corollary 3.2 since M(1) (x2 ) = x1 + x2 is symmetric.
Let n ≥ 3 henceforth, and suppose α = (α1 , . . . , αℓ ). If ℓ = 1, then we have that Mα (xn )xc n =
0 by Corollary 3.2 since Mα (xn ) is symmetric in this case. So let us assume ℓ > 1. Assume further
that there exists a k ∈ [ℓ − 1] with αk ≥ 2. Fix such a k. Define β  n − 1 and length ℓ by
β := (α1 , . . . , αk − 1, αk+1 + 1, . . . , αℓ ).

(5.1)

Let γ (resp. δ) be the composition obtained by restricted to the first k parts (resp. last ℓ − k parts)
of β (resp. α), and write d = (c1 , . . . , cn ). By mimicking how we arrived at (4.5), we obtain
(5.2)

(Mα (xn ) − Mβ (xn ))xc =

n−1
X

Mγ (xr )

r=1

r
Y

xci i (xr − xr+1 )Mδ (xr+1 , . . . , xm )

n
Y

xci i .

i=r+1

i=1

This in turn implies
(5.3)

c

(Mα (xn ) − Mβ (xn ))x

n

=

n−1
X
r=1

n
r



Mγ (xr )

r
Y
i=1

xci i r

Mδ (xn−r )

n−r
Y

c

xi r+i

n−r

.

i=1

We claim that each Q
term on the right hand side of (5.3) vanishes. Fix an r satisfying 1 ≤ r ≤ n−1.
If deg(Mγ (x1 , . . . , xr ) ri=1 xci i ) 6= r−1, then Corollary 3.5 implies that our claim is true. So suppose
Q
Qn−r cr+i
that deg(Mγ (x1 , . . . , xr ) ri=1 xci i ) = r−1, which is equivalent to deg(Mδ (x1 , . . . , xn−r ) i=1
xi ) =
n − r − 1. Observe that the minimumQof {r, n − r} is at least 2.QBut then our inductive hypothesis
n−r cr+i
implies that at least one of Mγ (xr ) ri=1 xci i r or Mδ (xn−r ) i=1
xi
equals 0. Thus, we
n−r
have established that (Mα (xn ) − Mβ (xn ))xc n = 0 indeed. As in the proof of Proposition 4.1, we
conclude that Mα (xn )xc n depends only on n, c, and ℓ(α).
To conclude, note that the sum over all α  p with ℓ parts of Mα (xn )xc11 · · · xcnn is a polynomial of
degree n − 1 with a symmetric factor, and thus its divided symmetrization yields 0 by Corollary 3.2.
The claim follows.

Proof of Proposition 5.2. Let f ∈ Kn . Since the Mα (xn ) for |α| ≥ 1 are a linear basis of the space
of quasisymmetric polynomials in x1 , . . . , xn with no constant term, any element f ∈ Kn possesses
a decomposition of the form
X
(5.4)
bα,c xc Mα (xn ),
α,c
|α|+|c|=n−1

where |α| ≥ 1 and bα,c ∈ Q. By Lemma 5.3, each summand on the right hand side of (5.4) yields
0 upon divided symmetrization, and the claim follows.


16

PHILIPPE NADEAU AND VASU TEWARI

5.2. Divided symmetrization and super-covariant algebra. We want to go further and consider how divided symmetrization acts outside of Kn . It turns out that previous work of AvalBergeron-Bergeron [2, Theorem 4.1] is directly related to this endeavour.
Consider the set of weak compositions defined by
X
Bn = {(c1 , . . . , cn ) |
cj < i for all 1 ≤ i ≤ n}.
1≤j≤i

Let Ln = Vect (xc | c ∈ Bn ) be the linear span of the corresponding monomials.
Theorem 5.4 ([2]). We have the vector space decomposition Q[xn ] = Ln ⊕ Jn .
Both Jn and Ln are homogeneous, so by restriction to degree n−1 we have Rn = (Ln ∩Rn )⊕Kn .
Now we note that Ln ∩ Rn has a basis formed of all anti-Catalan monomials (see Section 3.3) and
thus has dimension Catn−1 . For instance if n = 3 it has basis {x(0,1,1) , x(0,0,2) } and dimension
2 = Cat2 .
We prefer working with Catalan monomials since their divided symmetrization is equal to 1.
The involution on Q[xn ] given by xi 7→ xn+1−i for 1 ≤ i ≤ n preserves the degree, and leaves the
ideal Jn globally invariant. Therefore it sends any homogeneous subspace complementary to Jn
to another such subspace. Let L′n be the image of Ln , so that Q[xn ] = L′n ⊕ Jn by Theorem 5.4.
Define Kn† := L′n ∩ Rn = Vect (xc | c ∈ CW n ). We get finally the vector space decomposition
Rn = Kn† ⊕ Kn .

(5.5)

We can now state the structural result that characterizes divided symmetrization with respect
to the direct sum (5.5).
Theorem 1.3. If f ∈ Rn is written f = g + h with g ∈ Kn† and h ∈ Kn according to (5.5), then
f

n

= g(1, . . . , 1).

In words, divided symmetrization on Rn can be obtained by first projecting to the first factor
in (5.5), and then compute the sum of coefficients of the resulting polynomial.
Proof. If f = g + h then f n = g n + f n = g n by Theorem 1.3 since we have h ∈ Kn . Now
by definition of Kn† all the monomials xc in g are Catalan, and thus satisfy xc n = 1. This implies
that g n = g(1, . . . , 1) as wanted.

Example 5.5. We know x1 x3

3

= −2 by Lemma 3.7. Alternatively, note that

x1 x3 = x1 (x1 + x2 + x3 ) − (x21 + x1 x2 ),
and that x1 x2 and x21 are both Catalan monomials. Therefore, we can use f = x1 (x1 + x2 + x3 )
and g = −(x21 + x1 x2 ) in Theorem 1.3 to conclude again that x1 x3 3 = −2.
As a further demonstration of Theorem 1.3, we revisit the divided symmetrization of fundamental
quasisymmetric polynomials again.

DIVIDED SYMMETRIZATION

17

5.3. Fundamental quasisymmetric polynomials revisited. Before stating the main result in
this subsection, we need two operations for compositions. Given compositions γ = (γ1 , . . . , γℓ(γ) )
and δ = (δ1 , . . . , δℓ(δ) ), we define their concatenation γ · δ and near-concatenation γ ⊙ δ to be
(γ1 , . . . , γℓ(γ) , δ1 , . . . , δℓ(δ) ) and (γ1 , . . . , γℓ(γ) + δ1 , δ2 , . . . , δℓ(δ) ) respectively. For instance, we have
(3, 2) · (1, 2) = (3, 2, 1, 2) and (3, 1) ⊙ (1, 1, 2) = (3, 2, 1, 2).
Given finite alphabets xn = {x1 , . . . , xn } and ym = {y1 , . . . , ym }, define the formal sum xn + ym
to be the alphabet {x1 , . . . , xn , y1 , . . . , ym } where the total order is given by x1 < · · · < xn < y1 <
· · · < ym . Following Malvenuto-Reutenauer [11], we have
X
Fα (xn + ym ) =
(5.6)
Fγ (xn )Fδ (ym ).
γ·δ=α or γ⊙δ=α

Example 5.6. Interpreting {x1 , x2 , x3 } as the sum of {x1 } and {x2 , x3 } and expanding F(2,3) (x1 , x2 , x3 )
using Equation (5.6) gives
F23 (x3 ) = F2 (x1 )F3 (x2 , x3 ) + F1 (x1 )F13 (x2 , x3 ) + F23 (x2 , x3 ).
In this expansion, we have suppressed commas and parentheses in writing our compositions, and
used the fact that Fα (y) = 0 for any alphabet y with cardinality strictly less than ℓ(α).
As explained in [11, Section 2], the equality in (5.6) relies on the coproduct in the Hopf algebra
of quasisymmetric functions. By utilizing the antipode on this Hopf algebra [11, Corollary 2.3], one
can evaluate quasisymmetric functions at formal differences of alphabets. See [4, Section 2.3] for a
succinct exposition on the same. The analogue of (5.6) is
X
Fα (xn − ym ) =
(5.7)
(−1)|δ| Fγ (xn )Fδt (ym ),
γ·δ=α or γ⊙δ=α

where δt := comp([|δ| − 1] \ Set(δ)). For instance, if δ = (3, 2, 1, 2)  8, then Set(δ) ⊆ [7] is given
by {3, 5, 6}. Thus we obtain δt = comp({1, 2, 4, 7}) = (1, 1, 2, 3, 1).
To end this section, we have the following result which precises Proposition 4.4:

Proposition 5.7. Let α  n − 1 and let m be a positive integer satisfying ℓ(α) < m ≤ n. Then
Fα (x1 , . . . , xm ) ∈ Jn .
Proof. From (5.7) it follows that
(5.8)

Fα (xm ) =

X

(−1)|δ| Fγ (xn )Fδt (xm+1 , . . . , xn )

γ·δ=α or γ⊙δ=α

Modulo Jn , the only term that survives on the right hand side of (5.8) corresponds to β = ∅. This
in turn forces γ = α. Thus we have that Fα (xm ) is equal to (−1)n−1 Fαt (xm+1 , . . . , xn ) modulo Jn .
Now suppose that m > ℓ(α). As ℓ(αt ) = n−ℓ(α) < n−m, we conclude that Fαt (xm+1 , . . . , xn ) =
0. It follows that Fα (xm ) ∈ Jn in this case, and Proposition 5.2 implies that Fα (xm ) n = 0. 
We get back the result of Proposition 4.4, namely
Fα (x1 , . . . , xm )

n

= δm,ℓ(α) .

for m ≤ ℓ(α). Indeed, Proposition 5.7 together with Proposition 5.2 implies that Fα (xm ) n = 0
for ℓ(α) < m. On the other hand, if ℓ(α) = m, then Fα (xm ) = xα1 1 · · · xαmm is a Catalan monomial,
and thus we have Fα (xm ) n = 1 in this case.

18

PHILIPPE NADEAU AND VASU TEWARI

Acknowledgements
The authors wish to thank all participants of the seminar on Hessenberg varieties organized by
Sara Billey and Alex Woo at the University of Washington in Winter and Spring 2018, from which
this work grew.
Appendix A. Proof of Lemma 3.7
′

We want to prove xc n = (−1)|Sc | β(Sc ) for any c ∈ Wn . Our proof proceed in two steps.
◦ First, via a sequence of moves, we transform any such cPinto a weak composition c′ =
′
(c′1 , . . . , c′n ) ∈ Wn with the properties that Sc = Sc′ and 1≤j≤i (c′i − 1) ∈ {0, −1} for all
′
1 ≤ i ≤ n. Furthermore, our moves ensure that xc n = xc n .
′
◦ Second, we compute xc n explicitly by exploiting a relation satisfied by the numbers
(−1)|S| β(S).
′
We now furnish details. Let c ∈ Wn , and assume that there exists an index i ∈ [n] such that
′
psumi (c) ∈
/ {0, −1}. Let k be the largest such index. Note that we must have k ≤ n − 1 as c ∈ Wn .
Consider the move sending c to a sequence d as follows:

(c1 , . . . , ck −1, ck+1 +1, . . . , cn ) if psumk (c) > 0,
(c1 , . . . , ck , ck+1 , . . . , cn ) 7→
(A.1)
(c1 , . . . , ck +1, ck+1 −1, . . . , cn ) if psumk (c) < −1.

In the case psumk (c) > 0, the sequence d is clearly a weak composition of size n − 1. If psumk (c) <
−1, then the maximality assumption on k along with the fact that psumn (c) = −1 implies that
ck+1 ≥ 1. Thus, the sequence d is a weak composition of n − 1 in this case as well. It is easy
to see that Sc = Sd . We show that xc n = xd n . Assume that psumk (c) > 0 and thus
d = (c1 , . . . , ck − 1, ck+1 + 1, . . . , cn ). We have
(A.2)

xc − xd

c

n

k+1
· · · xcnn
= xc11 · · · xkck −1 (xk − xk+1 )xk+1

n

.

By our hypothesis that psumk (c) > 0 , we know that deg(xc11 · · · xkck −1 ) ≥ k. Corollary 3.5 implies
that the right hand side of (A.2) equals 0, which in turn implies that xc n = xd n . The case
when psumk (c) < −1 is handled similarly, and we leave the details to the interested reader.
By applying the aforementioned moves repeatedly, one can transform c into c′ with the property
that psumi (c′ ) ∈ {0, −1} for all i ∈ [n]. We are additionally guaranteed that Sc = Sc′ and xc n =
′
xc n . Figure 2 shows the path corresponding to c′ where c = (0, 3, 0, 0, 0, 1, 3, 0) is the weak
composition from Figure 1. Explicitly, the moves in going from c to c′ are (0, 3, 0, 0, 0, 1, 3, 0) →
(0, 3, 0, 0, 0, 2, 2, 0) → (0, 3, 0, 0, 1, 1, 2, 0) → (0, 2, 1, 0, 1, 1, 2, 0).

Figure 2. The path corresponding to c = (0, 2, 1, 0, 1, 1, 2, 0) with Sc = {1, 4, 5, 6}.

DIVIDED SYMMETRIZATION

19
′

The upshot of the preceding discussion is that to compute xc n it suffices to consider c ∈ Wn
such that psumi (c) ∈ {0, −1} for all i ∈ [n]. The map c 7→ Sc restricted to these sequences is a
1–1 correspondence with subsets S ⊆ [n − 1]. We write S 7→ c(S) for the inverse map, and set
x(S) := xc(S) .
Our goal now is to prove that
(A.3)

x(S)

n

= (−1)|S| β(S)

To this end, we proceed by induction on n. When n = 1, we have S = ∅. In this case, we have
x(S) = 1, and both sides of the equality in (A.3) equal 1. Let n ≥ 2 henceforth. Assume further
that S 6= [n − 1], and let i ∈
/ S. Define Si = S ∩ [i] and S i = {j ∈ [n − i] | j + i ∈ S}. Then
Corollary 3.5 gives
(A.4)

x(S)

n

− x(S ∪ {i})

n

 
n
x(Si )
=
i

i

x(S i )

n−i

.

The numbers (−1)|S| β(S) also satisfy this identity, because:
 

n
βn (S) + βn (S ∪ {i}) =
βi (Si )βn−i S i .
i

(A.5)

This has a simple combinatorial proof: given a permutation corresponding to the left hand side, split
its 1-line notation after position i, and standardize both halves so that they become permutations
on [1, i] and [1, n − i] respectively.
To conclude, note that (A.4) determines all values x(S) n by induction in terms of the single
value x([n − 1]) n . Now x([n−1]) = x2 · · · xn and we have x2 · · · xn n = (−1)n−1 by Example 3.6.
Since β([n − 1]) = 1, we have x([n − 1]) n = (−1)|[n−1]| β([n − 1]), which completes the proof.

Appendix B. Proof of Identity (4.7)
We want to prove that for any positive integers ℓ, m, n there holds
m−ℓ+1
X

i−1

(−1)

i=1







n−1 m−i
m−ℓ n − 1 − ℓ
= (−1)
.
i−1
ℓ−1
m−ℓ

Let Pℓ,m be the expression on the left hand side. We prove that it equals the right hand side by
induction on ℓ + m. The base case is m = ℓ = 1, and P1,1 = 1 as wanted. Assume by induction
that the property is valid for all ℓ, m such that ℓ + m < k for a certain k ≥ 1, Let ℓ, m′ = m + 1 be

20

PHILIPPE NADEAU AND VASU TEWARI

such that ℓ + m + 1 = k. Then we have the following sequence of equalities:



m+1−ℓ
X
n−1 m−i
(−1)i
Pℓ,m+1 =
i
ℓ−1
i=0

 m−ℓ

 
 
 

X
n−1
m−i
m−i−1
m−i−1
m−ℓ+1
i n−1
= (−1)
(−1)
+
−
+
m+1−ℓ
i
ℓ−1
ℓ−1
ℓ−1
i=0




n−1
n−1
= (−1)m−ℓ+1
+ Pℓ,m + Pℓ−1,m − (−1)m−ℓ+1
m+1−ℓ
m+1−ℓ

 

n−1−ℓ
n−ℓ
m−ℓ+1
= (−1)
−
,
m+1−ℓ
m−ℓ

where we used the induction hypothesis in the last
equality.
n−1−ℓ 
m−ℓ+1
The final expression equals (−1)
m+1−ℓ by Pascal’s identity, thereby finishing the proof.
References

[1] Amdeberhan, T. Explicit computations with the divided symmetrization operator. Proc. Amer. Math. Soc.
144, 7 (2016), 2799–2810.
[2] Aval, J.-C., Bergeron, F., and Bergeron, N. Ideals of quasi-symmetric functions and super-covariant
polynomials for Sn . Adv. Math. 181, 2 (2004), 353–367.
[3] Aval, J.-C., and Bergeron, N. Catalan paths and quasi-symmetric functions. Proc. Amer. Math. Soc. 131, 4
(2003), 1053–1062.
[4] Aval, J. C., Féray, V., Novelli, J. C., and Thibon, J. Y. Quasi-symmetric functions as polynomial functions
on Young diagrams. J. Algebraic Combin. 41, 3 (2015), 669–706.
[5] Bergeron, N., and Sottile, F. Hopf algebras and edge-labeled posets. J. Algebra 216, 2 (1999), 641–651.
[6] Bergeron, N., and Sottile, F. Skew Schubert functions and the Pieri formula for flag manifolds. Trans.
Amer. Math. Soc. 354, 2 (2002), 651–673.
[7] Billera, L. J., Jia, N., and Reiner, V. A quasisymmetric function for matroids. European J. Combin. 30, 8
(2009), 1727–1757.
[8] Ehrenborg, R. On posets and Hopf algebras. Adv. Math. 119, 1 (1996), 1–25.
[9] Gessel, I. M. Multipartite P -partitions and inner products of skew Schur functions. In Combinatorics and
algebra (Boulder, Colo., 1983), vol. 34 of Contemp. Math. Amer. Math. Soc., Providence, RI, 1984, pp. 289–317.
[10] Macdonald, I. G. Symmetric functions and Hall polynomials, second ed. Oxford Mathematical Monographs.
The Clarendon Press, Oxford University Press, New York, 1995. With contributions by A. Zelevinsky, Oxford
Science Publications.
[11] Malvenuto, C., and Reutenauer, C. Duality between quasi-symmetric functions and the Solomon descent
algebra. J. Algebra 177, 3 (1995), 967–982.
[12] Petrov, F. Combinatorial and probabilistic formulae for divided symmetrization. Discrete Math. 341, 2 (2018),
336–340.
[13] Postnikov, A. Permutohedra, associahedra, and beyond. Int. Math. Res. Not. IMRN, 6 (2009), 1026–1106.
[14] Shareshian, J., and Wachs, M. L. Chromatic quasisymmetric functions. Adv. Math. 295 (2016), 497–551.
[15] Stanley, R. P. A symmetric function generalization of the chromatic polynomial of a graph. Adv. Math. 111,
1 (1995), 166–194.
[16] Stanley, R. P. Enumerative combinatorics. Vol. 1, vol. 49 of Cambridge Studies in Advanced Mathematics.
Cambridge University Press, Cambridge, 1997. With a foreword by Gian-Carlo Rota, Corrected reprint of the
1986 original.
[17] Stanley, R. P. Enumerative combinatorics. Vol. 2, vol. 62 of Cambridge Studies in Advanced Mathematics.
Cambridge University Press, Cambridge, 1999. With a foreword by Gian-Carlo Rota and appendix 1 by Sergey
Fomin.

DIVIDED SYMMETRIZATION

21

Univ Lyon, Université Claude Bernard Lyon 1, CNRS UMR 5208, Institut Camille Jordan, 43 blvd.
du 11 novembre 1918, F-69622 Villeurbanne cedex, France
E-mail address: nadeau@math.univ-lyon1.fr
Department of Mathematics, University of Pennsylvania, Philadelphia, PA 19104, USA
E-mail address: vvtewari@math.upenn.edu

