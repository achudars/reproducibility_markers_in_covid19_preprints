Noname manuscript No.
(will be inserted by the editor)

Robust Contracting in General Contract Spaces

arXiv:1910.12516v2 [math.OC] 17 Mar 2021

Julio Backhoff-Veraguas ·
Patrick Beissner · Ulrich Horst

March 18, 2021

Abstract We consider a general framework of optimal mechanism design under
adverse selection and ambiguity about the type distribution of agents. We prove the
existence of optimal mechanisms under minimal assumptions on the contract space
and prove that centralized contracting implemented via mechanisms is equivalent
to delegated contracting implemented via a contract menu under these assumptions. Our abstract existence results are applied to a series of applications that
include models of optimal risk sharing and of optimal portfolio delegation.
Keywords robust contracts · nonmetrizable contract spaces · ambiguity ·
financial markets

1 Introduction
We consider a model of optimal mechanism design under adverse selection under
minimal assumptions on the contract space. We allow the agent’s preferences to be
type-dependent (private information of the agent) and the principal to hold ambiguous beliefs about the distribution of these types. The principal’s preferences
for ambiguity are captured by the maxmin expected utility model of [23] or, more
Horst and Beissner gratefully acknowledge financial support by the CRC TRR 190 Rationality
and competition - the economic performance of individuals and firms
Julio Backhoff-Veraguas
University of Vienna, Faculty of Mathematics. Austria.
E-mail: julio.backhoff@univie.ac.at
Patrick Beissner
The Australian National University, Research School of Economics. Australia.
E-mail: patrick.beissner@anu.edu.au
Ulrich Horst
Humboldt-Universität zu Berlin, Department of Mathematics and School of Business and
Economics. Germany.
E-mail: horst@math.hu-berlin.de

2

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

generally, by variational preferences à la [26]. Our main result establishes the existence of optimal contracts under minimal assumptions on the contract space and
the set of beliefs. Importantly, we do not require the contract space to be metrizable. Nonmetrizable contract spaces arise naturally in principal-agent models when
the utility levels of the agent are the relevant contract variables. The contracting
problem over the original contracting space, and the one over the space of the
resulting utility levels, are equivalent under mild conditions on the agent’s utility
function. Quantifying the decision variable of the principal accounted in utility
units of the agent is a well-known approach; see [36], [34] and more recently [32].
In our case, the transformation has a different purpose. After the transformation,
the agent’s utility, as a function of type and contract, reduces to a bilinear form
on the contract/type space pair. This significantly simplifies the incentive compatibility constraint. Moreover, conditions on the continuity of the agent’s utility boil
down to the joint continuity of this bilinear form. As a result, a solvable model
of optimal contracts with large type (contract) space typically only allows for a
small contract (type) space. This dichotomy is well known for the commodity-price
duality in general equilibrium analysis. We show in a series of applications that
this seemingly mathematical generalization is of economic relevance. Our applications include models of optimal reinsurance and market optimized risk sharing,
and models of optimal portfolio delegation. The latter models combine adverse
selection and moral hazard effects.
Our abstract existence result extends [30]1 by dropping the assumption of a
metrizable contract space. The central idea of this line of reasoning is to consider
contract menus (i.e. closed subsets of contracts) rather than contract mechanisms
(i.e. functions). However, without a metric on the contract space, we must substitute the usual Hausdorff metric topology on the set of contract menus by the
Fell topology (the topology of closed convergence) under which the hyperspace of
all closed subsets is compact, as long as the contract space is compact.2 Working
with the space of closed subsets under the Fell topology, we can show continuity
of the utility functions defined on sets and hence the existence of an optimal contract menu. Subsequently, we prove that delegated contracting implemented via
contract menus is equivalent to centralized contracting implemented via contract
mechanisms. This equivalence is not an obvious result, because the usual measurable selection theorems on which the proof of the revelation principle is based, do
not apply in nonmetrizable spaces.
Our framework is flexible enough to allow the principal to hold uncertain beliefs
about the type of the agent. As such this paper also contributes to the growing literature on robust design of incentives. Following [17] this literature can be roughly
decomposed as follows. First, “robustness to technology or preferences” where a
principal does not exactly know the agent’s possible actions and/or the distribution over relevant output variables; see [15], [21], [22] for more details. Second,
“robustness to beliefs and strategic behavior”, where agents hold ambiguous beliefs
about each other. For instance, [16] considers a planner designing a mechanism for
trade who is unsure about the beliefs that other players have about each other,
and whose objective is worst-case expected welfare. [14], following up on [19] con1 In this study, a characterization of incentive compatibility is established in a Polish type
space combined with a compact metric contract space.
2 Appendix A provides a detailed account of all involved topological concepts.

Robust Contracting in General Contract Spaces

3

sider robustness to beliefs in common-value auctions where buyers observe noisy
information about the value of the good and the auctioneer is uncertain about
what the buyers know. Third, “robustness to distribution” where a principal has
only partial information about the distribution over agents’ preference types.3 For
instance, [11] and [2] consider buyer-seller models with private, respectively common values where the buyer (principal) is confronted with ambiguity about the
quality distribution of a good in question.
The present paper focuses on robustness to preference types with a special
emphasis on applications to settings in which types represent the agent’s belief
about the states of the world. The main goal of the paper is to identify minimal
assumptions on the contract space that still guarantee the existence of optimal
contracts and to understand the relation between contract and type space in such
settings. This level of generality clearly prevents closed form solutions for optimal
contracts; the impact of robustness on the specific structure of optimal contracts
is much better analyzed on a case-by-case basis and is well beyond the scope of
this paper.
The rest of the paper is organized as follows. Section 2 provides several examples that account for robustness and a contract space that cannot be captured by
existing results. Section 3 provides the results on the existence of an optimal contract. Section 4 provides a series of applications. Section 5 concludes by comparing
the results of the present work with those in the literature. Appendix A recalls a
series of abstract topological results; Appendix B presents the proofs.
2 Motivating Examples
In this section, we present three motivating examples that illustrate the way in
which nonmetrizable compact contract spaces over utility units arise naturally in
models of reinsurance and optimal risk sharing with non-compact metric contract
spaces. We analyze each example in greater detail in Section 4.
In what follows we denote by L0 (Q), L1 (Q), and L∞ (Q) the class of all almost surely finite, integrable, respectively essentially bounded random variables
defined on some probability space (Ω, F , Q). On L0 (Q) we consider the topology of convergence in Q-probability; the set Lp (Q), 1 ≤ p ≤ ∞, is equipped
with the usual Lp -norm k · kp . A set of random variables X is called uniformly
norm bounded if supx∈X kxk∞ < ∞. It is called bounded in Q-probability if
limRր∞ supx∈X Q(|x| ≥ R) = 0.
2.1 A reinsurance model with utilities on the positive half line
Let us consider a reinsurance model between an uninformed principal and an
informed agent. Risk exchange can occur over a set X of random variables defined
on a probability space (Ω, F , Q). The principal’s endowment is given by a random
variable ep ∈ L1 (Q). She may hedge her risk by exchanging payoffs x ∈ X with
the agent. Her utility from a risk transfer x is given by
EP ′ [v(ep − x)]
3 For completeness, other forms of robustness are related to collusion, renegotiation, and
robustness of standard mechanisms.

4

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

for some bounded, concave utility function v : R+ → R on the positive half line,
and some belief P ′ about the distribution of the states of the world. We assume
that the belief is equivalent to Q with bounded density.
The agent is endowed with a claim ea ∈ L1 (Q). His utility from a risk transfer
x ∈ X is given by
EP [u(ea + x)]
for some strictly increasing, concave, continuous utility function u : R+ → R on
the positive half line and some belief P that is also equivalent to Q with bounded
density. We refer to P as the agent’s type. Types are private knowledge to the
agent; the principal only knows the set of possible types Q. We identify Q with the
dP
. Incorporating the non-negativity constraint on both parties’
set of densities dQ
payoff, the set of admissible transfers (the contract space in payoff units) is given
by
X := {x ∈ X : −ea ≤ x ≤ ep } .
2.1.1 The contracting problem over contingent claims
The principal faces the problem of designing an optimal risk-sharing rule x : Q →
X that assigns a transfer to any agent type P ∈ Q and that maximizes her utility,
subject to the usual individual rationality and incentive compatibility constraint.
We assume that the principal’s utility from a risk-sharing mechanism x : Q → X
is given by a variational utility function (see [26]) of the form
Z

′
inf
EP [v (ep − xP )] dκ(P ) + α(κ)
(1)
κ∈K

Q

where K⊂ ∆(Q) is a set of probability measures on Q, and α : K → R is a convex
penalty function. Our choice of utility function allows the principal to be uncertain
about the distribution of the agent type. The principal’s optimization problem is
thus given by: find a mechanism x : Q → X that maximizes
Z

inf
EP ′ [v (ep −xP )] dκ(P ) + α(κ)
κ∈K

subject to

Q

P 7→ EP ′ [v (ep −xP )]

is measurable,

EP [u(xP +ea ) − u(ea )] ≥ 0,

P ∈Q

EP [u(xP +ea ) − u(xP̂ +ea )] ≥ 0,

P, P̂ ∈ Q,

(2)

where the last two constraints denote the individual rationality (i.e. participation)
and truth-telling (i.e. incentive compatibility) constraints, respectively. The first
of these guarantees that the mechanism is better than “offering nothing” and the
second one makes sure that the agent is better-off if he reports his true type rather
than lie. The set X is σ(L1 (Q), L∞ (Q))-compact.4 However, it is usually not norm
compact.5 At the same time, the agent’s utility function is continuous w.r.t. the
4

This follows from the Dunford-Pettis theorem, see [20, Theorem A.45].
For the lack of norm compactness, observe as an illustration that when −ea < ep are
both constants, Ω = [0, 1], and Q is Lebesgue measure on [0, 1], then X contains a sequence
of {−ea , ep }-valued functions that oscillate increasingly, thus having no accumulation point
w.r.t. Q-a.s. convergence and hence neither in L1 (Q)-norm. By the Riesz lemma, the unit
ball {x : kxk ≤ 1} in a normed vector space (X, k · k) is compact if and only if X is finite
dimensional.
5

Robust Contracting in General Contract Spaces

5

norm topology under mild technical conditions but usually fails to be continuous
w.r.t. the σ(L1 (Q), L∞ (Q))-topology (unless the agent is risk neutral).6
Remark 1 We emphasize that the choice of contract space X requires minimal assumptions and that the weak compactness requires no further restrictions on the
set of possible contracts. By contrast, by the Kolmogorov-Riesz compactness theorem norm compactness of the contract space would require the set of admissible
transfers to be uniformly equicontinuous on average.
2.1.2 The contracting problem over utility units
Without continuity assumptions on the agent’s utility function and compactness
conditions on the contract space, it is difficult to establish the existence of a
solution for the contracting problem over contingent claims. To overcome this
problem, we follow an approach that goes back at least to [36] and [34] and that
has more recently been used by [32] and many others, and consider instead the
following set
C := {u(ea + x) : x ∈ X}
of the agent’s utility levels as the new contract space. Since u is continuous and
concave, C is σ(L1 (Q), L∞ (Q))-compact. This leads to the following equivalent
problem over a compact contract space: find a mechanism c : Q → C that maximizes

Z
h 
i
−1
′
EP v ep + ea − u ( cP ) dκ(P ) + α(κ)
inf
κ∈K
Q
h 
i
is measurable,
subject to P 7→ EP ′ v ep + ea − u−1 ( cP )
(3)
EP [cP − u(ea )] ≥ 0,

P ∈Q

EP [cP − cP̂ ] ≥ 0,

P, P̂ ∈ Q.

Although the change of variables helps to overcome the continuity problem (at
the level of utility units, the agent’s utility functional is linear), a new problem
emerges: space L∞ (Q) is essentially never separable, and hence, set C cannot be
expected to be metrizable when equipped with the weak topology7. We show in
Section 4 how our general existence result from Section 3 can be used to overcome
this problem, and to establish the existence of an optimal risk-sharing rule under
the preceding assumptions on utility functions u and v if all the densities in Q are
uniformly L∞ (Q) bounded, that is, uniformly norm bounded.
Remark 2 If the initial endowments must belong to L2 (Q), then X and hence
C would be σ(L2 (Q), L2 (Q))-compact. For instance, this excludes any α-Pareto
distribution of wealth with α ≤ 2. Unlike the σ(L1 (Q), L∞ (Q))-topology the
σ(L2 (Q), L2 (Q))-topology is metrizable on bounded sets if L2 (Q) is separable.
6

Although (2) is a static problem, an extension to continuous time, as in [27], is possible.
The standard way to metrize the weak topology on C is
by considering a sequence (φn ) ⊂
P | R φ (f −g)dQ|
L∞ (Q) and defining e.g. C × C ∋ (f, g) 7→ d(f, g) := n 2nnkφ k
. However, unless (φn )
n ∞
is dense, this is a pseudo-metric which is not a metric (d(f, g) = 0 6⇒ f = g). If Q is not purely
atomic, then no dense sequence in L∞ (Q) exists.
7

6

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

This illustrates again the economic rational for working with non-metrizable contract spaces: Imposing minimal assumptions on the initial endowments naturally
leads to L1 (Q) - and hence nonmetrizable - contract spaces. The contract space is
metrizable only under additional restrictions on the agent’s initial endowments or
utility function.

2.2 A reinsurance model with utilities on the whole real line
Let us now consider a modification of the preceding reinsurance model. We assume
again that risk transfer occurs over a set of random variables X . The agent is
endowed with a bounded initial claim ea , his utility function u : R+ → R is still
defined on the positive half-line but the principal’s utility function v : R → R
is now defined on the whole real line, such as the exponential utility function.
Thus, in contrast to Subsection 2.1, the principal’s payoff is not subject to a nonnegativity constraint. In this case, we choose as our set of admissible transfers a
set
X ⊂ {x ∈ X : −ea ≤ x}
(4)
that is closed in L0 (Q), convex and bounded in Q-probability. For instance, if
X is convex we may consider all transfers that are bounded below by −ea and
bounded above by some positive random variable y ∈ L0 (Q). Unlike in the previous subsection, set X is not necessarily weakly compact. Nonetheless, we prove
in Subsection 4.1.2 that set C := {u(ea + x) : x ∈ X} of the agent’s utility
levels is again σ(L1 (Q), L∞ (Q))-compact under the above assumptions on X if
u satisfies a certain asymptotic elasticity condition. Moreover, we prove that the
contracting problem (3) has a solution if the agent’s maximal attainable utility
from reinsurance is finite and the type space Q is L∞ (Q)-norm compact.
Remark 3 If the principal’s utility function v is bounded as it was assumed in the
preceding subsection, then the type space only needs to be norm bounded. In the
present setup, we can no longer assume that v is bounded because it is now defined
on the whole real line.

2.3 A hedging problem with financial markets
We close this section with a financial market framework for the general setting
of Section 2.2. Specifically, we consider an incomplete continuous-time financial
market for which the asset price dynamics is described by a d-dimensional semimartingale (St ) defined on a filtered probability space (Ω, (Ft ), F , Q). We consider
a contracting problem between an investor (the principal) and a broker (the agent).
The broker’s assessment of the financial market dynamics is private knowledge.
We assume that the principal cannot (or does not want to) trade in the financial
market, either because she has no access to the market or because she finds it too
costly. Instead, she may hedge her risk by exchanging payoffs with the agent. The
agent is endowed with a bounded claim ea and accepts all transfers that he could
super-replicate at zero initial investment by trading in the financial market over the
time interval [0, T ]. Here, a contingent claim e ∈ L0 (Q) is called super-replicable
at zero initial investment if an admissible trading strategy π exists such that the

Robust Contracting in General Contract Spaces

7

RT
resulting gains from trading satisfy e ≤ (π·S)T := 0 πt dSt . An admissible trading
strategy is an (Ft ) adapted d-dimensional stochastic process (πs ) such that (π·S)T
is uniformly bounded from below. Let X be the set of super-replicable claims. We
prove in Subsection 4.1.3 that the resulting set X in (4) is indeed closed in L0 (Q),
convex and bounded in Q-probability.

3 An Abstract Adverse Selection Problem
Let (Θ, τ Θ ) and (C, τ C ) be topological spaces. We endow each of them with their
Borel sigma-algebras, denoted B(Θ) and B(C) respectively. Space C is the space
of contracts that the principal may offer the agent. Space Θ is the space of possible
types that the agent may have.

3.1 Menus
If the agent is of type θ ∈ Θ and contract c ∈ C is chosen, the agent’s utility is
denoted by U (θ, c) and the principal’s utility is denoted by V (θ, c). Let
K 6= ∅
be a set of regular Borel probability measures on Θ. Set K comprises the principal’s
beliefs about the agent’s type distribution.
Assumption 1 Throughout, we make the following standing assumptions:
(a) (C, τ C ) and (Θ, τ Θ ) are compact Hausdorff spaces.
(b) U : Θ × C → R is jointly continuous on Θ × C.
(c) V : Θ × C → R is jointly upper semicontinuous on Θ × C.
Remark 4 The standard situation we focus on is one in which C and Θ are subsets
of Banach spaces E and E ′ that form a dual pair hE, E ′ i, where τ C is the weak
topology on C and τ Θ is a norm topology on Θ, and where U (θ, c) is a continuous
function of the duality product hc, θi. Since the dual of a Banach space is large
if the space itself is small and vice versa, the duality of E and E ′ implies that a
solvable adverse-selection model with large type (contract) space typically requires
a small contract (type) space. In Section 4 we consider the case E = L1 (Q) and
E ′ = L∞ (Q) and consider a weakly compact subset C ⊂ E as our contract space.
As illustrated in the previous section this choice of contract space is natural when
making the agent’s utility the principal’s decision variables.
The family of all τ C -closed subsets of C (excluding ∅) is denoted by CL(C).
Definition 1 A menu is a non-empty closed subset of contracts. In other words,
menus are the elements of CL(C).
A menu D ∈ CL(C) is automatically compact. Whenever C is not metrizable,
we cannot introduce the familiar Hausdorff distance on CL(C). Instead, we equip
CL(C) with the Fell topology τF . We recall the Fell topology and the related

8

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

concept of Kuratowski-Painlevé convergence8 in Appendix A. The main benefit of
working with the Fell topology is that the family of closed subsets of C is compact
as shown by the following lemma. The result is well-known; we give a proof in
Appendix B for the reader’s convenience.
Lemma 1 Space (CL(C), τF ) is compact Hausdorff.
The use of the Fell topology is convenient if the contract space is non-metrizable,
for instance if C is a weakly compact subset of some L1 -space. Indeed, we prove
that the agent’s indirect utility function when presented a menu D ∈ CL(C) is
continuous and that the corresponding argmax correspondence is upper semicontinuous. From this we conclude that the principal’s utility function as a function
of types and menus is upper semicontinuous. Since the set of menus is compact
in the Fell topology, this implies that an optimal menu exists. From this, we can
then conclude the existence of an optimal contract mechanism.
3.2 Agent
Let us consider the agent’s utility over menus. Given a menu D ∈ CL(C), an
agent of type θ derives as utility the maximum U ∗ (θ, D) he can attain out of the
contracts in the menu:
U ∗ : Θ × CL(C) → R,

U ∗ (θ, D) := sup U (θ, d).
d∈D

∗

Proposition 1 U is continuous on (Θ × CL(C), τ

Θ

× τF ).

For the agent let Φ be the optimal contracts, depending on types and menu:
Φ : Θ × CL(C) ։ C,

Φ(θ, D) := arg max U (θ, d).

(5)

d∈D

Set Φ(θ, D) contains all contracts within menu D, which are optimal for the agent
of type θ.
Proposition 2 Φ is a jointly upper hemicontinuous correspondence with compact
non-empty values.
To formulate the individual rationality constraint, we assume that the agent
agrees with a proposed menu only if he is left better off than if he had just retained
his given (type-dependent) reservation utility u, that is, if
U ∗ (θ, D) ≥ u(θ),

for all θ ∈ Θ.

(6)

Equation (6) imposes a constraint on the menu D, by requiring for each agent type
the existence of a contract in D which is better than a given outside option for
an agent of that type. We assume that function u : Θ → R is common knowledge
and the following standing assumption holds:9
8 Limits in this sense are where the sets accumulate. Note that we have to work with nets
instead of sequences unless the contract set is metrizable.
9 The assumption states that at least one individually rational contract exists. For instance,
one formally expects that the action “c∗ =do nothing” (often c∗ = 0 is a concrete model)
belongs to C and u(θ) := U (θ, c∗ ) holds for all θ ∈ Θ.

Robust Contracting in General Contract Spaces

9

Assumption 2 There exists c∗ ∈ C such that U (θ, c∗ ) ≥ u(θ), for all θ ∈ Θ.
To describe the set of individually rational menus, let T : Θ ։ CL(C) be the
correspondence defined by

T (θ) := D ∈ CL(C) : U ∗ (θ, D) ≥ u(θ)
= U ∗ (θ, ·)−1 [u(θ), ∞),

which is closed-valued (by Proposition 1) and hence compact-valued. By Assumption 2, c∗ ∈ C exists such that {c∗ } ∈ T (θ) for all θ ∈ Θ. As a result, we might
define, with a slight abuse of notation,
\
T :=
T (θ) ⊂ CL(C),
(7)
θ∈Θ

which is compact and non-empty. We call T the set of individually rational menus.

3.3 Principal
Given an agent’s type θ ∈ Θ and a menu D, the principal will only consider those
contracts in D that are optimal w.r.t. her utility for this given type. This defines
a type-dependent utility for the principal, namely:
V ∗ : Θ × CL(C) → R,

V ∗ (θ, D) :=

sup

V (θ, d).

d∈Φ(θ,D)

The counterpart to Proposition 1 is the following:
Proposition 3 V ∗ is upper semicontinuous on (Θ × CL(C), τ Θ × τF ).
To specify the principal’s utility, we recall that the (non-empty) set K consists
of regular Borel probability measures on the type space and thus it collects the
principal’s possible priors over the type of the agent. We fix a penalty function
α:K→R
and define the principal’s utility of a menu D in variational form as follows:
Z

∗
V (θ, D)dκ(θ) + α(κ) .
inf
κ∈K

(8)

θ∈Θ

We stress that these integrals are well-defined if we assume that the type space is
compact, as we have assumed so far, or if merely the principal’s utility function is
bounded. The principal’s optimization problem over menus reads:
Z

sup inf
V ∗ (θ, D) dκ(θ) + α(κ)
(9)
D∈T κ∈K

θ∈Θ

The following result states a general existence of optimal contracts.
Theorem 3 Under the standing Assumptions 1 and 2, an optimal solution D∗ ∈
T to problem (9) exists.

10

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

We now present two extensions of the preceding theorem. The first deals with
non-compact type spaces but assumes that the principal’s utility is bounded.
Proposition 4 Let V be uniformly bounded. Further suppose that Assumption 2
holds, as well as Assumptions 1 where the compactness of the type space (Θ, τ Θ )
is dropped. Then, an optimal solution D∗ ∈ T to the problem (9) exists.
The second extension applies to a situation in which the principal evaluates
her performance according to a worst-case approach. In this case, the existence of
an optimal menu can be shown under considerably weaker conditions. The proof
is a straightforward modification of the proof of Theorem 3.
Proposition 5 Assume that Assumption 2 and the following conditions hold:
(a’) (C, τ C ) is a compact Hausdorff space.
(b’) U : Θ × C → R is continuous on C for any fixed type θ.
(c’) V : Θ × C → R is upper semicontinuous on C for any fixed type θ.
Then, an optimal solution D∗ ∈ T to the problem of maximizing over T the functional D 7→ inf θ∈Θ V ∗ (θ, D) exists.
3.4 On optimal contract mechanisms
A contract mechanism is a mapping ϕ : Θ → C from the type space into the
contract space. A contract mechanism is individually rational if
U (θ, ϕ(θ)) ≥ u(θ),

for all θ ∈ Θ.

(10)

and incentive compatible if
U (θ, ϕ(θ)) ≥ U (θ, ϕ(θ′ )),

for all θ, θ′ ∈ Θ.

(11)

We denote by M the set of all contract mechanisms that are individually rational and incentive compatible. In defining a principal-agent problem over optimal
mechanisms, rather than over contract menus, the first difficulty is that the integral
Z
V (θ, ϕ(θ))dκ(θ),
Θ

is not defined unless θ 7→ V (θ, ϕ(θ)) is measurable. Thus, we introduce set
M̂ := {ϕ ∈ M : V (·, ϕ(·)) is measurable}
and define the principal-agent problem over contract mechanisms as follows:
Z

V (θ, ϕ(θ))dκ(θ) + α(κ) .
(12)
sup inf
ϕ∈M̂

κ∈K

Θ

Theorem 4 Under the assumptions of either Theorem 3 or Proposition 4, an
optimal solution ϕ∗ ∈ M̂ for problem (12) exists.
The proof of Theorem 4 relies on Theorem 3/Proposition 4. In fact, this proof
reveals that delegated contracting implemented via contract menus is equivalent to
centralized contracting implemented via contract mechanisms. That is, the principal achieves the same optimal utility level by either proposing a suitable contract
to each type of agent, or by proposing a suitable set of contracts (a menu) and
letting the agent decide for himself.

Robust Contracting in General Contract Spaces

11

4 Applications
In this section, we consider several examples for which we can establish the existence of an optimal contract by using the results of Section 3. We are mostly
interested in the case in which the type space Θ is a subset of L∞ (Q) and the
contract space C in utility units is a σ(L1 (Q), L∞ (Q))-compact subset of L1 (Q).
The agent’s utility function then depends on the duality product
h·, ·i : L1 (Q) × L∞ (Q) → R.

(13)

The duality product is sequentially continuous when L∞ (Q) is equipped with the
σ(L∞ (Q), L1 (Q))-topology (see [1, Theorem 9.37]) but may fail to be continuous
in general. Therefore, to guarantee continuity of the duality product we need to
consider the norm topology on L∞ (Q) and assume that Θ is subset of L∞ (Q).
First, we revisit the motivating examples presented in Section 2. Subsequently,
we consider two examples in which the agent can trade in a financial market after
transacting with the principal.

4.1 The motivating examples revisited
4.1.1 The reinsurance model of Section 2.1
Since the agent’s utility function is strictly increasing, the contracting problems (2)
and (3) are equivalent. We apply our abstract existence results to the contracting
problem over utility levels. In the notation of Section 3, τ C is the σ(L1 (Q), L∞ (Q))topology on the contract space
C = {u(ea + x) : x ∈ [−ea , ep ]}
of utility levels, τ Θ is the L∞ (Q) norm-topology on the type space Θ = Q, whereas
U (P, c) = EP [c]

and

V (P ′ , c) = EP ′ [v(ep + ea − u−1 (c))].

The utility function U is jointly continuous for our choice of topologies. To establish
the upper semicontinuity of the utility function V , we recall the following result;
see Proposition 2.10 in [8].
Lemma 2 Let L be a normed vector space and let f : L → R be concave. Then,
norm upper-semicontinuity of f is equivalent to the weak upper-semicontinuity of
f.
Since u−1 is convex by definition, −u−1 (·) is concave, and hence V is concave
because v is concave. Since V is also L1 (Q)-norm upper semicontinuous by Fatou’s
lemma, it follows that V is (jointly) weakly upper semicontinuous. Moreover, if
Q ⊂ L∞ (Q) is norm-bounded then V is uniformly bounded because v is bounded.
Thus, if an individually rational contract exists, then the existence of a solution
to the contracting problem follows from Theorem 4. By reverting the change of
variables from X to C, we obtain an optimal mechanism for problem (2).

12

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

4.1.2 The reinsurance model of Section 2.2
This section analyzes the model of Section 2.2 in a broader context. Our analysis is
inspired by [25, Section 2]. We assume that the agent’s utility function u : R+ → R
satisfies the following conditions.
Assumption 5 The utility function u : R+ → R is lower bounded, strictly increasing, strictly concave, continuously differentiable, satisfies the Inada condition
and the following asymptotic elasticity (AE) condition:
lim sup
z→∞

zu′ (z)
< 1.
u(z)

The (AE) condition was first introduced by [24] to show that optimal solutions
exist for a wide class of utility maximization problems. For our purposes, this yields
suitable compactness of the set of utility levels. In economic terms, it is a condition
on the ratio of the marginal utility u′ (z) and the average utility u(z)/z for z large.
We refer to [33, Definition 3.1] and thereafter, for an exhaustive discussion on this
condition and its interpretation.
Example 1 The CRRA class uγ (z) =

zγ
γ

for γ ∈ (0, 1) satisfies Assumption 5.

To handle utilities v on the whole real line, let X ⊂ L0 (Q) be the contract
space in payoff units that satisfies the following condition:
Assumption 6 Set X is convex and closed in L0 (Q). Further, for any λ ∈ R the
following set is bounded in Q-probability:
{x ∈ X : x ≥ λ}.
We assume that the agent is endowed with a bounded random variable ea ∈
L∞ (Q) and introduce the set of feasible risk transfers
X (ea) := {x ∈ L0 (Q) : 0 ≤ x ≤ ea + x̄ for some x̄ ∈ X }

(14)

= (ea + X − L0+ (Q)) ∩ L0+ (Q).
This set represents the set of risk transfers that are feasible to the agent. It follows
from Assumption 6 and the Komlos lemma that X (ea ) is convex, solid,10 and
closed in L0 (Q). Next, we introduce the polar set of X (ea ), namely,
X (ea )0 := {x0 ∈ L0+ (Q) : EQ [xx0 ] ≤ 1 for all x ∈ X (ea )}
along with the convex conjugate u∗ of u:
u∗ (y) := sup{u(z) − zy}.
z∈R

Lemma 3 Under Assumptions 5 and 6, assume that some y > 0 and a random
variable x0 ∈ X (ea )0 exist such that
EQ [u∗ (x0 y)] < ∞.

(15)

Then, the contract space in utility units C := u(X (ea)) = {u(x) : x ∈ X (ea )} is
contained in L1 (Q) and is σ(L1 (Q), L∞ (Q))-compact.
10

This means that if x ∈ X (ea ) and y ≤ x, then y ∈ X (ea ).

Robust Contracting in General Contract Spaces

13

The following lemma gives a sufficient condition that guarantees condition (15).
It essentially states that the agent’s maximal attainable utility from risk transfer
is finite. The proofs of Lemmas 3 and 4 are presented in Appendix B.
Lemma 4 Let kea k be considered as a constant function on Ω. If
sup

EQ [u(x)] < ∞,

(16)

x∈X (kea k)

where X (keak) defined in (14), then condition (15) holds.
With Lemma 3 and 4 at hand, we can now use the same arguments as in the
preceding subsection along with Theorem 4 to establish the following result. It
shows that the contracting problem introduced in Section 2.2 has a solution if the
agent’s utility from risk sharing is finite.
Theorem 7 Under Assumptions 5 and 6, if (16) holds and if Q ⊂ L∞ (Q) is norm
compact,11 then the contracting problem of finding a mechanism x : Q → X (ea )
that maximizes
Z

inf
EP ′ [v (ep − ea + xP ))] dκ(P ) + α(κ)
κ∈K

subject to

Q

P 7→ EP ′ [v (ep − ea + xP ))] ,

is measurable

EP [u(xP ) − u(ea )] ≥ 0,

P ∈Q

EP [u(xP ) − u(xP̂ )] ≥ 0,

P, P̂ ∈ Q,

(17)

has a solution as soon as an individually rational contract exists (this is the case
if, for instance, 0 ∈ X ).
Owing to Section 3, the principal achieves in fact the same optimal utility
level by either proposing a suitable contract to each type of agent (as in (17)),
or by proposing a suitable set of contracts (a menu) and letting agents decide for
themselves. The same applies to the next application.
4.1.3 The hedging problem of Section 2.3
The analysis of the hedging problem is related to the analysis in [18]. A trading
strategy π is called
R Tadmissible, if the gain from trade, modelled as a stochastic
integral (π.S)T = 0 πt dSt , is well–defined and lower bounded. We put
X0 := {x : x ≤ (π.S)T , π is admissible}.

For the considered financial market, we require a form of no-arbitrage:
Assumption 8 A probability measure Q′ ≈ Q exists such that the process t 7→
(π.S)t is a Q′ -local martingale for every admissible strategy π. Moreover,
umax := sup EQ [u(x + ea )] < ∞.
x∈X0
11

Special cases of norm-compact subsets of L∞ (Q) can be constructed using Arzela and
Ascoli’s theorem when Ω is a topological space.

14

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

The key observation, made in [25, Lemma 1] for the case without random
endowments, but easily obtainable in our setting as well, is the following:
Lemma 5 Assumptions 5 and 8 imply σ(L1 (Q), L∞ (Q))-compactness of C =
{u(x) : x ∈ (X0 + ea ) ∩ L0+ (Q)}.
Again, in the notation of Section 3, τ C is the σ(L1 (Q), L∞ (Q))-topology on C
of utility levels, τ Θ is the L∞ (Q) norm-topology on set Θ = Q, and
U (P, c) = EP [c]

and

V (P ′ , c) = EP ′ [v(e + ea − u−1 (c))].

The agent’s utility U is jointly continuous and the principal’s utility V is upper
semicontinuous. As a result, the hedging problem introduced in Section 2.3 has a
solution if the set of densities in Q is L∞ (Q)-norm-compact. This result is formally
covered by Theorem 7, but not quite, since hypothesis umax < ∞ is weaker than
(16).
4.2 Optimized risk sharing under incomplete markets
In the previous examples, the agent had to decide whether to accept (or reject) a
contract based on his portfolio after the risk transfer. In this section we consider
two examples in which he decides to accept (or reject) a contract based on the
“indirect utility” that arises after investing in a financial market about which
he has private information. Specifically, we consider a continuous time financial
market model with one risk-free and one risky asset. The price of the risk-free asset
is normalized to one. The discounted price of the risky asset follows a geometric
Brownian motion with drift:
dSt
= dWt + f ′ (Wt )dt,
St

S0 = s,

0≤t≤T

where W is a one-dimensional standard Brownian motion defined on the Wiener
space (Ω, F , (Ft )0≤t≤T , Q) and f ∈ F where F is a class of real-valued twice continuously differentiable, uniformly bounded, uniformly equicontinuous functions
f : R → R with common compact support that satisfy the normalization constraint f (0) = 012 . The closure F̄ of F w.r.t. the topology of uniform convergence
is a compact subset of the set of continuous functions on R w.r.t. the supremum
norm by the theorem of Arzela and Ascoli. By Girsanov’s theorem, for any f ∈ F̄
there exists a unique equivalent martingale measure Pf whose density is given by
dPf
= ef (WT ) .
dQ
We assume that the pricing kernel is private knowledge to the agent and choose
as our type set the function space
Θ := F̄
equipped with the topology of uniform convergence. In particular, the financial
market is complete from the agent’s point of view. The agent is endowed with
12 We think of f ′ as being a constant outside a large compact set. In this case, the price
dynamics essentially reduces to geometric Brownian motion.

Robust Contracting in General Contract Spaces

15

a bounded claim ea ∈ L∞ (Q). His preferences over payoffs are defined by an
expected utility functional of the form EQ [u(·)] for some Bernoulli utility function
u : R → R that we choose to be the exponential (Subsection 4.2.1), respectively
the logarithmic (Subsection 4.2.2) one. The principal is endowed with a bounded
claim ep ∈ L∞ (Q); her preferences over payoffs are defined by an expected utility
functional of the form EQ [v(·)] for some concave Bernoulli utility function v :
R → R. An admissible trading strategy for Rthe agent is an adapted real-valued
T
stochastic process vector ξ that satisfies EQ [ 0 ξt2 dt] < ∞.
4.2.1 Risk-sharing with hedging
Let us first consider a risk-sharing problem in which the agent can hedge his risk
by trading in the financial market after transacting with the principal. We assume
that
u(y) = 1 − e−αy
with CARA parameter α > 0.
The agent as an expert has better information about the financial market and
has a single pricing measure Pf . Given his initial endowment ea ∈ L∞ (Q), the
budget set of agent f ∈ F̄ is given by
n
o
B(f ) := x ∈ L1 (Q) : Ef [x − ea ] ≤ 0
(18)
where Ef denotes the expectation under the pricing measure Pf . We notice that
Ef [ea ] is finite because Pf has a bounded density w.r.t. Q. The following result
can be inferred from [20, Chapter 3, Example 3.37]. It yields the optimal claim
and the optimal utility from trading for any agent type.
Lemma 6 The optimal attainable payoff over all admissible trading strategies for
an agent of type f in the budget set (18) is


dPf
1
1
∗
x = − ln
+ Ef [ea ] + H(Pf |Q),
α
dQ
α
and the optimal utility from trading in the market is
EQ [u(x∗ )] = 1 − e−αEf [ea ]−H(Pf |Q) .
h
i
dP
Here, H(Pf |Q) := Ef [ln( dQf )] = EQ ef (WT ) f (WT ) < ∞ denotes the relative
entropy of Pf with respect to the Wiener measure Q.
dP

The density dQf corresponds to the private state price density of agent f . Thus,
Lemma 6 clarifies how the optimal payoff depends on the distance between Pf and
Q.
Let X ⊂ L1 (Q) be a closed set of uniformly integrable financial positions x :
Ω → R. By the Dunford-Pettis theorem, this is equivalent to X being σ(L1 (Q), L∞ (Q))compact. We take X , equipped with the σ(L1 (Q), L∞ (Q)) topology as the contract
space:
C = X.

16

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

When offered a payoff x ∈ X the agent’s income before trading is ea + x. It follows
from the above lemma that his optimal optimal utility after trading in the financial
market, that is, his indirect utility function is given by
U (f, x) = 1 − e−αEf [ea +x]−H(Pf |Q) .
Since all functions f ∈ F̄ are uniformly bounded it follows from the dominated
convergence theorem that the mapping f 7→ H(Pf |Q) is continuous. As a result,
the mapping
(f, x) 7→ U (f, x)
on Θ × X is jointly continuous. A direct computation shows that a mechanism
f 7→ xf is incentive compatible if and only if
Ef [xf − xf ′ ] ≥ 0,

for all f, f ′ ∈ F̄.

We assume that at least one individually rational incentive compatible mechanism
exists. The principal’s utility from transacting with agent f is
V (xf ) = EQ [v(eP − xf )].
Since v is concave, V is upper semicontinuous, and thus, it follows from Theorem
4 that the principal’s optimization problem to find a mechanism x : F̄ → C that
maximizes
Z

inf

κ∈K

V (xf ) dκ(f ) + α(κ)

F̄

subject to the usual incentive compatibility, individual rationality, and measurability condition, has a solution. Furthermore, owing to Section 3, the principal
achieves in fact the same optimal utility level by either proposing a suitable contract to each type of agent (where indirect utilities are specified), or by proposing
a suitable set of contracts (a menu) and letting agents decide for themselves according to their indirect utilities. The same applies to the next application.
4.2.2 A model of optimal portfolio delegation
In the previous applications, the principal’s utility function was independent of the
agent type f ∈ F̄. In this section, we consider a simple model of optimal portfolio
delegation in which the principal’s utility function depends on the agent type. We
now assume that the agent’s Bernoulli utility function is
u(y) = ln(y).
We retain the assumption that the drift of the stock price process is private information to the agent. The budget set of an agent of type f is the same as in (18).
The following result can again be inferred from [20, Chapter 3, Example 3.43]:
Lemma 7 The optimal attainable payoff over all admissible trading strategies for
an agent of type f in the budget set (18) is
x∗ = Ef [ea ]

dQ
,
dPf

and the optimal utility from trading in the market is
EQ [u(x∗ )] = ln Ef [ea ] + H(Q|Pf ) = ln Ef [ea ] − EQ [f (WT )].

Robust Contracting in General Contract Spaces

17

The principal, considered an investor, outsources her portfolio selection to a
manager (the agent) who has private information about the financial market dynamics and whose investment decisions in the above-specified financial market
cannot be monitored. Following [28] and [3], we restrict the class of admissible
contracts to be of an affine linear form: the principal can offer the agent some
state dependent payoff x plus a β-fraction of the gains or losses from trading. In
particular, the agent is liable for possible losses. Formally, a contract consists of
some F -measurable random variable x, that we again assume to belong to some
σ(L1 (Q), L∞ (Q))-compact set X and some number β ∈ [0, 1], the proportion of
wealth the agent can keep. The contract space
C = X × [0, 1],
is equipped with the product topology. When offered a contract (x, β) ∈ C, the
agent’s income from an admissible trading strategy ξ is
ea + x + β

Z

T

ξt dSt .
0

By Lemma 7, since asset prices are martingales under measure Pf the agent’s
optimal utility after trading in the market can be described by the continuous
indirect utility function
U (f, x) = ln Ef [ea + x] + H(Q|Pf ).
InR particular, the agent’s optimal utility is independent of the performance
part ξdS of his contract13. Hence, and as in Subsection 4.2.1, a mechanism
f 7→ ϕ(f ) = (xf , βf ) is incentive compatible if and only if Ef [xf − xf ′ ] ≥ 0 for all
f, f ′ ∈ F̄.
Although the agent’s optimal utility is independent of the performance part
of his contract, the optimal trading strategy ξ ∗ and thus the income w∗ to the
principal depend onR f . Since the optimal claim for the agent can be decomposed
T
as x∗ = x + ea + β 0 ξt∗ dSt the optimal gains from trading are given by
Z

T
0

ξt∗ dSt =

1
β



dQ
Ef [ea + x]
− x − ea
dPf

and hence, the principal’s income from outsourcing the portfolio selection is given
by


dQ
1−β
∗
Ef [ea + x]
− (ea + x) .
w =
β
dPf
Hence, unlike in the previous section, the principal’s utility function now depends
on the type of the agent with whom she interacts. Her utility when interacting
with an agent of type f and offering a contract (x, β) ∈ C is given by


 
dQ
1−β
Ef [ea + x]
V (f, (x, β)) = EQ v ep − x +
− (ea + x)
.
β
dPf
13

This has previously been observed in [28] and [3].

18

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

This function is jointly upper semicontinuous. We can now use the same arguments
as in Subsection 4.2.1 to conclude that the principal’s optimization problem of
finding a mechanism (x, β) : F̄ → C that maximizes
inf

κ∈K

Z

V (f, (xf , βf )) dκ(f ) + α(κ)
F̄



subject to the incentive compatibility, individual rationality, and measurability
condition, has a solution (if a feasible mechanism exists) by Theorem 4.

5 Concluding Remarks
We considered a very general setting for a mechanism design problem in the presence of adverse selection. Under mild hypotheses we proved that optimal contracts
exist and that centralized contracting implemented via contract mechanisms is
equivalent to delegated contracting implemented via contract menus. The guiding
principle of our work was to use the utility levels of the agent as the relevant contract variables. When doing so, the agent’s utility function is given by a bilinear
form. This does not only significantly simplify the incentive compatibility condition but also yields a natural duality between the type and the contract type.
Simultaneously, it naturally results in a framework in which the relevant topological spaces for the contracting problem may lack metrizability (and possibly
separability too), as we illustrated with various examples. It would be interesting
to derive further insights into the structure of optimal contracts and to quantify
the impact of robustness or ambiguity on optimal contracts as in [2] or [35]. In
view of the many facets ambiguity adds to optimal contracting problems, a formal
analysis of the characteristics of equilibrium contracts in our general environment
does not seem appropriate. Conditions for pooling or separating equilibrium are
relevant for many applications but these questions are best analyzed in a less
general framework or even on a case-by-case basis.
We conclude this paper with a couple of technical comments. Our study was
greatly influenced by the works [30, 31], and in particular, by Page’s idea of considering contract menus rather than mechanisms. However, the lack of metrizability
precludes us from applying the results therein, because it rules out the use of
measurable selection results. For instance, in [30], the contract space is given by
sequentially compact subsets of L∞ . Under an additional separability assumption
that would not be needed in our setting, the contract space is metrizable. Compared with [30], we reverse the role of the contract and type space: in all our
examples, the contract spaces are subsets of L1 , which is very natural when the
agent is an expected utility maximizer, whereas the type spaces are subsets of
L∞ . The choice of norm-bounded, respectively compact, type spaces in L∞ is an
immediate consequence of the fact that the agent’s utility function is given by a
bilinear form after the transformation of variables.
To the best of our knowledge, the existence of mechanisms does not follow
from existing Komlos-type results used or established in other studies, such as
[29, 6, 5, 4]. Our setting does not seem to fulfill the hypotheses needed for such
arguments. Under various topological assumptions on the contract space, it has
been shown that if the principal knows the distribution µ of the agent types and

Robust Contracting in General Contract Spaces

19

if the set of incentive compatible mechanisms is convex,14 then a sequence {ϕk }
of strongly measurable incentive compatible mechanisms admits an almost surely
Cesaro convergent subsequence, that is, a subsequence {nk } exists such that
nk
1 X
ϕi (θ) → ϕ∗ (θ)
nk

µ-a.s. as k → ∞.

i=1

Our setting does not seem to fulfill the hypotheses needed for such arguments. More
strikingly, our framework allows to consider very general sets of beliefs about the
type distribution. By contrast, Komlos-type arguments always need a reference
distribution w.r.t. which the principal’s beliefs are absolutely continuous. Such a
reference distribution does not exist if the principal evaluates her performance according to a worst-case approach w.r.t. the agent’s type. A further advantage of
the approach used here is that we show that suitably-measurable contract mechanisms, and contract menus, are largely equivalent even though we cannot use
measurable selection arguments. In other words, we do not require mechanisms
to be measurable functions; only the principal’s utility from implementing these
mechanisms needs to be measurable.

A Abstract Results
A.1 The Fell Topology
We denote by C a compact Hausdorff topological space and recall that CL(C) stands for the
family of all non-empty closed subsets of C.
Definition 2 The Fell topology on CL(C), which we denote τF , is the topology generated by
the subbase consisting of all sets of the form
V − := {A ∈ CL(C) : A ∩ V 6= ∅},
and
W + := {A ∈ CL(C) : A ⊂ W },
where V and W are non-empty open subsets of C.
The definition of Fell topology when C is only Hausdorff can be found in [9, Definition
5.1.1.], and it reduces to Definition 2 in the present case of C being compact.
Let us now recall the notions of lower and upper closed limits for nets of sets. For a net
{Aλ }λ∈Λ in CL(C), let Li(Aλ ) denote the set of all limit points of {Aλ }λ∈Λ . These are the
points c ∈ C such that each neighborhood of c intersects Aλ for all λ in some residual subset of
Λ. By contrast, Ls(Aλ ) denotes the set of all cluster points of {Aλ }λ∈Λ . These are the points
c ∈ C such that each neighborhood of c intersects Aλ for all λ in some cofinal subset of Λ. We
always have Li(Aλ ) ⊂ Ls(Aλ ).
Since C is a compact Hausdorff space, convergence w.r.t. the Fell topology and the notion
of Kuratowski-Painlevé convergence of nets coincide [9, Theorem 5.2.6]. Hence, we focus on
the latter convergence, which is easier to apply in the proofs.
Definition 3 Let{Aλ }λ∈Λ be a net in CL(C) and A ∈ CL(C). We say that {Aλ }λ∈Λ converges in the Kuratowski-Painlevé sense to A (denoted A = K limλ Aλ ) if Li(Aλ ) = A =
Ls(Aλ ).
14 This is the case if the contract space is convex and the agent’s utility function is affine.
The latter is guaranteed if mixed contracts are considered.

20

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

A.2 Semicontinuity of an integral functional
We made use of the following result, which is nontrivial in the present nonmetrizable setting:
Lemma 8 Let X, Y be compact Hausdorff spaces, λ a regular probability measure on B(X),
and g : X × Y → R a jointly upper semicontinuous function. Then,
Z
g(x, y)dλ(x),
Y ∋ y 7→
X

is well-defined and upper semicontinuous.
Proof Compact Hausdorff spaces are completely regular, and in a completely regular space
every finite upper semicontinuous function equals the pointwise infimum of its continuous
majorants:
S := {c : c ≥ g everywhere, c continuous};

g(x, y) = inf c(x, y),
c∈S

see for example [12, Proposition 7, No 7, Chapter IX.10]. Let us assume for the moment15 that
for c : X × Y → R continuous we have
yα → y implies sup |c(x, yα ) − c(x, y)| → 0.

(19)

x

R
From the duality of continuous functions and finite measures, we find that y 7→ c(x, y)dλ(x),
is continuous. Next, note that set S is downwards directed, and hence, in particular, it can be
seen as a decreasing net. In line with [7, Proposition 2.13], where the regularity of λ is needed,
applied to the (upper-bounded) upper semicontinuous function g, we easily deduce

Z
Z 
Z
c(x, y)dλ(x).
inf c(x, y) dλ(x) = inf
g(x, y)dλ(x) =
X

X

c∈S

c∈S

X

Thus, the function on the l.h.s. is an infimum of continuous functions and therefore upper
semicontinuous.
Let us return to (19), which would be trivial in the metrizable setting. We fix y and let
ǫ > 0. For each x we have by continuity the existence of neighborhoods UxX and VxY of x and
y respectively, such that
|c(x̄, ȳ) − c(x, y)| ≤ ǫ/2 for all x̄ ∈ UxX , ∀ȳ ∈ VxY .
S
We now cover X × {y}, a compact, with x∈X UxX × VxY . Therefore, we obtain x1 , . . . , xn
such that
[
UxXi × VxYi ,
X × {y} ⊂
i≤n

and we introduce V :=

∩i≤n VxYi .

This is an open set containing y, and thus,
X × {y} ⊂

[

UxXi × V.

i≤n

Therefore, given x̄ arbitrary and ȳ ∈ V , there is some i ≤ n such that (x̄, ȳ) ∈ UxXi × V and
thus
|c(x̄, y) − c(x̄, ȳ)| ≤ |c(x̄, y) − c(xi , y)| + |c(xi , y) − c(x̄, ȳ)|
≤ ǫ/2 + ǫ/2.
This shows that supx∈X |c(x, y) − c(x, ȳ)| ≤ ǫ for all ȳ ∈ V , as desired.



15 Actually, this follows immediately from the fact that the topologies on X and Y are
generated by uniformities: we prefer to give self-contained arguments, perhaps paving the way
for future extensions.

Robust Contracting in General Contract Spaces

21

Corollary 1 Let X be a Hausdorff space, and let Y be a compact Hausdorff space. Let λ
a regular probability measure on B(X), and g : X × Y → R a jointly upper semicontinuous
bounded function. Then
Z
Y ∋ y 7→

g(x, y)dλ(x),

X

is well-defined and upper semicontinuous.
Proof Let (Xn ) be an increasing sequence of compact subsets of X such that λ(Xn ) ↑ 1, the
existence of which is guaranteed by the (inner) regularity of λ. By Lemma 8, the mappings
Z
g(x, y)dλ(x)
Gn (y) :=
Xn

are well-defined and upper semicontinuous for each n ∈ N. Subtracting from g its lower bound,
we may assume that g is non-negative. For any y and λ a.e. x we have 1Xn (x)g(x, y) ր g(x, y),
and hence, by sequential monotone convergence
Z
g(x, y)dλ(x) =: G(y).
lim Gn (y) = sup Gn (y) =
n→∞

n

X

Thus, G is well-defined, and its upper semicontinuity remains to be proved. Since g is bounded,
we have kGn − Gk∞ → 0 as n → ∞. Hence, if yα → y is a net, then for any ǫ > 0 and n = n(ǫ)
big enough
lim sup G(yα ) ≤ ǫ + lim sup Gn (yα ) ≤ ǫ + Gn (y) ≤ ǫ + G(y),
which concludes the proof.



B Proofs
We now present the proof of Lemma 1, which actually follows by [9, Proposition 5.1.2 and
Exercise 5.1.4(a)]. For the reader’s convenience, we provide the complete argument:
Proof of Lemma 1 Since C is compact Haussdorf, for each A1 , A2 ∈ CL(C) disjoint, we can find
U1 , U2 ∈ τ C disjoint such that Ai ⊂ Ui . Then, U1+ and U2+ are disjoint open neighborhoods
in τF of A1 and A2 respectively. Thus τF is Hausdorff.
To prove that τF is compact, we follow [9, Theorem 5.1.3]. Let {Vλ : λ ∈ Λ} and {Wσ :
σ ∈ Σ} be two families of non-empty open sets of C, such that
CL(C) = {Vλ− : λ ∈ Λ} ∪ {Wσ+ : σ ∈ Σ}.
By the Alexander subbase theorem, it suffices to check the existence of a finite subcovering
for this kind of coverings, to obtain proof of compactness of τF . Note that if Λ is empty, then
C ∈ ∪σ Wσ+ , therefore, for some σ̄ ∈ Σ we must have Wσ̄ = C and consequently Wσ̄+ = CL(C)
is a finite subcovering. Hence, we now assume that Λ is non-empty. If Σ is empty, then ∀c ∈
C : {c} ∈ ∪λ Vλ− , and thus, these Vλ ’s form an open covering of C. Then, we find C = ∪n
i=1 Vλn
and get
−
CL(C) = ∪n
i=1 Vλn
is a finite subcovering.
Finally, if both Λ and Σ are non-empty, some σ0 ∈ Σ must exist such that (Wσ0 )c ⊂ ∪λ Vλ .
Indeed, if this was not the case, we may choose cσ ∈ (Wσ )c \ ∪λ Vλ for each σ, and then the
τ
closed set {cσ : σ ∈ Σ} intersects no Vλ and is not contained in any Wσ , contradicting the
covering assumption. Since (Wσ0 )c is compact, it follows (Wσ0 )c ⊂ ∪m
k=1 Vλk and then clearly
Wσ+0 ∪k Vλ− = CL(C).

k

Proof of Proposition 1: Let I : Θ × CL(C) ։ Θ × C be the identity correspondence
(θ, D) 7→ I(θ, D) := {θ} × D.
It is easy to see that I is a continuous correspondence (see [1, Lemmata 17.4-17.5]) where the
domain is given the topology (τ Θ × τF ) and the range is given (τ Θ × τ C ). Since by Assumption
1, function U is jointly continuous, it follows by [1, Berge Maximum Theorem 17.31] that U ∗
is continuous too.


22

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

Proof of Proposition 2: Since D ∈ CL(C) is compact, we have Φ(θ, D) 6= ∅ by the continuity
of U (θ, ·). Further, since set D ∩ U (θ, ·)−1 ({U ∗ (θ, D)}) ⊂ C is closed, it must be compact too,
showing that Φ(θ, D) is compact.
We now prove upper hemicontinuity. Since C is compact, by [1, 17.11 Closed Graph Theorem] we need only check that the graph of Φ is closed. Let {(θλ , Dλ )}λ∈Λ be a net with
(θλ , Dλ ) → (θ, D), and let fλ ∈ Φ(θλ , Dλ ) with fλ → f . We must show that f ∈ Φ(θ, D).
Since f is a limit point of {fλ }, with fλ ∈ Dλ and D = Li(Dλ ), we obtain f ∈ D. On the
other hand, by definition
U (θλ , fλ ) = U ∗ (θλ , Dλ ).
Since U and U ∗ are continuous (Proposition 1), we can go into the limit, finding
U (θ, f ) = U ∗ (θ, D).
This finding and f ∈ D conclude the proof.



Proof of Proposition 3: By Proposition 2, the correspondence (θ, D) 7→ Φ(θ, D) is upper
hemicontinuous and has non-empty compact values. On the other hand, by Assumption 1,
the function (θ, f ) 7→ V (θ, f ) is upper semicontinuous. It follows that the mapping V ∗ (·, ·) is
upper semicontinuous; see [10, Theorem 2 (p. 116)] or [1, Lemma 17.30].

Proof of Theorem 3: First, define F κ : CL(C) → R by
Z
V ∗ (θ, D)dκ(θ),
F κ (D) :=
Θ

for κ ∈ K. We have V ∗ (θ, D) ≤ supθ∈Θ, c∈C V (θ, c), the r.h.s. of which is finite by compactness
and u.s.c. of V . By Lemma 8, taking g := V ∗ , we have that F κ is well-defined and, in fact,
upper semicontinuous in CL(C). It follows that inf κ∈K F κ (·) is also upper semicontinuous. The
set T is non-empty and compact, see (7). The result follows.

Proof of Proposition 4: Since V is assumed bounded, the proof follows from the same arguments as for Theorem 3], using Corollary 1 instead of Lemma 8.

Proof of Theorem 4: Let D ∗ be the optimizer of (3). Since set Φ(θ, D ∗ ) is non-empty and
compact for each θ, we deduce that set
arg max V (θ, d)
d∈Φ(θ,D ∗ )

is non-empty. By axiom of choice, we select ϕ∗ (θ) ∈ arg maxd∈Φ(θ,D ∗ ) V (θ, d), thus, by definition,
V (θ, ϕ∗ (θ)) = V ∗ (θ, D ∗ ), for all θ.
Observe that V (·, ϕ∗ (·)) is measurable, because V ∗ (·, D ∗ ) is measurable. In addition, since
ϕ∗ (θ) ∈ D ∗ for each θ, we deduce in particular
ϕ∗ (θ) ∈ Φ(θ, D ∗ ),
which yields that

U (θ, ϕ∗ (θ)) ≥ U (θ, ϕ∗ (θ ′ )), for all θ ′ ∈ Θ.

Finally, since D ∗ ∈ T and ϕ∗ (θ) ∈ Φ(θ, D ∗ ) we conclude that U (θ, ϕ∗ (θ)) ≥ u(θ). Thus far, we
have established that ϕ∗ ∈ M̂ . Now, let ϕ ∈ M̂ arbitrary, and let D be the closure of ϕ(Θ).
It follows that ϕ(θ) ∈ Φ(θ, D), since ϕ is incentive compatible and by continuity of U . Thus
V (θ, ϕ(θ)) ≤ V ∗ (θ, D) by definition. Since ϕ is individually rational, it follows D ∈ T . All in
all,
Z
Z
V ∗ (θ, D)dκ(θ)
V (θ, ϕ(θ))dκ(θ) ≤
Θ
Θ
Z
Z
V (θ, ϕ∗ (θ))dκ(θ),
V ∗ (θ, D ∗ )dκ(θ) =
≤
Θ

from which ϕ is optimal for Problem (12).

Θ



Robust Contracting in General Contract Spaces

23

Proof of Lemma 3: Without loss of generality, we may assume that u ≥ 0. By (15) and the
definitions of v and X (ea )0 we obtain that C is bounded in L1 (Q). By Eberlein-Smulian’s
theorem, it is enough to check sequential compactness. By contradiction suppose that C is not
σ(L1 (Q), L∞ (Q))-relatively compact, and hence not uniformly integrable. As in the proof of
[25, Lemma 1], we obtain the existence of a sequence {gn } ⊂ X (ea ), a sequence of disjoint
measurable events {An } and an α > 0 such that
EQ [u(gn )1An ] ≥ α.
P

Accordingly, if we define Hk := n≤k u(gn )1An we find EQ [Hk ] ≥ kα. Note that as in [24,
Lemma 6.3], u∗ (y/2) ≤ au∗ (y) + b, and thus, in particular,
u∗ (y2−m ) ≤ am u∗ (y) + (am−1 + · · · + a1 + a0 )b.
Now, clearly


Hk = u 

X

n≤k



gn 1An  ≤ u∗ (Y ) + Y

X

gn 1An ,

n≤k

for every non-negative random variable Y . Let us temporarily assume that we could choose
Y ∗ independent of k and such that for some L < α:


X
∗
gn 1An  ≤ Lk.
EQ Y
(20)
n≤k

From the above computations we then have kα ≤ EQ [Hk ] ≤ EQ [u∗ (Y ∗ )] + Lk, and hence, if
further
EQ [u∗ (Y ∗ )] < ∞,

(21)

this would yield a contradiction with L < α.
We now show the existence of Y ∗ fulfilling (20) and (21). By Assumption (15), there exists
y > 0, Y ∈ X (ea )0 such that EQ [u∗ (yY )] < ∞. However, then
EQ [u∗ (2−m yY )] < ∞,
for all m > 0. We now take m large so that L := y2−m < α and define Y ∗ := LY . Then
h
h
i
X
X i
gn 1An ≤ EQ Y ∗
gn ≤ Lk.
EQ Y ∗
n≤k

n≤k

Hence Y ∗ fulfills (20)-(21) as desired.
It remains to show that C is weakly closed. First we show that C is convex. Since u−1 is
increasing and u concave, for X, X̄ ∈ X (ea ) and β ∈ [0, 1] we have


u−1 βu(X) + (1 − β)u(X̄) ≤ u−1 u(βX + (1 − β)X̄)
= βX + (1 − β)X̄ ∈ X (ea ).


Because X (ea ) is solid, then u−1 βu(X) + (1 − β)u(X̄) ∈ X (ea ), and therefore βu(X) + (1 −
β)u(X̄) ∈ C. Since C is convex, it is weakly closed if and only if it is strongly closed. Let us
recall the bipolar theorem of [13, Theorem 1.3], which applies here since X (ea ) is convex, solid,
and closed in L0 (Q), that states
X ∈ X (ea ) ⇐⇒ EQ [XY ] ≤ 1 for all Y ∈ X (ea )0 .
Now let {U (Xn )}n ⊂ C converge in L1 -norm to Z, and let Y ∈ X (ea )0 be arbitrary. Then,
EQ [Y u−1 ◦ u(Xn )] = EQ [Y Xn ] ≤ 1,
and therefore, by Fatou’s lemma EQ [Y u−1 (Z)] ≤ 1 too, and by the bipolar theorem u−1 (Z) ∈
X (ea ). Consequently, Z ∈ C, finishing the proof.


24

Julio Backhoff-Veraguas, Patrick Beissner, Ulrich Horst

Proof of Lemma 4: Observe that X (ea ) ⊂ X (kea k), and, as a consequence,
∀X ∈ X (kea k) : EQ [XY ] ≤ 1 ⇒ ∀X ∈ X (ea ) : EQ [XY ] ≤ 1.
Assumption (16) allows us to apply [24, Theorem 3.1] to the pairing between X (kea k) and its
polar. As a particular consequence, there exists y ≥ 0 and Y in the polar of X (kea k) such that
EQ [u∗ (yY )] < ∞.
Since the polar of X (ea ) is larger, we conclude the proof.



Acknowledgements The authors would like to thank the anonymous referees and editors
for their valuable advice.

References
1. C.D. Aliprantis and K.C. Border. Infinite dimensional analysis: a hitchhiker’s guide.
Springer Verlag, 2006.
2. Sarah Auster. Robust contracting under common value uncertainty. Theoretical Economics, 13(1):175–204, 2018.
3. Julio Backhoff and Ulrich Horst. Conditional analysis and a principal-agent problem.
SIAM Journal on Financial Mathematics, 7(1):477–507, 2016.
4. E. Balder and C. Hess. Two generalizations of komlos’ theorem with lower closure-type
applications. Journal of Convex Analysis, 1(3):25–44, 1996.
5. Erik J Balder. New sequential compactness results for spaces of scalarly integrable functions. Journal of Mathematical Analysis and Applications, 151(1):1–16, 1990.
6. Erik J Balder. On the existence of optimal contract mechanisms for incomplete information
principal-agent models. Journal of Economic Theory, 68(1):133–148, 1996.
7. A. Baranov and H. Woracek. Majorization in de Branges spaces. III. Division by Blaschke
products. Algebra i Analiz, 21(6):3–46, 2009.
8. Viorel Barbu and Teodor Precupanu. Convexity and optimization in Banach spaces.
Springer Science & Business Media, 2012.
9. G.A. Beer. Topologies on closed and closed convex sets, volume 268. Springer, 1993.
10. Claude Berge. Topological Spaces: including a treatment of multi-valued functions, vector
spaces, and convexity. Courier Corporation, 1963.
11. Dirk Bergemann and Karl Schlag. Robust monopoly pricing. Journal of Economic Theory,
146(6):2527–2543, 2011.
12. N. Bourbaki. Éléments de mathématique. I: Les structures fondamentales de l’analyse.
Fascicule VIII. Livre III: Topologie générale. Chapitre 9: Utilisation des nombres réels
en topologie générale. Deuxième édition revue et augmentée. Actualités Scientifiques et
Industrielles, No. 1045. Hermann, Paris, 1958.
0 . In Séminaire de
13. Werner Brannath and Walter Schachermayer. A bipolar theorem for l+
Probabilités XXXIII, pages 349–354. Springer, 1999.
14. Benjamin Brooks and Songzi Du. Optimal auction design with common values: An informationally robust approach. Unpublished manuscript, Stanford Univ., Stanford, CA,
2018.
15. Gabriel Carroll. Robustness and linear contracts. American Economic Review, 105(2):536–
63, 2015.
16. Gabriel Carroll. Information games and robust trading mechanisms. Unpublished
manuscript, Stanford Univ., Stanford, CA, 2018.
17. Gabriel Carroll. Robustness in mechanism design and contracting. Annual Review of
Economics, 11:139–166, 2019.
18. Jakša Cvitanić, Walter Schachermayer, and Hui Wang. Utility maximization in incomplete
markets with random endowment. Finance and Stochastics, 5(2):259–272, 2001.
19. Songzi Du. Robust mechanisms under common valuation. Econometrica, 86(5):1569–1588,
2018.
20. Hans Föllmer and Alexander Schied. Stochastic finance: an introduction in discrete time.
Walter de Gruyter, 2011.
21. Alexander Frankel. Aligned delegation. American Economic Review, 104(1):66–83, 2014.

Robust Contracting in General Contract Spaces

25

22. Daniel F Garrett. Robustness of simple menus of contracts in cost-based procurement.
Games and Economic Behavior, 87:631–641, 2014.
23. I. Gilboa and D. Schmeidler. Maxmin expected utility with non-unique prior. Journal of
mathematical economics, 18(2):141–153, 1989.
24. Dimitri Kramkov and Walter Schachermayer. The asymptotic elasticity of utility functions
and optimal investment in incomplete markets. Annals of Applied Probability, pages 904–
950, 1999.
25. Dmitry Kramkov and Walter Schachermayer. Necessary and sufficient conditions in the
problem of optimal investment in incomplete markets. The Annals of Applied Probability,
13(4):1504–1516, 2003.
26. F. Maccheroni, M. Marinacci, and A. Rustichini. Ambiguity aversion, robustness, and the
variational representation of preferences. Econometrica, 74(6):1447–1498, 2006.
27. James Mirrlees and Roberto C Raimondo. Strategies in the principal-agent model. Economic Theory, 53(3):605–656, 2013.
28. Hui Ou-Yang. Optimal contracts in a continuous-time delegated portfolio management
problem. Review of Financial Studies, 16(1):173–208, 2003.
29. Frank H Page. Optimal contract mechanisms for principal-agent problems with moral
hazard and adverse selection. Economic Theory, 1(4):323–338, 1991.
30. Frank H Page. Mechanism design for general screening problems with moral hazard.
Economic theory, 2(2):265–281, 1992.
31. Frank H Page. Optimal deterministic contracting mechanisms for principal-agent problems
with moral hazard and adverse selection. Review of Economic Design, 3(1):1–13, 1997.
32. Yuliy Sannikov. A continuous-time version of the principal-agent problem. The Review of
Economic Studies, 75(3):957–984, 2008.
33. Walter Schachermayer. Optimal investment in incomplete financial markets. In Mathematical Finance-Bachelier Congress 2000, pages 427–462. Springer, 2002.
34. Heinz Schättler and Jaeyoung Sung. The first-order approach to the continuous-time
principal–agent problem with exponential utility. Journal of Economic Theory, 61(2):331–
371, 1993.
35. Yangwei Song. Efficient implementation with interdependent valuations and maxmin
agents. Journal of Economic Theory, 176:693–726, 2018.
36. Stephen E Spear and Sanjay Srivastava. On repeated moral hazard with discounting. The
Review of Economic Studies, 54(4):599–617, 1987.

