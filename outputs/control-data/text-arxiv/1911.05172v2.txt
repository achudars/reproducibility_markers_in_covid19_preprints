Orbifolds from Modular Orbits
Daniel Robbins∗ and Thomas Vandermeulen†

arXiv:1911.05172v2 [hep-th] 14 Jan 2020

Department of Physics, University at Albany,
Albany, NY 12222, USA

Abstract
Given a two-dimensional conformal field theory with a global symmetry, we propose a method to implement an orbifold construction by taking orbits of the modular
group. For the case of cyclic symmetries we find that this approach always seems to
be consistent, even in asymmetric orbifold cases where the usual construction does
not yield a modular invariant theory; our approach keeps modular invariance manifest but may give a result that is equivalent to the original theory. For the case that
the symmetry is a subgroup of a continuous flavor symmetry, we can give explicit
constructions of the spectrum, with twisted sectors corresponding to a non-standard
group projection on an enlarged twisted sector Hilbert space.

∗
†

email address: dgrobbins@albany.edu
email address: tvandermeulen@albany.edu

1

Introduction

Orbifolds have provided a large class of examples of two-dimensional conformal field theories. In the original formulation [1, 2], orbifolds arose as the worldsheet theories describing
strings that probe orbifold geometries - the result of quotienting a smooth manifold by an
isometry subgroup with fixed points. The most typical case starts with a free theory (a
sigma model whose target space is a torus), and then constructs the quotient theory by simultaneously restricting to states that are invariant under the isometries, and by including
new twisted sectors in which strings are closed only up to the quotient. This procedure can
be implemented at the level of the path integral, as we review in section 2.
In time, the term orbifold expanded in the physics literature [3–5] to refer to a broader
class of constructions in which one quotients a conformal field theory by a global symmetry.
From this perspective, we can view an orbifold as simply gauging some (usually discrete)
global symmetry of a CFT. For the free theories mentioned above, we can look beyond the
symmetries that correspond to isometries of the torus and consider more general quotients
by symmetries that act differently on left- and right-movers [3, 4, 6]. These asymmetric
orbifolds can be constructed using similar methods to the symmetric case, but the results
are not always modular invariant. Typically one discards the examples that fail to be
modular invariant, declaring that the corresponding global symmetries simply can’t be
gauged. In cases where there is no Lagrangian description of the parent theory, so that a
path integral formulation is not available, then it is not always clear how to construct the
orbifold theory.
An alternative route towards defining orbifolds in this more general context is to use
modular invariance itself as a guiding principle. In [6], such an approach is used to analyze
asymmetric orbifolds of free boson parent theories, and an algorithm is presented which
can be used in more general settings as well.
There are a couple of ways that this procedure can go wrong. If H 2 (G, U(1)) 6= 0, then

the full orbifold partition function is not in the orbit of the untwisted sector; in this case
one must provide extra information (a choice of discrete torsion) to specify the orbifold
theory, and, more seriously from our point of view, the disjoint orbits cannot be obtained
from the parent theory and genus one modular invariance alone. For cyclic groups, this
is not an issue (H 2 (ZN , U(1)) = 0), and these will be our main focus in this paper. A
second pitfall can occur when H 3 (G, U(1)) 6= 0. In this case the symmetry G could be
1

anomalous. Since orbifolding by a symmetry G is essentially gauging that symmetry, then
we would expect that an anomalous symmetry simply cannot be gauged. In particular, we
have H 3 (ZN , U(1)) ∼
= ZN , so cyclic groups can be anomalous.
This paper then starts with a point of confusion. It turns out that H 2 (Z, U(1)) ∼
=

H 3 (Z, U(1)) ∼
= 0, so it should be that Z-orbifolds are consistent (non-anomalous) and unambiguous (no discrete torsion). So what prevents us from promoting a ZN global symmetry
(possibly anomalous) to a non-anomalous Z symmetry in which some elements act trivially,
and then performing the orbifold. Orbifolds in which the group acts ineffectively have been
studied in [7,8]. In general the result may take the form of a direct sum of disconnected theories. When discrete torsion is in play, the disconnected copies can involve different choices
of discrete torsion. For the cyclic groups we mostly consider, the disconnected copies will
be identical.
The main objective of this paper is to explore this idea, of extending a ZN symmetry
to a non-anomalous Z symmetry to perform the orbifold. This is very much in the spirit
of [9,10], which examines anomaly-free extensions of finite groups in the context of symmetry
protected topological states. We will find that for any cyclic symmetry we can construct
a modular invariant orbifold partition function with all expected properties (non-negative
integer coefficients, unique vacuum, etc.). For cases that would have been anomalous,
the resulting orbifold partition functions don’t typically correspond to new theories, but
rather reconstruct either the original parent theory or a different consistent orbifold thereof.
Another observation that emerges from our analysis is that even in non-anomalous orbifolds,
one may need to use a non-standard projection in the enlarged twisted sector Hilbert spaces
(i.e. states are not invariant under the group, but should transform in a particular projective
representation).
We will mainly consider particular examples, and so we don’t have general proofs that
our proposal always results in consistent partition functions. However, for the case that
the quotient is by the subgroup of a continuous U(1) symmetry, we are able to use the
technology of flavored partition functions to explicitly demonstrate many of the claimed
properties, giving explicit expressions for all the partial traces and interpreting the twisted
sector partition functions as projections on a set of enlarged Hilbert spaces.
The plan of the paper is as follows. Section 2 lays out our basic conventions for orbifold
partition functions and partial traces. Section 3 contains our main proposal, in the form
of a procedure for the construction of orbifold partition functions. We follow this with a
2

discussion of potential issues the formalism might face and some explicit examples of its
implementation. In section 4 we cast our proposal in the language of topological defect
lines (TDLs), and in particular make more direct contact with the potential anomaly in
our symmetry group. Section 5 focuses on theories with continuous symmetries, in which
case we can introduce additional machinery in flavored partition functions. This allows
us to implement our procedure in an explicit form that applies to any such theory of this
type. The prototypical example of such a theory is the free boson with its U(1)×U(1)
symmetry, so in section 6 we examine these theories in some detail, showing how a variety
of orbifold partition functions emerge as special cases of the calculations of section 5. Section 7 demonstrates how our proposal can be iterated to encompass groups with multiple
generators; we do not tackle this extension in full generality, but content ourselves with an
example. Section 8 recaps our conclusions and discusses some possible directions for future
work.

2

Orbifold partition functions and partial traces

We begin with a consistent, unitary, two-dimensional conformal field theory which we will
call the parent theory, that has some global symmetry that commutes with the Virasoro
generators. We assume that we know everything there is to know about the parent theory,
including the spectrum of primary operators, all correlation functions, etc. Mostly we will
restrict to theories with discrete spectra, though we will relax this in section 3.4 in order
to discuss the non-compact boson. We would like to understand when there is a sensible
“orbifold procedure” for such theories, i.e. a method which roughly corresponds to taking
the quotient of the parent theory by some subgroup G of the global symmetries to construct
a new CFT called the orbifold theory. We will be concerned only with quotients by discrete
subgroups of the global symmetry group (and in fact we will later restrict to the case of
cyclic subgroups). The new theory will be called the orbifold theory.
As a first step, we would like our new theory to include all the states of the parent theory
which are invariant under the chosen subgroup G. At the level of the partition function,
this means that our orbifold theory should include a sector, called the untwisted sector, of
such invariant states, and the contribution of this sector to the orbifold partition function
is given by inserting a projector onto invariant states in the partition function,

c̄ 
c
Z1 = TrHP ΠG q L0 − 24 q̄ L0 − 24 ,
3

(2.1)

where HP is the Hilbert space of states in the parent theory. In the case that G is finite,

the projector ΠG can be written explicitly as
ΠG =

1 X
ρ(g),
|G| g∈G

(2.2)

where ρ : G → U(HP ) is the representation of the group G on HP . If we define untwisted

sector partial traces,


c
c̄ 
Z1,g := TrHP ρ(g)q L0 − 24 q̄ L0 − 24 ,

(2.3)

then the quantity Z1 , which is called the untwisted sector partition function of the orbifold
can be written as
Z1 =

1 X
Z1,g .
|G| g∈G

(2.4)

Unfortunately, Z1 is not generally modular invariant. There’s no problem with the
τ → τ + 1 transformation; the partition function will be invariant under this if and only

if (at least in cases where the CFT has a discrete spectrum) every state in the theory has
integral spin, h − h ∈ Z. Since the parent theory was modular invariant by assumption,

and Z1 simply traces over a subset of the original states, all the untwisted sector states will

satisfy this condition. On the other hand, we do not expect that Z1 (−1/τ, −1/τ̄ ) = Z1 (τ, τ̄ ).
The problem, and a way to fix it, is easiest to understand when one has access to a

path integral formulation, for instance when the parent theory is a theory of free fields ϕ
with action S[ϕ]. We review this story in appendix A. The main takeaway is that one can
define partial traces for any pair of commuting elements g and h,
h
c̄ i
c
Zh,g (τ, τ̄ ) = TrHh ρh (g)q L0− 24 q̄ L̄0 − 24 ,

(2.5)

where Hh is the Hilbert space of states twisted by h and ρh is the representation of the group

G acting on this Hilbert space. Then we can build the twisted sector partition function,
which when G is finite and abelian is given by
Zh (τ, τ̄ ) =

1 X
Zh,g (τ, τ̄ ),
|G| g∈G

(2.6)

corresponding to G-invariant states in the h-twisted sector.
The partial traces should transform according to equation (A.141),


aτ + b aτ̄ + b
a b
∈ SL(2, Z).
for
,
) = Zg−c ha ,gd h−b (τ, τ̄ ),
Zh,g (
c d
cτ + d cτ̄ + d
4

(2.7)

And this means that an orbifold partition function built as
ZG =

X

Zh =

h∈G

1 X
Zh,g ,
|G| h,g∈G

(2.8)

is modular invariant (where again we have specialized to the finite abelian case).
When we don’t have access to a path integral formulation of our theory, there does
not seem to be a direct method to construct the twisted sector Hilbert spaces or the full
partition function. However, we can use modular invariance as a guiding principle, and
attempt to define twisted sector partial traces by the transformation rule (2.7), when that
is possible, as we will describe in the next section.

3
3.1

Method of modular orbits
Review of Aoki, D’Hoker, and Phong

In [6], Aoki, D’Hoker, and Phong propose an approach to the construction of orbifolds
which puts modular invariance at the forefront. To illustrate their proposal, we will restrict
to finite abelian groups G. Those authors state two principles as a starting point. First,
they assume there exist enlarged twisted sector Hilbert spaces Hh for each h ∈ G, and a

representation ρh : G → U(Hh ) of G on that Hilbert space, so that we can define partial
traces as we did in the path integral case,

h
c̄ i
c
Zh,g (τ, τ̄ ) = TrHh ρh (g)q L0− 24 q̄ L̄0 − 24 .

(3.9)

Secondly, they assume that these partial traces transform covariantly under modular transformations,
aτ + b aτ̄ + b
Zh,g (
,
) = Zg−c ha ,gd h−b (τ, τ̄ ),
cτ + d cτ̄ + d

for



a b
∈ SL(2, Z).
c d

(3.10)

For consistency, they insist on level matching, i.e. that if h has order nh in G, then
L0 − L0 ∈

1
Z,
nh

(3.11)

for all states in the enlarged twisted sector Hilbert space Hh .

With these assumptions, then an orbifold partition function
ZG =

1 X
Zh,g ,
|G| g,h∈G
5

(3.12)

is necessarily modular invariant. Note that the twisted sector partition functions again
involve projections,
h
c̄ i
c
1 X
L̄0 −
L0 −
24
24
.
q̄
Zh =
Zh,g = TrHh ΠG q
|G| g∈G

(3.13)

The authors of [6] next outline an algorithm for constructing the orbifold theory, which
we shall paraphrase,
1. Use the knowledge of the parent theory to construct the untwisted sector partial
traces Z1,g .
2. Use modular transformations to compute Zh,1 (τ, τ̄ ) = Z1,h (−1/τ, −1/τ̄ ). From these,
deduce the spectrum of the enlarged twisted sector Hilbert space Hh .

3. Further modular transformations furnish Zh,hk (τ, τ̄ ) = Zh,1 (τ − k, τ̄ − k), which can
also be used to deduce the action of hk on Hh .

4. Deduce the other twisted sector partial traces Zh,g by extrapolating from the actions
of hk on the Hh (for instance some of these can be obtained by further modular
transformations).

Note that it may not always be clear how to implement the final step.
3.2

Our proposal

Our proposal is similar in spirit to that of [6], and agrees with it in cases that they declare
to be consistent, but we differ in a couple of points. In this paper we will mainly focus
on cyclic groups G = hgi ∼
= ZN , and we will use additive notation for the group elements,

g n ∼ n. Our algorithm can be summarized as follows,

1. Use the knowledge of the parent theory to construct the untwisted sector partial
traces Z0,n .
2. By treating the group as Z, which acts by g but with g kN acting trivially for all
integers k, we can apply modular transformations to the untwisted sector partial
traces and obtain all partial traces Zm,n . The subscripts may not be periodic modulo
N (but will be periodic modulo N 2 ).

6

3. Construct the twisted sector partition functions
2

N −1
1 X
Zm,n (τ, τ̄ ).
Zm (τ, τ̄ ) = 2
N n=0

(3.14)

Here m will be periodic modulo KN for some integer 1 ≤ K ≤ N, and we can
construct the full orbifold partition function as
ZG (τ, τ̄ ) =

KN
−1
X

Zm (τ, τ̄ ).

(3.15)

m=0

Here K will be the order of the anomaly of G, as an element of H 3 (G, U(1)) ∼
= ZN
(explicitly, if α is the anomaly, then1 K = N/ gcd(N, α)).
There are of course some key differences between our approach and the one of [6].
First of all, we remain agnostic on the subject of whether the Zm,n (τ, τ̄ ) necessarily have
an interpretation as the trace of ρh (n) in some enlarged twisted Hilbert space Hm . We do

of course still expect that the full twisted sector partition function Zm (τ, τ̄ ) does have an
bm , but it may or may not be the case
interpretation as a trace over a some Hilbert space H
bm = ΠG (Hm ) for some Hm and G-action.
that H

Secondly, we do not need to impose level-matching or equivalent constraints in order to

get a consistent procedure. By construction, our procedure always gives a modular invariant
object which we would like to interpret as the orbifold partition function (in fact it gives
a collection of twisted sector partition functions whose sum is the full partition function).
Although we have not actually constructed the twisted sector Hilbert spaces, much less
given consistent OPEs among twisted sector operators, in every example we look at, the
twisted sector partition functions are consistent with a Hilbert space interpretation (i.e. all
the coefficients in the q expansion are positive integers), and in the case where the orbifold

group lies inside a continuous global symmetry, we can prove this property.
For cases that would fail the level-matching condition, i.e. cases in which the symmetry
group G has an anomaly, our construction seems to give something consistent, but not new.
Frequently one finds that the orbifold partition function is equal to the original parent theory
partition function, but organized in a different way. In other cases, our construction gives
something equivalent to a different orbifold of the parent theory which is consistent in the
traditional sense.
1

As usual, gcd(m, n) represents the largest positive integer which divides the integers m and n. In
particular, gcd(0, n) = n.

7

3.3

Potential pitfalls to the procedure

To discuss the obstacles that may face us, and to work towards making our proposal more
explicit, let us again return to the case of a general group G. For a given parent theory,
we can always compute all the Z1,g (τ, τ̄ ), by simply inserting ρ(g) and tracing over HP .

Our proposal is to treat the transformation rule (2.7) as fundamental and to build the full
partition function by taking SL(2, Z) orbits of the untwisted sector partition traces. There

are several ways that this procedure could potentially run into trouble:
(i) It might be that some of the required partial traces Zh,g do not lie in the SL(2, Z)
orbit of any of the untwisted partial traces, so we do not generate all possible partial
traces by taking modular transformations. Summing over the orbits of the untwisted
partial traces will still generate a modular invariant candidate partition function, but
it is well known [11] that higher genus considerations force us to include the missing
orbits, possibly with some arbitrary choices of phase known as discrete torsion. This
discrete torsion is classified by the group cohomology H 2 (G; U(1)) (where we take the
trivial group action on U(1)).
(ii) There may be inconsistencies in the identification of partial traces, at least if we
assume that they are labeled by elements of the original symmetry group G. This
is actually related to a potential anomaly in the group G, which is classified by
H 3 (G, U(1)).
(iii) Even if the issues above are resolved or absent, the modular invariant quantity that
we construct might not admit an interpretation as a partition function, i.e. there may
c

c̄

be no Hilbert space of states over which we could trace q L0 − 24 q̄ L̄0 − 24 and get the given
result. This would be most obvious if the coefficients in a q expansion are not positive
integers, but could be more problematic even than this. The only truly convincing
construction of the orbifold would require a complete specification of the spectrum of
operators and their OPEs.
The first item above is well-understood. Consider the group G = Z2 × Z2 , for which
H (Z2 × Z2 ; U(1)) ∼
= Zgcd(n,m) ). Then under modular
= Z2 (in general H 2 (Zn × Zm ; U(1)) ∼
2

8

transformations the partial traces arrange into five disjoint orbits,
{Z(0,0),(0,0) },
{Z(0,0),(0,1) , Z(0,1),(0,0) , Z(0,1),(0,1) },
{Z(0,0),(1,0) , Z(1,0),(0,0) , Z(1,0),(1,0) },
{Z(0,0),(1,1) , Z(1,1),(0,0) , Z(1,1),(1,1) },
{Z(0,1),(1,0) , Z(0,1),(1,1) , Z(1,0),(0,1) , Z(1,0),(1,1) , Z(1,1),(0,1) , Z(1,1),(1,0) },

(3.16)

where we have used additive notation for the group elements. We see that the untwisted
sector partial traces (i.e. the ones with h = (0, 0)) only give us the first four orbits, and none
of the partial traces in the final orbit can be obtained by one-loop modular transformations
from the untwisted sector partial traces. We will discuss how to apply our proposal to
groups ZN × ZN ′ in section 7.

On the other hand, for all cyclic groups, G ∼
= 0,
= Z, we have H 2 (G; U(1)) ∼
= Zn or G ∼

and all partial traces are covered by the orbits of the untwisted sector. For these groups,
the proposed method of orbits should be enough to construct all partial traces. Most of this
paper will focus on the case of cyclic groups, in which case item (i) will not be a concern.
Item (ii) is also understood in various circumstances. Here the issue is that, because
of relations among group elements, the determination of partial traces may be ambiguous,
and hence inconsistent. Recall the transformation rule (2.7),


aτ + b aτ̄ + b
a b
,
) = Zg−c ha ,gd h−b (τ, τ̄ ),
for
∈ SL(2, Z).
Zh,g (
c d
cτ + d cτ̄ + d

(3.17)

Clearly Z1,1 (τ, τ̄ ) should be modular invariant, but we already have this condition since it
is simply the partition function of the original parent theory, which was modular invariant
by assumption. What about the other untwisted sector partial traces, Z1,g (τ, τ̄ )? Since the
symmetry g must commute with the Virasoro algebra, we can simultaneously diagonalize
ρ(g), L0 , and L̄0 , and write
c

c̄

Z1,g (τ, τ̄ ) = q − 24 q̄ − 24

X

gi q hi q̄ h̄i ,

(3.18)

states i

where gi are the eigenvalues of ρ(g), and hi and h̄i are the left and right conformal weights.
Invariance of the original partition function under the transformation τ → τ + 1 enforces

the conditions c − c̄ ∈ 24Z and hi − h̄i ∈ Z for all states. But these conditions are also

sufficient to ensure that Z1,g (τ, τ̄ ) is invariant under τ → τ + 1, as can be seen from the
expression (3.18) above. In the case G ∼
= Z, this is the only invariance we expect from
(3.17), since setting g −c ha = h, g d h−b = g for h = 1 enforces c = 0, and the corresponding
9

SL(2, Z) transformation will be τ → τ + b. In general, if there are further relations on the
generators of our group, for instance if g n = 1 for some n > 0, then consistency requires

more.
Consider the case G ∼
= Z2 = {0, 1}. Suppose we can compute Z0,0 (τ, τ̄ ) and Z0,1 (τ, τ̄ ).

Z0,0 (τ, τ̄ ) is modular invariant and Z0,1 (τ, τ̄ ) is invariant under τ → τ + 1. Then we might

also expect to have

aτ + b aτ̄ + b
,
) = Z−c,d(τ, τ̄ ),
(3.19)
cτ + d cτ̄ + d
where c and d in the subscript on the right are taken modulo 2. Also note that the
Z0,1 (

condition ad − bc = 1 means that c and d are not both even. By the usual expectations of
orbifold constructions, we would find an inconsistency unless Z0,1 (τ, τ̄ ) is invariant under

the subgroup of modular transformations with c even. This subgroup is generated by the
elements2 ( 10 11 ) and ( 12 01 ). The first of these is simply the τ → τ + 1 transformation and,
as noted, invariance under that is guaranteed. The second condition is non-trivial. Thus

we would conclude, according to the usual rules of orbifold construction, that the orbifold
was inconsistent unless

τ̄
τ
,
) = Z0,1 (τ, τ̄ ).
2τ + 1 2τ̄ + 1
If this condition does hold, then we can define
Z0,1 (

(3.20)

Z1,0 (τ, τ̄ ) = Z0,1 (−1/τ, −1/τ̄ ),
Z1,1 (τ, τ̄ ) = Z1,0 (τ + 1, τ̄ + 1) = Z0,1 (−1/(τ + 1), −1/(τ̄ + 1)),

(3.21)

and the manifestly modular invariant partition function
1
(Z0,0 (τ, τ̄ ) + Z0,1 (τ, τ̄ ) + Z1,0 (τ, τ̄ ) + Z1,1 (τ, τ̄ ))
2
= Z0 (τ, τ̄ ) + Z1 (τ, τ̄ ),

ZZ2 (τ, τ̄ ) =

(3.22)

where we have defined the untwisted and twisted sector partition functions,
Z0 (τ, τ̄ ) =

2

1
(Z0,0 (τ, , τ̄ ) + Z0,1 (τ, τ̄ )) ,
2

Z1 (τ, τ̄ ) =

1
(Z1,0 (τ, τ̄ ) + Z1,1 (τ, τ̄ )) .
2

(3.23)

Note that the condition (3.20) can also be given a more familiar interpretation. Since

1
− τ +2
−1

=
,
(3.24)
1
τ
2 − τ +2 + 1
To actually generate the subgroup of SL(2, Z) as opposed to PSL(2, Z), we would also need to include
as a generator.

−1 0
0 −1

10

we have
Z1,0 (τ + 2, τ̄ + 2) = Z0,1 (

−1
−1 −1
−1
,
) = Z0,1 ( ,
) = Z1,0 (τ, τ̄ ),
τ + 2 τ̄ + 2
τ τ̄

(3.25)

where the middle equality uses (3.24) and (3.20). So (3.20) implies that Z1,0 is invariant
under τ → τ + 2. Conversely, if Z1,0 defined by (3.21) has this invariance, then
Z0,1 (

τ
τ̄
1
1
1 1
,
) = Z1,0 (− + 2, − + 2) = Z1,0 (− , − ) = Z0,1 (τ, τ̄ ).
2τ + 1 2τ̄ + 1
τ
τ̄
τ
τ̄

(3.26)

We can similarly show that Z1,1 (τ + 2, τ̄ + 2) = Z1,1 (τ, τ̄ ) is equivalent. What is the
interpretation of this version of the invariance? It’s that the twisted sector, before imposing
Z2 invariance, must obey that 2(h − h̄) ∈ Z for all states (of course after we project onto

invariant states we have the usual stronger condition that h − h̄ ∈ Z). This level-matching
condition can be easier to use when the twisted sectors have been constructed geometrically
rather than in some abstract formulation. There are similar conditions for more complicated
groups G.
As an example of where the condition (3.20) fails to hold, consider the compact free
boson at self-dual radius, which is R = 1 in our conventions. The partition function of the
boson is (for detailed conventions, see section 3.7 below)
X 1
2 1
2
Z = |η|−2
q 4 (x+y) q̄ 4 (x−y) .

(3.27)

x,y∈Z

This theory has a global symmetry group of (SU(2)×SU(2))/Z2 , where the Z2 is the element
(−1, −1) ∈ SU(2) × SU(2). The diagonal subgroup SU(2)/Z2 ∼
= SO(3) acts symmetrically

on left- and right-moving degrees of freedom, and orbifolds by any discrete subgroup of
this SO(3) (or any subgroup that is conjugate to one of these inside (SU(2) × SU(2))/Z2 )

are known to be consistent. On the other hand, we can consider symmetries which are
not conjugate to something symmetric. For Z2 , there is only one such subgroup, which is
generated by (the equivalence class of) the element (1, −1) ∈ SU(2)×SU(2). This symmetry

can be thought of as a chiral shift of order two3 , and the corresponding untwisted sector
partial trace is
Z0,1 = |η|−2

X

1

2

1

2

eiπ(x−y) q 4 (x+y) q̄ 4 (x−y) .

(3.28)

x,y

It is easy to verify [6, 12] that this does not satisfy (3.20). We will look at cases involving
free bosons in much more detail below.
3

As explained in [6, 12], this is also what one obtains by acting with T-duality twice.

11

Item (iii) on our list of concerns seems to be much more difficult to get a handle on.
As we will see in examples below, it does not seem to arise as an issue in the examples we
construct, but in order to really prove that our procedure is well-defined, we would need
to construct the full orbifold theory. Even simply showing that the twisted sector partition
functions have good q expansions seems very difficult to prove in general, though in the
case of orbifolds by flavor subgroups we will be able to demonstrate this explicitly.
3.4

Orbifold by Z

For the case that our group G is the integers, then the concerns in items (i) and (ii) do
not arise, for the simple reason that H 2 (Z, U(1)) ∼
= H 3 (Z, U(1)) ∼
= 0. In terms of practical
consequences, it means that (using additive notation for our elements of Z) we can give a
unique unambiguous definition for all Zm,n in terms of the untwisted sector partial traces
Z0,r . Indeed, let r = gcd(m, n). Next use the Euclidean algorithm to find integers a and b

a
b
that satisfy an + bm = r. Then the matrix −m/r
n/r is in SL(2, Z) and we can define

aτ + b
aτ̄ + b
,r
).
(3.29)
n − mτ n − mτ̄
There is of course redundancy in the choice of a and b, but it is precisely accounted for by
Zm,n (τ, τ̄ ) = Z0,r (r

the τ → τ + 1 invariance of the Z0,n (τ, τ̄ ).

Let’s use this prescription to obtain the compact free boson at radius R as a Z-orbifold

of the non-compact free boson. This is a bit tricky, since the non-compact boson has a
continuum of primary states |pi labeled by a real momentum p ∈ R with weights h = h̄ =
p2 /4, and this in turn means that the partition function is divergent. The divergence will

be proportional to the (infinite) volume of space, and it can be argued [13] that we should
write something along the lines of

Z

∞

p2
Vol(R)
dp
−2
(3.30)
(q q̄) 4 =
√ |η(τ )| .
2π
2π
τ
2
−∞
Now we would like to orbifold this theory by the symmetry group G ∼
= Z generated by

Znc (τ, τ̄ ) = Vol(R) |η(τ )|

−2

a translation by 2πR, which acts on primary states as
g · |pi = e2πiRp |pi ,

(3.31)

and which commutes with oscillators. From this description it is straightforward to compute
the untwisted sector partial traces,
Z ∞
2 2
p2
dp 2πiRnp
Vol(R)
− πR n
−2
Z0,n (τ, τ̄ ) = Vol(R) |η(τ )|
e
(q q̄) 4 =
√ |η(τ )|−2 e τ2 .
2π τ2
−∞ 2π
12

(3.32)

According to our formula (3.29), we can next define
Zm,n (τ, τ̄ ) = Z0,r (r

aτ + b
aτ̄ + b
,r
),
n − mτ n − mτ̄

(3.33)

√
where r = gcd(m, n) and an+bm = r. Now the combination |η|−2/ τ2 is precisely modular

invariant, while τ2 transforms as




ir aτ + b
ir (an + bm)(τ − τ̄ )
aτ̄ + b
r 2 τ2
aτ + b
=−
=−
−
=
.
Im r
n − mτ
2 n − mτ
n − mτ̄
2
|n − mτ |2
|n − mτ |2
(3.34)
Hence it follows that
πR2 |n−mτ |2
aτ + b
aτ̄ + b
Vol(R)
−2 −
τ2
.
Zm,n (τ, τ̄ ) = Z0,r (r
,r
)=
√ |η(τ )| e
n − mτ n − mτ̄
2π τ2

(3.35)

To compute the partition function in the m-twisted sector, we are instructed to compute
X − πR2 |n−mτ |2
Vol(R)
1 X
τ2
Zm,n (τ, τ̄ ) =
e
√ |η(τ )|−2
|Z| n∈Z
2π|Z| τ2
n∈Z


2
X −πτ R2 m2 + k2 +2πiτ mk
X
Vol(R)
−πτ2 R2 m2 + k 2 +2πiτ1 mk
1
−2
−2
R
R2
e 2
= |η(τ )|
,
=
e
|η(τ )|
2πR|Z|
k∈Z
k∈Z

Zm (τ, τ̄ ) =

(3.36)

where we have included yet another infinite constant, |G| = |Z|, we have performed a

Poisson resummation in going from the first line to the second, and in the final step we
claim that two wrongs can make a right by identifying
Vol(R)
= 1,
2πR|Z|

(3.37)

i.e. that the full volume of R is obtained by the |Z| translates, each of length 2πR. Finally,

summing over m, we recover the full partition function,
ZZ (τ, τ̄ ) =

1 X
Zm,n (τ, τ̄ ) = ZR (τ, τ̄ ),
|Z| n,m∈Z

(3.38)

where ZR (τ, τ̄ ) is the partition function for a compact free boson of radius R, which can
also be computed directly,
ZR (τ, τ̄ ) = |η(τ )|−2

X

x,y∈Z

13

2

2

q 4 ( R +yR) q̄ 4 ( R −yR) .
1

x

1

x

(3.39)

3.5

Fibered CFTs

With the caveats about infinite constants, which didn’t slow us down much in the case of
the non-compact boson, it seems that a modular orbit construction of a Z-orbifold should
always be consistent, at least in the sense of avoiding pitfalls (i) and (ii). There are two
ways that we might use this observation to extend to any cyclic orbifold group. One is the
algorithm we proposed above, and which will be our focus through most of this paper, but
let us now mention another route. Suppose we have any parent CFT T with a symmetry

g and that we would like to orbifold by the group generated by g. If g has order N, then

this group is ZN when acting on the parent theory. In order to get a Z-action instead, we
can take the theory T and tensor it with a single non-compact boson to get a new theory,
T ′ = T ⊗ Tnc ,

(3.40)

and take the symmetry operator g ′ to act as g in the factor T and as e2πiRp (translation by

2πR) in the non-compact boson. This operator generates a global Z symmetry of T ′ , and

we can try to build the orbifold theory T ′ /Z.

This procedure was proposed in [14] and the resulting quotiented theories were called

“fibered CFTs”. By taking modular orbits we can unambiguously build all of the partial
traces and from there obtain the partition function ZT ′ /Z (τ, τ̄ ) of the orbifold theory.
The most interesting part of the construction was the dependence of the partition function on the parameter R, the shift in the noncompact direction. If we take R → ∞, then

all twisted sectors become very massive, their contribution to the partition function is sup-

pressed, and we find that the partition function matches the decoupled product theory,
ZT ′ /Z ∼
= ZT ZT , as we would expect. On the other hand, suppose we take the limit R → 0.
nc

b is the largest non-anomalous
In that case it was found that ZT ′ /Z ∼
= ZT /Gb ZTnc , where G
b∼
subgroup of G ∼
= ZN ! The subgroup G
= ZN/k will be generated by g k for some k which
divides N.
3.6

Critical Ising model

The critical Ising model has three Virasoro primaries in its spectrum: the identity 1 with
h = h̄ = 0, a state ǫ with h = h̄ = 1/2, and a state σ with h = h̄ = 1/16. The partition
function is thus

2

2

ZIsing = |χ0 (τ )|2 + χ 1 (τ ) + χ 1 (τ ) .
2

14

16

(3.41)

There is a Z2 global symmetry of this theory which flips the sign of σ, leaving 1 and ǫ
alone. Thus, our untwisted sector partial traces are


2
2
1
2
|χ0 (τ )| + χ 1 (τ ) + χ 1 (τ )
Z0,0 =
,
2
16
2


2
2
1
2
.
Z0,1 =
|χ0 (τ )| + χ 1 (τ ) − χ 1 (τ )
2
16
2

(3.42)
(3.43)

Under τ → −1/τ , the Ising model characters transform as
 
1
 
1
√1
χ0
χ0
2
2
2


1
1
1
 χ 1  −→  2
− √2   χ 12  ,
2
2
1
1
√
χ1
χ1
− √2
0
2
16
16

(3.44)

while under τ → τ + 1, we have

χ 1 → e 8 − 24 χ 1 .

χ 1 → −e− 24 χ 1 ,
2

πi

πi

πi

πi

χ0 → e− 24 χ0 ,

2

16

(3.45)

16

Then applying our method of modular orbits gives us the twisted sector partial traces4 ,
Z1,0 (τ, τ̄ ) = Z0,1 (−1/τ, −1/τ̄ )
=

2

1
1
1
1
1
1
χ0 + χ 1 + √ χ 1 + χ0 + χ 1 − √ χ 1
2
16
2
2
2
2
2
2
2 16
2
1
1
− √ χ0 − √ χ 1
2
2 2

= χ0 χ 1 + χ 1 χ0 + χ 1
2

2

2

16

Z1,1 (τ, τ̄ ) = Z1,0 (τ − 1, τ̄ − 1)
= −χ0 χ 1 − χ 1 χ0 + χ 1
2

2

16

,
2

2

(3.46)

.

(3.47)

Furthermore, the usual procedure is consistent because (3.25) is satisfied by Z1,0 . In other
words, this symmetry is anomaly-free.
We then have the untwisted and twisted sector partition functions,
1
(Z0,0 + Z0,1 ) = |χ0 |2 + χ 1
2
2
2
1
(Z1,0 + Z1,1 ) = χ 1 .
=
16
2

Z0 =
Z1

2

,

(3.48)
(3.49)

So the full orbifold partition function simply reproduces the original partition function!
1
1
Note that Z1,1 (τ, τ̄ ) = Z0,1 ( 1−τ
, 1−τ̄
), but we can rewrite the latter as Z1,0 (τ − 1, τ̄ − 1) using our
result for Z1,0 .
4

15

3.7

Reflection and shift orbifolds of the free boson

Many of the examples that we examine in this paper involve one or several compact free
bosons. We will focus more closely on these theories in section 6, using the tool of flavored
partition functions. But here we will establish some conventions and look at some simple
orbifolds.
The spectrum of the compact free boson at radius R (we set α′ = 1 so that in our
√
conventions the self-dual radius is R = α′ = 1) consists of lowest weight states with fixed
momentum and winding, labeled by integers x and y, |x, yi, and (U(1) current algebra)
descendants obtained from these states by acting on them with left- and right-moving
em represent the number of α−m and α
raising operators α−m , α
e−m . If we let Nm and N
em
operators respectively, then a general state is

∞
E
Y
em
Nm N
e
e
|x, yi ,
α
e−m
α−m
x, y; {N1, N2 , · · · }, {N1 , N2 , · · · } = Cx,y;N,
~e
~ N

(3.50)

m=1

where C
that C

~e
~ N
x,y;N,

is a normalization constant whose precise form we won’t need except to note

The physical Hilbert space only includes states with a finite
P
e
number of raising operators, i.e. with ∞
m=1 (Nm + Nm ) < ∞. The corresponding partition
~e
~ N
−x,−y;N,

=C

~e .
~ N
x,y;N,

function is then

ZR (τ, τ̄ ) = |η(τ )|−2

X

1 x

2

1 x

2

q 4 ( R +yR) q̄ 4 ( R −yR) .

(3.51)

x,y∈Z

For R 6= 1, this theory has a (U(1) × U(1)) ⋊ Z2 global symmetry group. The group’s

elements can be labeled by two periodic angles 0 ≤ α, β ≤ 2π and a discrete parameter
χ = ±1. Then the group multiplication and inversion are given by
(α1 , β1 ; χ1 ) · (α2 , β2 ; χ2 ) = (α2 + α1 χ2 , β2 + β1 χ2 ; χ1 χ2 ) ,

(α, β; χ)−1 = (−χα, −χβ; χ) .

(3.52)

The action on states is
~e
~ N
(α, β; χ) · x, y; N,



P∞

=χ

m=1

~e
(Nm +Nem ) eiαx+iβy χx, χy; N,
~ N



.

(3.53)

The χ = +1 elements act as translations (and dual translations), while the χ = −1 elements

are reflections.

We can easily write an expression for the trace over the Hilbert space with a group

16

element inserted,
Z1,(α,β;1) (τ, τ̄ ) = |η(τ )|−2
Z1,(α,β;−1) (τ, τ̄ ) =

1
|q|− 12

X

1 x

2

1 x

2

eiαx+iβy q 4 ( R +yR) q̄ 4 ( R −yR) ,

x,y∈Z
∞
Y

1
|1 + q n |2
n=1

!

=

(3.54)

2η(τ )
.
θ2 (τ )

(3.55)

In the latter case, the trace has localized onto states with x = y = 0.
Let us now look at orbifolds generated by elements of order two (switching to additive
notation for the group elements). If our generator is a reflection (and all reflections are
conjugate to each other), then we have
Z0,0 (τ, τ̄ ) = |η(τ )|−2
Z0,1 (τ, τ̄ ) =

X

1 x

2

1 x

2

q 4 ( R +yR) q̄ 4 ( R −yR) ,

(3.56)

x,y∈Z

2η(τ )
,
θ2 (τ )

(3.57)

2η(τ )
,
θ4 (τ )
2η(τ )
Z1,1 (τ, τ̄ ) = Z1,0 (τ − 1, τ̄ − 1) =
.
θ3 (τ )

(3.58)

Z1,0 (τ, τ̄ ) = Z0,1 (−1/τ, −1/τ̄ ) =

(3.59)

Here, the traditional level-matching is satisfied, so there is no more to the story. We have
recovered the partition function for the standard boson reflection orbifold,
S 1 /Z2

ZR

(τ, τ̄ ) =

1
1
(Z0,0 + Z0,1 ) + (Z1,0 + Z1,1 ) .
2
2

(3.60)

Among the translation elements, there are three possible elements of order two. Let’s
look at each of them in turn.
(i) g = (π, 0; 1)
From (3.54), we have
Z0,1 (τ, τ̄ ) = |η(τ )|−2

X

1 x

2

1 x

2

(−1)x q 4 ( R +yR) q̄ 4 ( R −yR) .

(3.61)

x,y∈Z

Our procedure then gives (after performing a pair of Poisson resummations)
Z1,0 (τ, τ̄ ) = Z0,1 (−1/τ, −1/τ̄ ) = |η(τ )|−2

17

X

x,y∈Z

1

2

1

2

q 4 ( R +(y− 2 )R) q̄ 4 ( R −(y− 2 )R) ,
x

1

x

1

(3.62)

and
Z1,1 (τ, τ̄ ) = Z1,0 (τ − 1, τ̄ − 1) = |η(τ )|−2

X

1

2

1

2

(−1)x q 4 ( R +(y− 2 )R) q̄ 4 ( R −(y− 2 )R) .
x

1

x

1

x,y∈Z

(3.63)

Combining these results, the untwisted and twisted sector partition functions become
(standard level matching is fine in this case)
Z0 (τ, τ̄ ) = |η(τ )|

−2

= |η(τ )|−2

X 1 + (−1)x 1 x +yR 2 1 x −yR 2
) q̄ 4 ( R
)
q 4(R
2
x,y∈Z
X

q

1
4



2

2
1
k
k
+yR
−yR
R/2
4 R/2

q̄

,

(3.64)

k,y∈Z

X 1 + (−1)x 1 x +(y− 1 )R 2 1 x −(y− 1 )R 2
) q̄ 4 ( R
)
2
2
q 4(R
2
x,y∈Z
X 1 k +(y− 1 )R 2 1 k −(y− 1 )R 2
) q̄ 4 ( R/2
) ,
2
2
= |η(τ )|−2
q 4 ( R/2

Z1 (τ, τ̄ ) = |η(τ )|−2

(3.65)
(3.66)

k,y∈Z

where in each sector we end up with a projection onto terms with x even, and so
in the second line we have rewritten things in terms of k = x/2. The two sectors
now look identical except that y in the untwisted sector is replaced by (y − 12 ) in the
twisted sector, so when we build the full partition function we simply have a sum over
all half integer values, and so we can write
Z(τ, τ̄ ) = Z0 (τ, τ̄ ) + Z1 (τ, τ̄ ) = |η(τ )|−2

X

1 k
1 k
ℓR
ℓR
q 4 ( R/2 + 2 ) q̄ 4 ( R/2 − 2 ) ,
2

2

(3.67)

k,ℓ∈Z

which is simply the partition function at radius R′ = R/2. In other words, this
orbifold is the standard one which identifies the circle under a half-period translation,
and takes us from the theory at radius R to the theory at R/2. Of course there is no
problem with implementing this construction completely using the usual procedure
discussed in section 2. We have simply shown that it can also be recovered using our
procedure.
(ii) g = (0, π; 1)
This case proceeds almost identically, with the roles of momentum and winding reversed (it is the T-dual of the previous case). The result is the partition function at
radius R′ = 2R.
18

(iii) g = (π, π; 1)
Finally, we turn to the most non-standard case. From (3.54),
Z0,1 (τ, τ̄ ) = |η(τ )|−2

X

1 x

2

1 x

2

(−1)x+y q 4 ( R +yR) q̄ 4 ( R −yR) .

(3.68)

x,y∈Z

The untwisted sector partition function simply involves a projection onto invariant
states, i.e. states for which x + y is even.
Again, we easily obtain, by performing Poisson resummations
Z1,0 (τ, τ̄ ) = Z0,1 (−1/τ, −1/τ̄ ) = |η(τ )|−2

X

q

1
4



x− 1
2
R


2
2
1 x− 12
1
+(y− 21 )R
−(y−
)R
R
2
4

q̄

.

x,y∈Z

(3.69)

This result does not obey level-matching; it is not invariant under τ → τ + 2, though
it is invariant under τ → τ + 4. We find the following partial traces in this sector,

Z1,1 (τ, τ̄ ) = Z1,0 (τ − 1, τ̄ − 1)


2
2
1 x− 12
1 x− 12
1
1
X
+(y−
)R
−(y−
)R
2
2
q̄ 4 R
(3.70)
= −i |η(τ )|−2
(−1)x+y q 4 R
x,y∈Z

Z1,2 (τ, τ̄ ) = Z1,0 (τ + 2, τ̄ + 2) = −Z1,0 (τ, τ̄ ),

(3.71)

Z1,3 (τ, τ̄ ) = Z1,0 (τ + 1, τ̄ + 1) = −Z1,1 (τ, τ̄ ).

(3.72)

If we write out the full twisted sector partition function, we find that everything
cancels,
Z1 (τ, τ̄ ) =

1
(Z1,0 (τ, τ̄ ) + Z1,1 (τ, τ̄ ) + Z1,2 (τ, τ̄ ) + Z1,3 (τ, τ̄ )) = 0.
4

(3.73)

This sector is empty!
How about the g 2 -twisted sector? Although g 2 acts trivially in the parent theory, we
will find that this sector is not identical to the untwisted sector. Our proposal gives
Z2,0 (τ, τ̄ ) = Z0,2 (−1/τ, −1/τ̄ ) = Z0,0 (τ, τ̄ ),

(3.74)

Z2,1 (τ, τ̄ ) = Z1,−2 (−1/τ, −1/τ̄ ) = −Z0,1 (τ, τ̄ ),

(3.75)

Z2,2 (τ, τ̄ ) = Z2,0 (τ − 1, τ̄ − 1) = Z0,0 (τ, τ̄ ),

(3.76)

Z2,3 (τ, τ̄ ) = Z1,2 (−1/τ, −1/τ̄ ) = −Z0,1 (τ, τ̄ ).

(3.77)

19

Adding things together in this sector, we find
Z2 (τ, τ̄ ) =

1
(Z2,0 (τ, τ̄ ) + Z2,1 (τ, τ̄ ) + Z2,2 (τ, τ̄ ) + Z2,3 (τ, τ̄ ))
4
1
= (Z0,0 (τ, τ̄ ) − Z0,1 (τ, τ̄ )) . (3.78)
2

This sector contains the states of the parent theory with a projection onto x + y odd!
Combined with the untwisted sector, which projected onto states with x + y even,
these two sectors contain precisely the states of the original parent theory.
The g 3 -twisted sector works out in the same fashion as the g-twisted sector, and
the projection kills everything. And the g 4-twisted sector becomes again identical
to the untwisted sector. This is an example for which the symmetry is anomalous,
represented by the nontrivial element in H 3 (Z2 , U(1)) ∼
= Z2 [6, 12, 15]. This element
of course has order two, and so the prescription of (3.15) says that we should pick
K = 2 and put
ZG =

3
X

Zm = Z0 + Z2 = ZR ,

(3.79)

m=0

and we find we have recovered the partition function for the original parent theory.
3.8

Cyclic permutation orbifold

Let’s give one more example of a non-anomalous Z2 symmetry, to further illustrate our
procedure. Consider any CFT T , and construct the tensor product of it with itself, T ⊗ T .
The Hilbert space of states is simply the tensor product of two copies of the T Hilbert

space, H = HT ⊗ HT , and there is a simple Z2 exchange symmetry which sends |ψ1 i ⊗ |ψ2 i
to |ψ2 i ⊗ |ψ1 i. We can easily construct the untwisted sector partial traces,
Z0,0 (τ, τ̄ ) = ZT (τ, τ̄ )2 ,

Z0,1 (τ, τ̄ ) = ZT (2τ, 2τ̄ ).

(3.80)

Here Z0,1 is computed by observing that the only states that survive the trace with the
exchange symmetry inserted are the states of the form |ψi ⊗ |ψi, and these contribute a
total weight of twice the weight of |ψi.

We can get the twisted sector partial traces by taking modular orbits,
Z1,0 (τ, τ̄ ) = Z0,1 (−1/τ, −1/τ̄ ) = ZT (−2/τ, −2/τ̄ ) = ZT (τ /2, τ̄ /2),
20

(3.81)

where in the final equality we used the modular invariance of ZT . This Z1,0 obeys levelmatching, Z1,0 (τ + 2, τ̄ + 2) = Z1,0 (τ, τ̄ ), showing that the anomaly is vanishing. We can
then compute
Z1,1 (τ, τ̄ ) = Z1,0 (τ + 1, τ̄ + 1) = ZT ( τ +1
, τ̄ +1
).
2
2

(3.82)

In total then, we find that the untwisted sector is given by the exchange invariant states,
i.e.

1
1
Z0 (τ, τ̄ ) = ZT (τ, τ̄ )2 + ZT (2τ, 2τ̄ ),
2
2

(3.83)

and the twisted sector is
Z1 (τ, τ̄ ) =


1
ZT ( τ2 , τ̄2 ) + ZT ( τ +1
, τ̄ +1
) .
2
2
2

(3.84)

These results match those found, for instance, in [16].

4

Partial traces from insertion of topological defects

A more modern version of our story is to associate each element g of a symmetry group G
with a topological defect line (TDL) Lg (we will largely use the notation of [17]). These

defects can join at junctions and can fuse together, with the fusion obeying the group
multiplication law. Laying down a network of these defect lines and junctions is equivalent
to coupling the theory to a background gauge field for the symmetry group G. In order for
a physical result to only depend on the choice of a flat background connection, different
networks with the same topology should give the same result; in particular the two different
ways of resolving a degree-four junction into a pair of trivalent junctions should agree.
These different ways are classified by an ’t Hooft anomaly measured by a class in the
group cohomology H 3 (G, U(1)). Then gauging, or orbifolding, our theory by G amounts to
summing over all possible background gauge field configurations, i.e. all possible networks
of defects. One usually declares that this is only a sensible procedure when the group is
anomaly free.
So again the question arises of how this works if we find an anomaly free extension of
our symmetry group. In particular, we will again take a ZN symmetry and then promote
it to a Z symmetry. We will propose a sense in which the Z symmetry can be sensibly
gauged.

21

τ′
τ
g

g

(a)
(b)

Figure 1: The untwisted sector partial traces Z1,g are given by inserting a group element
in the trace. If we think of the action of the group element as being implemented by a
topological defect wrapping the spatial circle at a fixed time, then Figure (a) represents
Z1,g . To get Zg,1 , we perform a τ → τ ′ = −1/τ modular transformation, resulting in a
defect wrapping the time circle, as in Figure (b).
4.1

Modular transformations

First we need to understand how our modular orbits prescription works in the language of
TDLs. To start with, a TDL labeled with a symmetry g that stretches across the spatial
cycle of a torus represents an insertion of (the representative of) g into the trace, i.e. the left
of Figure 1 represents the untwisted sector partial trace Z1,g (τ, τ̄ ). A τ → −1/τ modular

transformation swaps the spatial and temporal cycles, resulting in the right of Figure 1,
representing the twisted sector partial trace Zg,1 (τ, τ̄ ).
By taking the full set of modular transformations, we can start with untwisted sector

partial traces Z1,gr (τ, τ̄ ) and generate any partial trace Zgm ,gn for any m, n ∈ Z. Some

examples of how this works are shown in Figure 2. If G is cyclic, generated by g, and if

we extend this to a Z action on our theory, then we get a unique picture for Zm,n (τ, τ̄ ) for
each m, n ∈ Z in which we have only continuous g lines which do not cross each other.
4.2

Anomalies and partial trace periodicities

In this language, a network of these TDLs represents the coupling of the theory to a background gauge field (i.e. a flat connection) for the global symmetry group G. If we wanted
to gauge G, we would want to formally sum over all possible background configurations.
In order to do this consistently, preserving the topological nature of our defect lines, we
need to be able to rearrange our network of lines [18]. In particular, if four TDLs come
22

τ′ = τ − 2

τ

τ′

g

g

(b)

(a)

τ

τ

′

g

g

(c)

(d)

Figure 2: In figure (a) we have a representation of Zg,1 (τ, τ̄ ), while the dashed lines indicate
an alternative fundamental domain corresponding to τ ′ = τ − 2. In (b) we focus on this
new fundamental domain, paying attention to where the topological defect labeled by g
is located. By deforming this picture we arrive at figure (c), which we recognize as a
representation of Zg,g2 . For the group Z generated by an element g, any partial trace can
be represented uniquely as such a diagram with g lines that never cross. For example, Z2,3
is illustrated.
together in a junction (and the product of the four group elements must be the identity),
then there are two ways to resolve this into a pair of trivalent junctions, and these two ways
must be equivalent (up to a junction-dependent phase rotation). The obstruction to this is
measured by an element of H 3 (G, U(1)), the ’t Hooft anomaly associated to G. It can be
captured by a phase relating the two different resolutions, as in Figure 3.
For finite cyclic groups, the third cohomology is given by H 3 (ZN , U(1)) ∼
= ZN . The
possible elements labeled by 0 ≤ k < N have representatives given by [19]
θ(a, b, c) = 2πka (b + c − hb + ci) /N 2 ,

(4.85)

where hxi is the mod N representative of x in the range 0 ≤ x < N (so in particular it

means that θ is a multiple of 2π/N).
In the case that G ∼
= ZN , with generator g (with anomaly given by the element k ∈
3
H (ZN , U(1)) ∼
= ZN ), then we can always replace a g N line with an identity line which
can be erased. On the other hand, we can always uniquely generate a candidate Zm,n
23

g1

g4

g1 g2

g2

g1

g2 g3

=

g3

g4

×eiθ(g1 ,g2 ,g3)

g2

(a)

g3
(b)

Figure 3: Three TDLs can be joined at a trivalent junction. In full generality, an ordering
should be specified, with the incoming lines listed in clockwork order; we mark the last line
listed with a ×, following [17]. There are two ways of joining four TDLs (with g1 g2 g3 g4 = 1)
using trivalent junctions, and these can be related by a phase θ(g1 , g2 , g3). Inequivalent
phases are classified by H 3 (G, U(1)). If there is a representative for which the phase is
trivial, then we say that the symmetry is non-anomalous. Otherwise, the anomaly is given
by the class in H 3 (G, U(1)).
partial trace by applying modular transformations to the untwisted sector. What then is
the relation between partial traces whose subscripts differ by multiples of N? It turns out
that these will be related by a phase γ which will be an Nth root of unity. A general
argument for this is given in section 4.4 of [17], but it can also be obtained by explicit
manipulations. As an example, in Figure 4, we exhibit steps that can be used relate Z1,0
with Z1,N . The net phase that accumulates through these steps is
!
n−1
X
γ = exp i
θ(g −1 , g j , g) = exp (−2πik/N) ,

(4.86)

j=1

where we have used the fact that (for the representative (4.85) above) θ(−1, j, 1) = 0 for
j < N − 1, and θ(−1, N − 1, 1) = −2πk/N. Similar manipulations can show that shifting a

partial trace subscript by a multiple of N will always multiply it by an Nth root of unity,
and thus also that the partial traces are N 2 -periodic in their subscripts.

24

..
.

n−1

..
.

n−1

..
.

n−2

g2
g
(a)

g2

..
.

n−3

g

g2
g

(d)

(c)

(b)

..
.

n−3

g

g

g n g n−1

3

g
(e)

g
(f)

Figure 4: We start with the Zg,gn partial trace in (a). In (b) we draw a dashed identity
line between two g lines. Going to (c), we use a crossing relation, which results in a g 2
line connecting the two junctions, and which multiplies the evaluation of the diagram by
−1
a phase eiθ(g ,g,g), where θ ∈ H 3 (G, U(1)) represents the anomaly. From (c) to (d) we
simply deform the picture, sliding the junction on the right around the cycle on the torus.
−1 2
From (d) to (e) we perform another crossing, introducing an additional factor eiθ(g ,g ,g) .
Repeating the sliding and crossing steps until all the horizontalPg lines have been absorbed
n−1
θ(g −1, g j , g)).
we get to (f). The total phase from the crossings is γ = exp(i j=1

25

5

Continuous symmetries

5.1

Flavored partition function

In the case that our theory has a continuous symmetry, we can introduce extra machinery
which will ultimately simplify orbifold calculations. Assuming we can express the partition
function as a trace over states in the theory, define the flavored partition function as
h
i
c
c̄
Z f (τ, τ̄ ; zL , zR ) = Tr q L0 − 24 q̄ L̄0 − 24 e2πizL JL e−2πizR JR ,

(5.87)

where JL and JR are the zero modes of left- and right-moving currents that generate continuous symmetries of our theory. From path integral arguments, Z f is expected to have a
theory-independent modular transformation law [20],

Z

f



aτ + b aτ̄ + b
,
; zL , zR
cτ + d cτ̄ + d



= eπik(c(cτ +d)zL −c(cτ̄ +d)zR ) Z f (τ, τ̄ ; (cτ + d)zL , (cτ̄ + d)zR ).
2

2

(5.88)

Here k is a constant that will depend on our chosen conventions for normalization of
the currents. It shows up in the current-current OPE as
k
+··· ,
w2

J(w)J(0) ∼

(5.89)

or equivalently in the mode algebra, [Jm , Jn ] = kmδm+n,0 , where Jm =

H

dw m
z J(w)
2πi

are the

modes of the current J(w) (and similarly for the right-moving current), and where JL is
simply J0 . For abelian currents (which is all we are presently concerned with), the number
k can always be rescaled by changing the definitions of the currents. The formulas above
won’t change provided we also rescale zL and zR ; only the combination kz 2 is physical.
For the free boson (using the conventions of [13] with α′ = 1), if we want to identify
JL with pL and JR with pR , then we would need to take J(z) ∼ 2i∂X(z), and from the

JJ OPE we would read off k = 2. Similarly identifying JR with pR , the flavored partition
function takes the form
ZR (τ, τ̄ ; zL , zR ) = |η(τ )|

−2

X

yLpL yRpR q

p2
L
4

q̄

p2
R
4

(5.90)

n,w∈Z

with y = e2πiz . One can explicitly verify (5.88) for the boson by Poisson resummation,
which in turn verifies it for any set of U(1) currents [21], which will be the main objects
26

of interest in this paper. It is the existence of a reliable, known behavior under modular
transformations that will allow flavored partition functions to aid our calculation of orbifold
partition functions.
5.2

Implementing the method of modular orbits

If, for some specific αL , αR , the element g = exp[2πi(αL JL − αR JR )] generates a cyclic

symmetry group of our states, we can easily compute the partition function resulting
from orbifolding by g. The untwisted partition function with r insertions of g is given
by Z1,r (τ, τ̄ ) = Z f (τ, τ̄ ; rαL , rαR ). The modular transformation (5.88) of Z f then allows
us to calculate all partial traces in terms of the flavored partition function; this combined
with (2.7) gives Zm,n as
(5.91)
Zm,n (τ, τ̄ ) = eπik(m (τ αL −τ̄ αR )−mn(αL −αR )) Z f (τ, τ̄ ; (n − mτ )αL , (n − mτ̄ )αR )
X
km
c
km2 2
c̄
km2 2
2
2
e2πin[αL Qi −αR Q̄i − 2 (αL −αR )] q hi−mαL Qi + 2 αL − 24 q̄ h̄i−mαR Q̄i + 2 αR − 24 ,
=
2

2

2

2

2

states i

where Qi and Q̄i are the eigenvalues of JL and JR on the state i of the parent theory.
Using (5.91), it’s now straightforward to write the partition function as a sum over the
states of the parent theory. The result is that the partition function in the m-twisted sector
should be
Zm =

2
km2 2
c
c̄
1 X 2πin[αL Qi −αR Q̄i− km
(α2L −α2R )] hi −mαL Qi + km
α2L − 24
2
2
e
q̄ h̄i −mαR Q̄i + 2 αR − 24 . (5.92)
q
|Z| n∈Z

states i

If g is in fact order N in the parent theory, then as shown in section 4.2, the partial
traces will actually be at worst N 2 periodic. In this case, then we can dispense with the
infinite |Z| constant in (5.92) and write
2

N −1
1 X X 2πin[αL Qi −αR Q̄i− km (α2L −α2R )] hi −mαL Qi + km2 α2L − c h̄i −mαR Q̄i + km2 α2R − c̄
2
2
24 q̄
2
24 .
Zm = 2
e
q
N n=0 states i
(5.93)

5.3

Interpretation as a modified group projection in twisted sectors

Note that the term
1 X 2πin[αL JL −αR JR − km (α2L −α2R )]
2
e
|Z| n∈Z

2

N −1
1 X 2πin[αL JL −αR JR − km (α2L −α2R )]
2
(5.94)
e
N 2 n=0

or
27

in (5.92) has the form of a projection operator, forcing
αL J L − αR J R −

km 2
2
(αL − αR
)∈Z
2

(5.95)

on all states. It is this projection that will keep our resultant theory modular invariant; it
is the analog of level matching in the usual orbifold prescription. To better understand its
effect on states, we can rewrite the above condition as (where ρ(g) represents the action of
g on the Hilbert space)
k

2

2

e2πi(αL JL −αR JR ) |ψi = ρ(g) |ψi = e2πim 2 (αL −αR ) |ψi .

(5.96)

2
When αL2 = αR
, this has the familiar role of projecting onto αL JL −αR JR ∈ Z i.e. projecting

2
onto group-invariant states. When αL2 6= αR
, as is generically the case for asymmetric

actions, the projection gets modified. There is now a sector-dependent phase which tells
us how the twisted sectors match up with each other. Furthermore, as we will see below,
it will tell us the lowest power of g for which the twisted sectors are generically non-empty,
indicating that we have effectively quotiented by this power of g, which may now act

symmetrically on the parent theory. In this way we may find that our asymmetric orbifold
was equivalent to a symmetric one.
With this in mind, we can write the partition traces in the individual twisted sectors as
Zm =

X

q hi −mαL JL +

c
km2 2
αL − 24
2

q̄ h̄i −mαR JR +

km2 2
c̄
αR − 24
2

.

(5.97)

states
satisfying
(5.95)

6
6.1

Free boson examples
Conventions

Let’s apply these results to the specific case of the compact free boson, with the conventions
introduced in section 3.7. That theory has (anti-)holomorphic U(1) currents with zero mode
pL,R , so a natural choice would then be JL = pL , JR = pR . As previously determined, our
conventions dictate that k = 2 for this choice of currents. Since the weights of states in
that theory are also given in terms of momenta, our expression (5.97) for Zm simplifies to
Zm = |η|−2

X

1

2

1

2

q 4 (pL −2mαL ) q̄ 4 (pR −2mαR ) .

states
satisfying
(5.95)

28

(6.98)

We’ll express the momenta in the usual way, pL,R = x/R ± yR. We would like to regard

our group elements g = exp[2πi(αL JL − αR JR )] as being built from the integers x and y.

Then a natural choice for α will be


1
β
αL =
+ γR ,
2N R

1
αR =
2N



β
− γR
R



(6.99)

where N ∈ Z>0 , (β, γ) ∈ (Z)2 and we stipulate that gcd(β, γ, N) = 1. This choice gives us
the group action

g = e2πi(βy+γx)/N

(6.100)

which means we can build both symmetric and asymmetric ZN actions out of arbitrary
combinations of x and y at any radius. Given these choices, the partition traces (5.97) are
X 1 1
2 1 1
2
mβ
mγ
mβ
mγ
(6.101)
Zm = |η|−2
q 4 [ R (x− N )+R(y− N )] q̄ 4 [ R (x− N )−R(y− N )]

where the sum is over integers x and y satisfying

βy + γx mβγ
−
∈ Z.
N
N2

(6.102)

In this language, symmetric actions correspond to the case β = 0, and the case γ = 0
corresponds to the T-dual of a symmetric action. These are shifts by the coordinate or
dual coordinate, respectively, on the circle. Note again that it is precisely this case in
which the condition (6.102) becomes group invariance (rather than covariance).
In order to obtain the full partition function we need to know which values of m to
sum over. The default assumption for a symmetric orbifold is that we would take m ∈ ZN ,

perform the sum and get a good result. However, that may not be compatible with modular

invariance. Luckily, the projection can guide us. (6.102) implies that for a sector to be
nonempty, we need values of x and y satisfying
γx + βy −

mβγ
∈ NZ.
N

(6.103)

A necessary condition is then that m be a multiple of N/gcd(βγ, N). At the point that
m becomes a multiple of N 2 /gcd(βγ, N), the term mβγ/N is a multiple of N and can be
absorbed into the right-hand side, i.e. the corresponding solutions for x and y are exactly
the same as in the untwisted sector m = 0. Similar arguments show that there are at most
N values of m that produce distinct sets of solutions x and y, and we should take
m∈

N
ZN .
gcd(βγ, N)
29

(6.104)

Incorporating this into the partition function allows us to be explicit about our sum. With
ρ ≡ gcd(βγ, N), the full orbifold partition function will be
|η|

X

−2

m′ ∈ZN
x,y∈Z2

q

1
4

h 

′ 
′ i2
1
x− mρ β +R y− mρ γ
R

q̄

1
4

h 

′ 
′ i2
1
x− mρ β −R y− mρ γ
R

,

(6.105)

′

γx+βy− γβm
∈N Z
ρ

where we now sum over m′ = ρm/N.
6.2

Examples

6.2.1

Single Bosons

Let’s check that this reproduces expected results. We will recover the results of section 3.7
by identifying the relevant values of β, γ and N and appealing to (6.105). First take the
very simple case N = 2, β = 0, γ = 1; this is the Z2 coordinate shift which led to (3.67).
(6.105) is then
|η|

−2

X

2

2

(y− m2 )] q̄ 14 [ Rx −R(y− m2 )] = |η|−2

q [

1 x
+R
4 R

m∈Z2
y∈Z
x∈2Z

X

q

1
4

h

′ i2
2x′
+ y 2R
R

q̄

1
4

h

′ i2
2x′
− y 2R
R

(6.106)

x′ ,y ′ ∈Z2

which is, as we would expect, the same theory at a radius R/2.
The case N = 2, β = γ = 1 corresponds to the group element which was written as
g = (π, π; 1) in section 3.7. This is an asymmetric shift, given by a combination of the
coordinate and its dual. Our flavored formalism immediately yields the result
|η|−2

X

2

q 4 [ R (x−m)+R(y−m)] q̄ 4 [ R (x−m)−R(y−m)]
1

1

m∈Z2
x,y∈Z2
x+y−m∈2Z

= |η|−2

1

1

X

2

2

2

q 4 [ R (x+y+m)+R(x−y)] q̄ 4 [ R (x+y+m)−R(x−y)] . (6.107)
1

1

1

1

x,y∈Z2
m∈Z2

We note that the untwisted (m = 0) sector contains states with R and 1/R coefficients
of like parity, while the twisted (m = 1) sector contains those with opposite parity. In
total we have the same set of states, so the orbifold acted trivially5 . If we instead took
5

Of course in general we can’t conclude that the parent theory and the orbifold theory are the same
just because they have the same spectrum; we would need to know and compare their OPEs as well. But
for the case of c = 1, since we know the full classification of consistent theories we know that knowledge of
the spectrum is sufficient to reach this conclusion.

30

N = 4, β = 2, γ = 1, we would get the theory back at radius R/2. Note, then, that both
of these attempts at asymmetric orbifolds produced the same result as orbifolding by g 2
rather than g. Does this result generalize?
We can check by slightly rearranging (6.105). Write m = m′ + kρ where ρ = gcd(N, βγ),
m′ is valued in Zρ and k is valued in ZN/ρ . The partition function is then
|η|−2

X

β

γ

2

β

γ

2

q 4 [ R (x− ρ (m +ρk))+R(y− ρ (m +ρk))] q̄ 4 [ R (x− ρ (m +ρk))−R(y− ρ (m +ρk))] .
1

1

′

′

1

1

′

′

m′ ∈Zρ
k∈ZN/ρ
x,y∈Z2
γx+βy− γβ
(m′ +ρk)∈N Z
ρ

(6.108)
Shifting x → x + βk and y → y + γk gives
|η|

X

−2

q

1
4

h 
1
R


′ 
′ i2
x− mρ β +R y− mρ γ

q̄

1
4

h 
1
R


′ 
′ i2
x− mρ β −R y− mρ γ

.

(6.109)

m′ ∈Zρ
k∈ZN/ρ
x,y∈Z2
′

γx+βy− m ργβ +kγβ∈N Z

Here k now appears only in the constraint, and can be reinterpreted as follows. Since for
any integers x and y satisfying
m′ γβ
∈ ρZ
ρ

(6.110)

m′ γβ
+ kγβ ∈ NZ,
ρ

(6.111)

γx + βy −
we can uniquely choose k ∈ ZN/ρ so that
γx + βy −

the partition function above can be simplified as
|η|

−2

X

q

1
4

h

1
R



′ 
′ i2
x− mρ β +R y− mρ γ

q̄

1
4

h

1
R



′ 
′ i2
x− mρ β −R y− mρ γ

,

(6.112)

m′ ∈Zρ
x,y∈Z2
′

γx+βy− m ργβ ∈ρZ

which is manifestly equivalent to the orbifold by the group generated by g N/ρ . As promised,
this tells us the lowest power of g by which we can effectively orbifold.
As an example, consider T-duality of the boson, which is equivalent to an asymmetric
reflection. Recall that, at the self-dual radius, this reflection is equivalent (by conjugation)
to a shift [22], so we can realize a T-duality orbifold of the self-dual compact free boson
31

as our earlier orbifold example with N = 4, β = γ = 1. We have already seen that this
orbifold acts trivially – thinking of the projection in the language of (5.96), we see that the
T-duality operator is generically of order 16 in the twisted sectors. This is in line with the
observations of Harvey and Moore in [12], where the g 4 -twisted sector of such an orbifold
is shown not to match the untwisted sector, while the g 16 -twisted sector does.
6.2.2

Two Compact Bosons

The case of a single boson is limiting. The power of this flavored formalism is that it
readily encompasses both symmetric and asymmetric orbifolds, but as we’ve just checked,
an asymmetric orbifold of a single compact boson is effectively equivalent to a symmetric
orbifold. Luckily, our analysis extends to a collection of bosons. In order to keep things
manageable we’ll work with 2, but the generalization to more is straightforward.
We’ll use the same notation as above, now with subscripts distinguishing the bosons.
2 y2
1 y1
+ γ2 x2N+β
)]. What
For instance, the group element now reads g = g1 g2 = exp[2πi( γ1 x1N+β
1
2

twisted sectors should appear in this theory? Following the line of analysis that led to
(6.104) for the single boson, we find that m should be taken as
m∈

gcd(N22 β1 γ1

N1 N2 gcd(N1 , N2 )
ZN N /gcd(N1 ,N2 ) .
+ N12 β2 γ2 , N1 N2 gcd(N1 , N2 )) 1 2

(6.113)

This is qualitatively the result that we expect – the orbifold by g1 g2 should indeed have
N1 N2 /gcd(N1 , N2 ) sectors.6
Now that our target space is a two-torus, we can orbifold by asymmetric Z2 actions and
find states satisfying the projection in all sectors, avoiding the empty sectors of the single
boson. As the simplest example, N1 = N2 = 2, β1 = γ1 = β2 = γ2 = 1 gives
|η|−4

X

1

q4

h

1
R1

(x1 − m2 )+R1 (y1 − m2 )

i2

+ 14

h

1
R2

(x2 − m2 )+R2 (y2 − m2 )

i2

m∈Z2
x1 ,y1 ,x2 ,y2 ∈Z4
x1 +y1 +x2 +y2 =m mod 2

q̄

1
4

h

1
R1

(x1 − m2 )−R1 (y1 − m2 )

i2

+ 41

h

1
R2

i2

(x2 − m2 )−R2 (y2 − m2 ) . (6.114)

We can see that this must be generically nontrivial. In the pre-orbifold theory, the total left
and right momenta squared (i.e. (pL,R )21 + (pL,R )22 ) are fractioned in units of lcm(R12 , R22 )−1 .
From the orbifold partition function we see that the new squared momenta come in units of
For instance, if g is order 2 on the first boson and g ′ is order 4 on the second, their product should be
order 4 and thus we expect 4 total (3 twisted + 1 untwisted) sectors.
6

32

lcm(4R12 , 4R22 )−1 . However, the resulting partition function is symmetric (this can be seen
by taking y1 → −y1 + m, y2 → −y2 + m).

As a point of comparison, consider Aoki, D’Hoker and Phong [6]. They construct

shift orbifolds by the asymmetric actions sR and s2R which, in our language, correspond to
N = 4, γ = 1, β = −1 and N = 2, γ = 1, β = −1, respectively. In the case of orbifolds of

multiple bosons by sR (acting on each), they identify that “to properly restore the order
of sR to be 4 as it was in the untwisted sector, the dimension of the torus [...] must be
divisible by 4.” This matches our notion that, as the action of sR is generically of order
16 in the twisted sectors, we would need 4 bosons to guarantee that all sectors remain
non-empty. However, in order to maintain modular invariance, Aoki, D’Hoker and Phong
opt for the requirement of group invariance in all sectors. This means that they consider
only multiples of 16 bosons in their sR orbifolds, and multiples of 4 for s2R . While such
a requirement guarantees them modular invariance, they miss out on models like (6.114)
above (which is T-dual to an orbifold by s2R ), which utilize group covariance in twisted
sectors.
6.2.3

Adding a Noncompact Boson

Let’s see what this setup gives when we couple our theory to a noncompact free boson (this
will be an example of the fibered CFTs [14] discussed in section 3.5). This does not obey
our initial assumption that the theory had a discrete spectrum, so we’ll start the analysis
anew. To begin with, our partition function is
Z ∞
h
i
p2
c
c̄
−2
Z = |η|
dp ρ0 (q q̄) 2 Tr q L0 − 24 q̄ L̄0 − 24 ,

(6.115)

−∞

where the trace is over the compact boson Hilbert space, the integral is over the noncompact boson momentum, and where ρ0 is a constant (which is, strictly speaking infinite, as
discussed in section 3.4)
We’ll take the group element to be
g = e2πi(Lp+αL JL −αR JR )

(6.116)

which generates an infinite-order shift on the noncompact boson and acts as some (possibly
asymmetric) translation on the internal theory. Inserting the group element and doing the
integration gives

−πL2 r 2
ρ0
Z0,r (τ ) = √ |η|−2 e τ2 Z f (τ, rαL , rαR ).
τ2

33

(6.117)

Once again, modular transformations give
−πL2 |n−mτ |2
ρ0
2
2
2
2
2
τ2
Zm,n (τ ) = √ |η|−2e
eπik(m (τ αL −τ̄ αR )−mn(αL −αR )) Z f (τ, (n − mτ )αL , (n − mτ̄ )αR ).
τ2
(6.118)

where we see a disappearance of any r dependence, as before. Writing out all of the
exponentials and using Poisson resummation on n gives the full partition function as
|η|−2
× q̄

X

1

q4

h
4hi −2m(αL JL +αR JR )+m2 k(α2L +α2R )+m2 L2 +

m,n∈Z
states i
h
1
4h̄i −2m(αL JL +αR JR )+m2 k(α2L +α2R )+m2 L2 +
4

1
L2

1
L2

2

(α2L −α2R )]
[n−(αL JL −αR JR )+ km
2

(α2L −α2R )]
[n−(αL JL−αR JR )+ km
2

2

i
c
−2mn − 24

i
c̄
+2mn − 24

. (6.119)

This time around we didn’t have to impose any projection. The fact that we coupled the
action on the internal theory with a Z on the noncompact boson means that all of the
sectors can be nonempty.
Additionally, we can look at the limit L → 0 of this theory to make sure it’s consistent

with our previous results. Indeed, looking at the 1/L2 term and imagining taking L →
0, if its coefficient is nonzero, those states will become infinitely massive and decouple;

requiring that the coefficient vanish will give us the projection (5.95). The easiest way to
see what happens to the overall partition function in this limit is to look at (6.118), the
partition function prior to resumming on n. Taking L → 0 in that equation (then summing

appropriately) clearly gives the noncompact free boson times the Z orbifold of the internal
theory from section 5.2, up to normalization. Note the fact that the normalizing constant
ρ0 is linear in L, so formally the partition function vanishes in this limit.
If we choose to take the compact free boson as our internal theory (with the same choices
of J and α as in previous sections), (6.119) can be cast in the nicer form
|η|−4

X

xγ

yβ

q 4 [Lm− L (n− N − N +
1

1

mβγ
N2

)]

2

1
+ 14 [ R
+R(y− mγ
(x− mβ
N )
N )]

2

m,n,x,y∈Z4
xγ
yβ
mβγ
1
1
× q̄ 4 [Lm+ L (n− N − N + N 2 )]

2

1
−R(y− mγ
+ 41 [ R
(x− mβ
N )
N )]

2

. (6.120)

Compare this to the case investigated in section 6.2.2 where both bosons were initially
compact. The weights in both partition functions take similar forms, but starting with a
non-compact boson dramatically simplifies the sum (it comes with absolutely no constraints
to worry about). In fact one can see from this equation exactly how this happens – instead
of needing to introduce a new infinite sum over twisted sectors to handle arbitrary orbifold
34

group elements, the ‘twisted sectors’ from the internal theory’s point of view are simply
labeled by the now compact secondary boson’s momenta, which were already going to be
summed over Z anyways. The winding of the auxiliary boson then compensates to maintain
modular invariance.

7

ZN × ZN ′ orbifolds

It is possible to build more complicated groups by iterating the orbifold procedure. Specifically, any group that can be built by successive extensions by abelian groups (a condition
known as solvability) should be amenable to the flavored orbifold method. Here we sketch
a demonstration that the orbifold by ZN followed by another by ZN ′ is equivalent to an
orbifold by ZN × ZN ′ . We assume that the currents generating these groups commute.

First note that the naı̈ve desire would be to begin with our partition function with

elements from both groups inserted. This would give the untwisted sector partial traces
Z(0,0),(r,r′ ) . We would hope to make modular transformations to reach the full set of partial
traces, Z(m,m′ ),(n,n′ ) . Unfortunately, not all modular orbits are connected to the untwisted
sector, meaning that this procedure necessarily will fail to generate the full partition function. In order to apply the modular orbit method to this problem we will need to be a little
more clever.
The plan, schematically, is to start with r insertions of the first group, Z(0,0),(r,0) , and
make the usual transformation to Z(j,0),(l,0) . At this point we would usually sum over j and
l; instead, we will insert elements of the second group into the partial traces, taking us to
Z(j,0),(l,r′ ) . Can we fill out the modular orbits from here? A generic SL(2; Z) transformation
given by (a′ , b′ , c′ , d′) takes us to Z(a′ j−c′l,−c′r′ ),(d′ l−b′ j,d′r′ ) . Similarly to before, let us take
r ′ = gcd(m′ , n′ ) and choose c′ = −m′ /r ′ , d′ = n′ /r ′ . In order for this transformation to
be in SL(2; Z) we need to choose a′ and b′ such that a′ n′ + b′ m′ = r ′ – Bézout’s identity

guarantees that we can make such a choice. Now (a′ , b′ , c′ , d′) have all been fixed. Can we
choose j and l in such a way that a′ j − c′ l = m and d′ l − b′ j = n for any choice of integers
m, n? Write this system of equations in matrix form
   
 ′
m
a −c′ j
=
n
l
−b′ d′

(7.121)

and it becomes plain that, since the coefficient matrix is in SL(2, Z), we can invert it to get
the desired solution. Picking j = d′ m + c′ n, l = b′ m + a′ n, we are finally at Z(m,m′ ),(n,n′ ) .
35

Implementing this procedure for the flavored partition function yields a final orbifold
partition function
′
′
X
km2 2
k′ m 2 ′ 2
k′ m 2 ′ 2
c
km2 2
c̄
′
′ ′ ′
′ ′
q hi −mαL JL + 2 αL −m αL JL+ 2 αL − 24 q̄ h̄i −mαR JR + 2 αR −m αR JR + 2 αR − 24 ,
Z=
m∈ZN
m′ ∈ZN ′
proj.

(7.122)
where “proj.” in the sum means that all states must simultaneously satisfy the projections
αL J L − αR J R −

km 2
2
(αL − αR
)∈Z
2

(7.123)

and

k ′ m′ ′ 2
′
(αL − αR2 ) ∈ Z.
(7.124)
2
This is exactly what we would obtain beginning from the full ZN orbifold (5.97) and per′
αL′ JL′ − αR
JR′ −

forming a ZN ′ orbifold on it, as claimed.
Note that, in order to successfully fill out all of the orbits, we were forced insert the
elements of the second group into the twisted sector of the first. While we may have had
an (untwisted) action in mind for the second group, it is possible that there are multiple
consistent ways it could act in the first group’s twisted sectors. This is related to the
phenomenon of discrete torsion.
By way of example, let us look at a Z2 × Z2 orbifold. For this group there is one orbit

disconnected from the untwisted sector, formed from the six partial traces

Zdisconnected = Z(0,1),(1,0) + Z(1,0),(0,1) + Z(0,1),(1,1) + Z(1,0),(1,1) + Z(1,1),(0,1) + Z(1,1),(1,0) . (7.125)
The disconnected piece can enter the partition function only as
ZZ2 ×Z2 orbifold = Zconnected ± Zdisconnected ,

(7.126)

a constraint which can be viewed as arising from modular invariance at higher genus [11].
When we construct the orbifold as outlined above and insert the second group’s elements
′

to arrive at Z(j,0),(l,r′ ) , we could just as well insert an additional factor of eπijr . This would
preserve the untwisted action of the second group while consistently modifying it in the
j-twisted sectors. After the modular transformation sending us to the full Z(m,m′ ),(n,n′ ) , we
′

′

find that this modification has become eπi(n m−m n) . We see immediately that this operator
gives −1 on the partial traces in the disconnected orbit (7.125), while on the other 10
connected orbits it gives +1.

36

We now consider an example of this behavior in an orbifold of two bosons. We’ll perform
a symmetric Z2 coordinate shift orbifold on each, successively, so the result will be of the
form (7.122). The projections (7.123) and (7.124) tell us that x1 , x2 ∈ 2Z, while y1 and y2

become half integer (shifted respectively by m/2 and m′ /2), bringing us from the theory at
R1 , R2 to the theory at R1 /2, R2 /2:
h
h
h
h
i2
i2
i2
i2
X
R
R
R
R
2
2
1
1
x + 21 y1 + 41 R2 x2 + 22 y2
x1 − 21 y1 + 41 R2 x2 − 22 y2
−4
4 R1 1
4
R
2
2
q̄ 1
.
q
|η|

(7.127)

x1 ,y1 ,x2 ,y2

Now that we’ve done a Z2 × Z2 , having calculated Z(m,m′ ),(n,n′ ) , we can make the other
′

′

choice for discrete torsion by inserting eπi(n m−m n) before performing any sums. The effect

of this insertion is to modify and couple the projections: instead of x1 , x2 ∈ 2Z we get

x1 +m′ , x2 +m ∈ 2Z. Taking into account these constraints, the resulting partition function
can be written as
h
h
i2
i2
X
1
2
q+ 2r )+R1 (s− p2 ) + 41 R2 (s+ p2 )+R2 (q− 2r )
−4
4 R1 (
2
q
|η|
s,p,q,r∈Z4

× q̄

8

1
4

h

2
R1

(q+ 2r )−R1 (s− p2 )

i2

+ 41

h

2
R2

i2

(s+ 2p )−R2 (q− r2 ) . (7.128)

Conclusions and Future Directions

We put forth, in section 3.2, a constructive proposal for defining orbifold partition functions.
Our method emphasizes the role of modular transformations in building these objects and
avoids making assumptions about the existence or structure of twisted Hilbert spaces. Not
needing to impose traditional level matching constraints allows us to treat symmetric and
asymmetric actions on the same footing – the phases required to match up the partial traces
follow automatically from modular invariance. Our procedure is guaranteed by construction
to produce a modular invariant result, but we have no guarantee a priori that we will end
up with a new theory.
In the case of theories with continuous currents we were able to implement our method
explicitly, resulting in a completely general expression for the twisted sector partition function, (5.97). In section 6 we showed how this expression captures shift orbifolds of the
free boson (or multiple copies thereof), and showed that both mundane and more exotic
examples follow from the same framework.
Section 3.3 laid out some of the ways our procedure might run into trouble. One issue
was that it is not completely obvious how to generalize our procedure to arbitrary non-cyclic
37

groups. One potential route would be to lift a finite symmetry group G with n distinct
generators to the action of the free group Fn on n generators, with many elements of the free
group acting ineffectively on the parent theory. This is the most direct analog of what we
have proposed in the single generator case, where F1 ∼
= Z. The free groups have the desirable

property that their higher group cohomology vanishes, H 2 (Fn , U(1)) ∼
= 0,
= H 3 (Fn , U(1)) ∼
so we can again generate partial traces for a Fn orbifold uniquely starting from the untwisted
sector partial traces.
When n > 1 this is a bit confusing, however. The issue is that we are supposed to
include only partial traces Zg,h for which g commutes with h. In Fn , however, two elements
only commute if they are both powers of a common element, i.e. if there exists k ∈ Fn and
integers p and q such that g = k p , h = k q . These are of course also the only partial traces

that we can obtain by modular transformations from the untwisted sector. Thus many of
the partial traces that we would expect from the orbifold by G would simply be missing in
the Fn orbifold.
The likely answer is to be found in the previous studies of ineffective group actions [7,8].
For the cases studied in this paper, we extended a cyclic group to a larger, anomaly free,
b The orbifold by the larger group resulted in a direct sum of disconnected
cyclic group G.

b ∼
b ∼
identical theories (in the G
= Z case; for G
= ZKN , with K chosen appropriately, only
a single theory can be obtained). In the non-cyclic case, we expect (based on examples

in the references above) to again obtain a sum of disconnected theories, but now averaged

over possible choices of discrete torsion. This averaging precisely cancels out the partial
traces which are missing from the Fn orbifold, making the whole story consistent. Another
route to examine is the possibility of more general finite anomaly-free extensions, which are
proven to exist in [10]. We plan to explore these issues further in subsequent work.
Another natural direction to investigate is the extension to higher genus Riemann surfaces. Our basic method, as laid out in section 3.2, readily generalizes to the higher genus
scenario. In that situation we would label partial traces by 2g group elements, one for each
cycle in the homology of the surface. We would write the analogue of (2.7) for Sp(2g; Z)
and follow the same lines of reasoning. In a companion paper (to appear) we will lay out
the consequences of this procedure. In particular, with these tools we can begin to address
concern (iii) of section 3.3 by giving a prescription to directly compute orbifold correlation
functions and OPEs from the degeneration of higher genus surfaces. Again we find that
the flavored case gives us exceptional control over orbifolds by continuous symmetries, and
38

we will be able to compute a large number of explicit results at once.

Acknowledgements
The authors would like to thank O. Lunin and the other members of the University at
Albany string group for helpful conversations. This material is based upon work supported
by the National Science Foundation under Grant No. PHY-1820867. DR would like to
thank S. Hellerman for useful discussion, and would like to thank the Aspen Center for
Physics and the Simons Center for Geometry and Physics for hospitality while this work
was being completed.

A

Review of path integral formulation of orbifolds

Here we review the orbifold construction in the case that a path integral formulation is
available for the parent theory, for instance if the parent theory is a theory of free fields ϕ
with action S[ϕ].
In that case, the partition function of the parent theory can be written schematically as
Z
Z(τ, τ̄ ) = Dϕ e−SE [ϕ] ,
(A.129)
where we have analytically continued to Euclidean signature (denoted by the subscript E),
and where the path integral runs over configurations of ϕ(tE , x) defined on the Euclidean
torus with parameter τ , so ϕ satisfies periodic boundary conditions
ϕ(tE , x) = ϕ(tE , x + 2π) = ϕ(tE + 2πτ2 , x + 2πτ1 ).
Or, in terms of a complex worldsheet coordinate z =

1
(x
2π

(A.130)

+ itE ),

ϕ(z, z̄) = ϕ(z + 1, z̄ + 1) = ϕ(z + τ, z̄ + τ̄ ).
In the path integral formulation, the untwisted partial traces are given by
Z
Z1,g (τ, τ̄ ) = Dϕ1,g e−SE [ϕ] ,

(A.131)

(A.132)

where the subscript on the path integral measure means that we now integrate over fields
that satisfy
ϕ(z + 1, z̄ + 1) = ϕ(z, z̄),

ϕ(z + τ, z̄ + τ̄ ) = g · ϕ(z, z̄).
39

(A.133)

The first step in constructing a modular invariant orbifold partition function is to generalize these partial traces to
Z
h
c
c̄ i
Zh,g (τ, τ̄ ) = Dϕh,g e−SE [ϕ] = TrHh ρh (g)q L0 − 24 q̄ L̄0 − 24 ,

(A.134)

where now the integral is over fields satisfying
ϕ(z + 1, z̄ + 1) = h · ϕ(z, z̄),

ϕ(z + τ, z̄ + τ̄ ) = g · ϕ(z, z̄),

(A.135)

and Hh is the Hilbert space built up using fields satisfying the first peridodicity requirement

in (A.135), with ρh the representation of the group G acting on this Hilbert space7 . Note

that these boundary conditions are only consistent if g and h commute, otherwise the result
of ϕ(z+τ +1, z̄+ τ̄ +1) would be ambiguous. Also, since the action SE [ϕ] should be invariant
under a reflection z → −z, we have Zh,g = Zh−1 ,g−1 .

Now in a modular-invariant CFT, SE [ϕ] will not transform when we act by an SL(2, Z)

transformation which sends τ →

aτ +b
.
cτ +d

On the other hand the integration region does

transform. If τ ′ = τ + 1, then the integration fields appearing in Zh,g (τ ′ , τ̄ ′ ) satisfy
g · ϕ(z, z̄) = ϕ(z + τ ′ , z̄ + τ̄ ′ ) = ϕ((z + τ ) + 1, (z̄ + τ̄ ) + 1) = h · ϕ(z + τ, z̄ + τ̄ )
⇒

ϕ(z + τ, z̄ + τ̄ ) = (h−1 g) · ϕ(z, z̄), (A.136)

thus
Dϕh,g −→ Dϕh,gh−1 ,

and

Zh,g (τ + 1, τ̄ + 1) = Zh,gh−1 (τ, τ̄ ).

(A.137)

Similarly, for τ ′ = −1/τ , the two cycles on the torus get exchanged and we find
, w̄+τ̄
)
h · ϕ(z, z̄) = ϕ(z + 1, z̄ + 1) = ϕ( w+τ
τ
τ̄

⇒

h · ϕ(w, w̄) = ϕ(w + τ, w̄ + τ̄ ), (A.138)

g · ϕ(z, z̄) = ϕ(z − τ1 , z̄ − τ̄1 ) = ϕ( w−1
, w̄−1
)
τ
τ̄

⇒

g · ϕ(w, w̄) = ϕ(w − 1, w̄ − 1), (A.139)

where w = zτ and we have used the conformal invariance of the theory to rescale our
coordinates by factors of τ . Thus we have
Zh,g (−1/τ, −1/τ̄ ) = Zg,h−1 (τ, τ̄ ).

(A.140)

Combining these results, we have that
aτ + b aτ̄ + b
Zh,g (
,
) = Zg−c ha ,gd h−b (τ, τ̄ ),
cτ + d cτ̄ + d
7

for



a b
∈ SL(2, Z).
c d

(A.141)

As discussed further in section 7, there can be ambiguity in how this group action is to be defined.

40

Note that the property gh = hg is preserved.
From these considerations, there is an obvious way to construct a modular invariant
theory, at least for a finite group G. We simply sum over all possible partial traces. Thanks
to the transformation rule (2.7), this is guaranteed to be modular invariant. Comparing
to the untwisted sector partition function Z1 , we deduce that the partial traces should be
weighted by a factor of 1/|G|, so we define the orbifold partition function as
ZG =

1 X
Zh,g .
|G| g,h∈G

(A.142)

gh=hg

From the definitions of the partial traces, it is clear that they are invariant under conjugation, since this simply corresponds to a redefinition of the fields ϕ,
Zh,g = Zkhk−1,kgk−1 ,
Thus for any fixed h, the sum

P

g,hg=gh Zh,g

∀k ∈ G.

(A.143)

depends only on the conjugacy class C = [h]

of h, and we can define the twisted sector partition function
ZC =

|C| X
1 X X
Zh,g =
Zh,g ,
|G| h∈C g∈G
|G| g∈G
gh=hg

(A.144)

gh=hg

where in the second equality h is any (arbitrary) choice of element in C. Of course we have
Z1 = Z[1] = Z{1} .
We can then rewrite the full orbifold partition function as a sum over twisted sectors.
ZG =

X

ZC .

(A.145)

C⊂G

For abelian groups, the conjugacy classes all consist simply of single elements and we
have
Zh := Z{h} =

1 X
Zh,g ,
|G| g∈G

These will be our primary focus in this paper.

ZG =

X

Zh .

(A.146)

h∈G

Finally, let us note that when we discuss infinite order groups, we can still use parts
of this formalism if we phrase things directly in terms of projection operators rather than
using partial traces. In other words we can define twisted sector partition functions in the
operator formalism as

h
c
c̄ i
L0 −
L̄0 −
24
24
ZC = TrHh ΠNh q
,
q̄
41

(A.147)

where h is some arbitrary element in the conjugacy class C, Nh = {g ∈ G|gh = hg} is the

subgroup of elements which commute with h, and ΠNh is the projection onto states which
are invariant under the action of this subgroup.

References
[1] L. J. Dixon, J. A. Harvey, C. Vafa, and E. Witten, “Strings on Orbifolds,” Nucl. Phys.,
vol. B261, pp. 678–686, 1985. [,678(1985)].
[2] L. J. Dixon, J. A. Harvey, C. Vafa, and E. Witten, “Strings on Orbifolds. 2.,” Nucl.
Phys., vol. B274, pp. 285–314, 1986.
[3] K. S. Narain, M. H. Sarmadi, and C. Vafa, “Asymmetric Orbifolds,” Nucl. Phys.,
vol. B288, p. 551, 1987.
[4] K. S. Narain, M. H. Sarmadi, and C. Vafa, “Asymmetric orbifolds: Path integral and
operator formulations,” Nucl. Phys., vol. B356, pp. 163–207, 1991.
[5] A. Klemm and M. G. Schmidt, “Orbifolds by Cyclic Permutations of Tensor Product
Conformal Field Theories,” Phys. Lett., vol. B245, pp. 53–58, 1990.
[6] K. Aoki, E. D’Hoker, and D. H. Phong, “On the construction of asymmetric orbifold
models,” Nucl. Phys., vol. B695, pp. 132–168, 2004.
[7] T. Pantev and E. Sharpe, “Notes on gauging noneffective group actions,” 2005.
[8] S. Hellerman, A. Henriques, T. Pantev, E. Sharpe, and M. Ando, “Cluster decomposition, T-duality, and gerby CFT’s,” Adv. Theor. Math. Phys., vol. 11, no. 5, pp. 751–818,
2007.
[9] E. Witten, “The ”Parity” Anomaly On An Unorientable Manifold,” Phys. Rev.,
vol. B94, no. 19, p. 195150, 2016.
[10] J. Wang, X.-G. Wen, and E. Witten, “Symmetric Gapped Interfaces of SPT and SET
States: Systematic Constructions,” Phys. Rev., vol. X8, no. 3, p. 031048, 2018.
[11] C. Vafa, “Modular invariance and discrete torsion on orbifolds,” Nuclear Physics B,
vol. 273, pp. 592–606, Sept. 1986.
42

[12] J. A. Harvey and G. W. Moore, “An Uplifting Discussion of T-Duality,” JHEP, vol. 05,
p. 145, 2018.
[13] J. Polchinski, String theory. Vol. 1: An introduction to the bosonic string. Cambridge
Monographs on Mathematical Physics, Cambridge University Press, 2007.
[14] S. Hellerman and J. Walcher, “Worldsheet CFTs for Flat Monodrofolds,” 2006.
[15] Y.-H. Lin and S.-H. Shao, “Anomalies and Bounds on Charged Operators,” Phys. Rev.,
vol. D100, no. 2, p. 025013, 2019.
[16] L. Borisov, M. B. Halpern, and C. Schweigert, “Systematic approach to cyclic orbifolds,” Int. J. Mod. Phys., vol. A13, pp. 125–168, 1998.
[17] C.-M. Chang, Y.-H. Lin, S.-H. Shao, Y. Wang, and X. Yin, “Topological Defect Lines
and Renormalization Group Flows in Two Dimensions,” JHEP, vol. 01, p. 026, 2019.
[18] D. Gaiotto, A. Kapustin, N. Seiberg, and B. Willett, “Generalized Global Symmetries,”
JHEP, vol. 02, p. 172, 2015.
[19] L. Bhardwaj and Y. Tachikawa, “On finite symmetries and their gauging in two dimensions,” JHEP, vol. 03, p. 189, 2018.
[20] P. Kraus, “Lectures on black holes and the AdS(3) / CFT(2) correspondence,” Lect.
Notes Phys., vol. 755, pp. 193–247, 2008.
[21] A. B. Zamolodchikov, “Infinite Additional Symmetries in Two-Dimensional Conformal
Quantum Field Theory,” Theor. Math. Phys., vol. 65, pp. 1205–1213, 1985. [Teor. Mat.
Fiz.65,347(1985)].
[22] P. H. Ginsparg, “Curiosities at c = 1,” Nucl. Phys., vol. B295, pp. 153–170, 1988.

43

