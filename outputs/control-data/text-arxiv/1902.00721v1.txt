arXiv:1902.00721v1 [math.QA] 2 Feb 2019

The alternating PBW basis for the
b 2)
positive part of Uq (sl
Paul Terwilliger
Abstract
b 2 ) has a presentation with two generators A, B that
The positive part Uq+ of Uq (sl
satisfy the cubic q-Serre relations. We introduce a PBW basis for Uq+ , said to be
alternating. Each element of this PBW basis commutes with exactly one of A, B,
qAB − q −1 BA. This gives three types of PBW basis elements; the elements of each
type mutually commute. We interpret the alternating PBW basis in terms of a q-shuffle
algebra associated with affine sl2 . We show how the alternating PBW basis is related
to the PBW basis for Uq+ found by Damiani in 1993.
Keywords. q-Onsager algebra, q-shuffle algebra, PBW basis.
2010 Mathematics Subject Classification. Primary: 17B37. Secondary 05E15.

1

Introduction

This paper is motivated by a recent development in statistical mechanics, concerning the
q-Onsager algebra Oq [1], [12]. In [3] Baseilhac and Koizumi introduced a current algebra
Aq for Oq , in order to solve boundary integrable systems with hidden symmetries. In [5,
Definition 3.1] Baseilhac and Shigechi give a presentation of Aq by generators and relations.
∞
∞
∞
The generators are denoted {W−k }∞
k=0 , {Wk+1 }k=0 , {Gk+1 }k=0 , {G̃k+1 }k=0 . The relations
involve q and a nonzero scalar parameter ρ. In an attempt to understand Aq we considered
the limiting case ρ = 0. For this value of ρ the algebra Oq gets replaced by an algebra Uq+
b 2 ). The algebra U + has a presentation
called the positive part of the quantum group Uq (sl
q
with two generators A, B that satisfy the cubic q-Serre relations; see Definition 2.2 below.
In this paper we display some elements in Uq+ , denoted
{W−k }∞
k=0 ,

{Wk+1 }∞
k=0 ,

{Gk+1}∞
k=0 ,

{G̃k+1 }∞
k=0 ,

(1)

that satisfy the ρ = 0 analog of the relations in [5, Definition 3.1]. These relations are given
in Propositions 5.7, 5.10 below; see Propositions 5.11, 6.3, 8.1 for some additional relations.
We defined the elements (1) and obtained the above relations in the following way. Start
with the free algebra V on two generators x, y. The standard (linear) basis for V consists of
the words in x, y. In [10,11] M. Rosso introduced an algebra structure on V, called a q-shuffle
1

algebra. For u, v ∈ {x, y} their q-shuffle product is u ⋆ v = uv + q hu,vi vu, where hu, vi = 2
(resp. hu, vi = −2) if u = v (resp. u 6= v). Rosso gave an injective algebra homomorphism
♮ from Uq+ into the q-shuffle algebra V, that sends A 7→ x and B 7→ y. Let U denote the
image of Uq+ under ♮. A word v1 v2 · · · vn in V is said to be alternating whenever n ≥ 1 and
vi−1 6= vi for 2 ≤ i ≤ n. We name the alternating words as follows:
W0 = x,
W1 = y,
G1 = yx,

W−1 = xyx,
W2 = yxy,
G2 = yxyx,

G̃1 = xy,

G̃2 = xyxy,

W−2 = xyxyx,
...
W3 = yxyxy,
...
G3 = yxyxyx,
...
G̃3 = xyxyxy,

...

We describe the q-shuffle product of every pair of alternating words. Using this description
we show that the alternating words satisfy the relations mentioned below (1). Using these
relations we show that U contains the alternating words.
We use the alternating words to obtain some PBW bases for U. For instance, we show that
∞
∞
the elements {W−k }∞
k=0 , {Wk+1 }k=0 , {G̃k+1 }k=0 (in appropriate linear order) give a PBW
∞
∞
basis for U, said to be alternating. The elements {W−k }∞
k=0 , {Wk+1 }k=0 , {Gk+1 }k=0 give a
similar PBW basis for U. We describe how the alternating PBW basis is related to the PBW
basis for Uq+ found by Damiani in [6].
This paper is organized as follows. In Section 2, we recall the notion of a PBW basis, and
describe the one for Uq+ found by Damiani. In Section 3 we obtain some slightly technical
facts about Uq+ that will be used later in the paper. In Section 4 we describe the algebra
homomorphism ♮ from Uq+ into the q-shuffle algebra V. In Section 5 we introduce the
alternating words in V, and obtain some relations involving these words. In Sections 6, 7
we use these relations to obtain a commutator relation for every pair of alternating words.
In Section 8 we obtain some additional relations for the alternating words, which get used
to show that the alternating words are contained in U. In Section 9 the alternating words
are related using generating functions. In Section 10 we use the alternating words to obtain
some PBW bases for U, including the alternating PBW basis. In Section 11 we show how
the alternating PBW basis is related to the Damiani PBW basis. In Section 12 we give
some slightly technical comments about some relations in Sections 6, 8. In Section 13 we
give some open problems. In Appendices A, B we present the commutator relations in an
alternative way. In Appendix C we give some examples of the commutator relations.

2

The algebra Uq+

We now begin our formal argument. Recall the natural numbers N = {0, 1, 2, . . .} and
integers Z = {0, ±1, ±2, . . .}. Let F denote a field. We will be discussing vector spaces,
tensor products, and algebras. Each vector space and tensor product discussed is over F.
Each algebra discussed is associative, over F, and has a multiplicative identity. A subalgebra
has the same multiplicative identity as the parent algebra.

2

Definition 2.1. (See [6, p. 299].) Let A denote an algebra. A Poincaré-Birkhoff-Witt (or
PBW) basis for A consists of a subset Ω ⊆ A and a linear order < on Ω, such that the
following is a basis for the vector space A:
a1 a2 · · · an

n ∈ N,

a1 , a2 , . . . , an ∈ Ω,

a1 ≤ a2 ≤ · · · ≤ an .

We interpret the empty product as the multiplicative identity in A.
Fix a nonzero q ∈ F that is not a root of unity. Recall the notation
[n]q =

q n − q −n
q − q −1

n ∈ Z.

For elements X, Y in any algebra, define their commutator and q-commutator by
[X, Y ]q = qXY − q −1 Y X.

[X, Y ] = XY − Y X,
Note that

[X, [X, [X, Y ]q ]q−1 ] = X 3 Y − [3]q X 2 Y X + [3]q XY X 2 − Y X 3 .
Definition 2.2. (See [9, Corollary 3.2.6].) Define the algebra Uq+ by generators A, B and
relations
[B, [B, [B, A]q ]q−1 ] = 0.

[A, [A, [A, B]q ]q−1 ] = 0,

(2)

b 2 ). The relations (2) are called the q-Serre relations.
We call Uq+ the positive part of Uq (sl

For an algebra A, by an automorphism of A we mean an algebra isomorphism A → A. By
an antiautomorphism of A, we mean an F-linear bijection γ : A → A such that (ab)γ = bγ aγ
for all a, b ∈ A.
Lemma 2.3. There exists a unique automorphism σ of Uq+ that swaps A, B. There exists a
unique antiautomorphism S of Uq+ that fixes each of A, B.
In [6, p. 299] Damiani obtained a PBW basis for Uq+ , involving some elements
{Enδ+α0 }∞
n=0 ,

{Enδ+α1 }∞
n=0 ,

{Enδ }∞
n=1 .

(3)

These elements are recursively defined as follows:
Eα0 = A,

Eδ = q −2 BA − AB,

Eα1 = B,

(4)

and for n ≥ 1,
[Eδ , E(n−1)δ+α0 ]
[E(n−1)δ+α1 , Eδ ]
,
Enδ+α1 =
,
−1
q+q
q + q −1
Enδ = q −2 E(n−1)δ+α1 A − AE(n−1)δ+α1 .

Enδ+α0 =

3

(5)
(6)

Proposition 2.4. (See [6, p. 308].) The elements (3) in the linear order
Eα0 < Eδ+α0 < E2δ+α0 < · · · < Eδ < E2δ < E3δ < · · · < E2δ+α1 < Eδ+α1 < Eα1
form a PBW basis for Uq+ .
The PBW basis elements (3) are known to satisfy certain relations [6, Section 4]. For instance
the elements {Enδ }∞
n=1 mutually commute [6, p. 307].
Next we describe a grading for the algebra Uq+ . Note that the q-Serre relations are homogeneous in both A and B. Therefore the algebra Uq+ has a N2 -grading for which A and B are
homogeneous, with degrees (1, 0) and (0, 1) respectively. For this grading the PBW basis
elements (3) are homogeneous with degrees shown below:
PBW basis element
Enδ+α0
Enδ+α1
Enδ

degree
(n + 1, n)
(n, n + 1)
(n, n)

Using this data and Proposition 2.4, one can obtain the dimension of each homogeneous
component for the N2 -grading of Uq+ . This calculation is elementary but useful later in the
paper, so we will go through it in detail. This will be done in the next section.

3

The dimensions of the Uq+ homogeneous components

In this section we do two things. First we compute the dimension of each homogeneous
component for the N2 -grading of Uq+ . Then we use this data to characterize a certain type
of PBW basis for Uq+ ; this characterization will be invoked later in the paper to obtain the
alternating PBW basis.
Definition 3.1. Let the set R consist of the ordered pairs (r, s) ∈ N2 such that |r − s| ≤ 1
and (r, s) 6= (0, 0).
Definition 3.2. Define a generating function in two commuting indeterminates λ, µ:
Y
1
Φ(λ, µ) =
1 − λr µ s
(r,s)∈R

In more detail,
∞
Y

Φ(λ, µ) =

ℓ=1

1
1
1
.
ℓ
ℓ−1
ℓ
ℓ
1−λ µ
1 − λ µ 1 − λℓ−1 µℓ

Definition 3.3. For (i, j) ∈ N2 let di,j denote the coefficient of λi µj in Φ(λ, µ). Thus
Y
Φ(λ, µ) =
(1 + λr µs + λ2r µ2s + · · · )
(r,s)∈R

=

X

di,j λi µj .

(i,j)∈N2

Note that di,j ∈ N for (i, j) ∈ N2 .
4

Example 3.4. For 0 ≤ i, j ≤ 6 the
below:

1 1
 1 2

 1 3

 1 3

 1 3

 1 3
1 3

number di,j is given in the (i, j)-entry of the matrix
1
3
6
8
9
9
9

1
3
8
14
19
21
22

1
3
9
19
32
42
48

1
1
3
3
9
9
21 22
42 48
66 87
87 134












Definition 3.5. A subset Ω ⊆ Uq+ is called feasible whenever
(i) each element of Ω is homogeneous with respect to the N2 -grading of Uq+ ;
(ii) there is a bijection Ω → R that sends each element of Ω to its degree.
Let Ω denote a feasible subset of Uq+ and let < denote a linear order on Ω. Consider the
following vectors in Uq+ :
a1 a2 · · · an

n ∈ N,

a1 , a2 , . . . , an ∈ Ω,

a1 ≤ a2 ≤ · · · ≤ an .

(7)

Note that each vector in (7) is homogeneous with respect to the N2 -grading of Uq+ .
Lemma 3.6. With the above notation, for (i, j) ∈ N2 the number of vectors in (7) that have
degree (i, j) is equal to the integer di,j from Definition 3.3.
Proof. For a ∈ Ω with degree (r, s) the contribution of a to Φ(λ, µ) is
1
= 1 + λr µs + λ2r µ2s + · · · .
1 − λr µ s

Corollary 3.7. For (i, j) ∈ N2 the (i, j)-homogeneous component of Uq+ has dimension di,j .
Proof. Let the set Ω consist of the elements (3). The set Ω is feasible by Definition 3.5 and
the table below Proposition 2.4. Endow Ω with the linear order < from Proposition 2.4. By
Definition 2.1 and Proposition 2.4, the vectors (7) form a basis for the vector space Uq+ . We
mentioned earlier that every vector in (7) is homogeneous with respect to the N2 -grading
of Uq+ . So for (i, j) ∈ N2 the set of vectors in (7) that have degree (i, j) is a basis for the
(i, j)-homogeneous component of Uq+ . The result follows in view of Lemma 3.6.
Lemma 3.8. Let Ω denote a feasible subset of Uq+ and let < denote a linear order on Ω.
Then for (i, j) ∈ N2 the following (i)–(iii) are equivalent:
(i) the vectors in (7) that have degree (i, j) span the (i, j)-homogeneous component of Uq+ ;
(ii) the vectors in (7) that have degree (i, j) are linearly independent;
5

(iii) the vectors in (7) that have degree (i, j) form a basis for the (i, j)-homogeneous component of Uq+ .
Proof. By Lemma 3.6, Corollary 3.7 and the linear algebra of finite-dimensional vector
spaces.
Proposition 3.9. Let Ω denote a feasible subset of Uq+ and let < denote a linear order on
Ω. Then the following (i)–(v) are equivalent:
(i) the equivalent conditions of Lemma 3.8 hold for all (i, j) ∈ N2 ;
(ii) the vectors (7) span Uq+ ;
(iii) the vectors (7) are linearly independent;
(iv) the vectors (7) form a basis for Uq+ ;
(v) Ω in order < forms a PBW basis for Uq+ .
Proof. Condition (i) is equivalent to each of (ii), (iii), (iv) since Uq+ is a direct sum of its
homogeneous components. Conditions (iv), (v) are equivalent by Definition 2.4.
In Section 10 we will use Proposition 3.9 to obtain the alternating PBW basis for Uq+ .

4

Embedding Uq+ into a q-shuffle algebra

In this section we recall an embedding, due to Rosso [10, 11], of Uq+ into a q-shuffle algebra.
For this q-shuffle algebra the underlying vector space is a free algebra on two generators. We
begin by describing this free algebra.
Let x, y denote noncommuting indeterminates, and let V denote the free algebra with generators x, y. By a letter in V we mean x or y. For n ∈ N, a word of length n in V is a product
of letters v1 v2 · · · vn . We interpret the word of length zero to be the multiplicative identity
in V; this word is called trivial and denoted by 1. The vector space V has a basis consisting
of its words; this basis is called standard.
We mention some symmetries of the free algebra V.
Lemma 4.1. There exists a unique automorphism σ of the free algebra V that swaps x, y.
There exists a unique antiautomorphism S of the free algebra V that fixes each of x, y.
The free algebra V has a N2 -grading for which x and y are homogeneous, with degrees (1, 0)
and (0, 1) respectively. For (i, j) ∈ N2 let Vi,j denote the (i, j)-homogeneous component.
These homogeneous components are described as follows. Let w = v1 v2 · · · vn denote a word
in V. The x-degree of w is the cardinality of the set {i|1 ≤ i ≤ n, vi = x}. The y-degree of
w is similarly defined. For (i, j) ∈ N2 the subspace Vi,j has a basis consisting of the words
in V that have x-degree i and y-degree j. The dimension of Vi,j is equal to the binomial
coefficient i+j
.
i
6

We have been discussing the free algebra V. There is another algebra structure on V, called
the q-shuffle algebra. This algebra was introduced by Rosso [10, 11] and described further
by Green [7]. We will adopt the approach of [7], which is well suited to our purpose. The
q-shuffle product is denoted by ⋆. To describe this product, we start with some special cases.
We have 1 ⋆ v = v ⋆ 1 = v for v ∈ V. For letters u, v we have
u ⋆ v = uv + vuq hu,vi
where

h, i x
x
2
y
−2

y
−2
2

So
x ⋆ y = xy + q −2 yx,
x ⋆ x = (1 + q 2 )xx,

y ⋆ x = yx + q −2 xy,
y ⋆ y = (1 + q 2 )yy.

(8)
(9)

For a letter u and a nontrivial word v = v1 v2 · · · vn ,
u⋆v =
v⋆u=

n
X

i=0
n
X

v1 · · · vi uvi+1 · · · vn q hv1 ,ui+hv2 ,ui+···+hvi ,ui ,

(10)

v1 · · · vi uvi+1 · · · vn q hvn ,ui+hvn−1 ,ui+···+hvi+1 ,ui .

(11)

i=0

For example
x ⋆ (yyy) = xyyy + q −2 yxyy + q −4 yyxy + q −6 yyyx,
(xyx) ⋆ y = xyxy + (1 + q −2 )xyyx + q −2 yxyx.
For nontrivial words u = u1u2 · · · ur and v = v1 v2 · · · vs in V,


u ⋆ v = u1 (u2 · · · ur ) ⋆ v + v1 u ⋆ (v2 · · · vs ) q hu1 ,v1 i+hu2 ,v1 i+···+hur ,v1 i ,


u ⋆ v = u ⋆ (v1 · · · vs−1 ) vs + (u1 · · · ur−1 ) ⋆ v ur q hur ,v1 i+hur ,v2 i+···+hur ,vs i .

(12)
(13)

For example

(xx) ⋆ (yyy) =xxyyy + q −2 xyxyy + q −4 xyyxy + q −6 xyyyx + q −4 yxxyy
+ q −6 yxyxy + q −8 yxyyx + q −8 yyxxy + q −10 yyxyx + q −12 yyyxx,
(xy) ⋆ (xxyy) =xyxxyy + xxyyxy + [2]2q xxyxyy + [3]2q xxxyyy.
The map σ from Lemma 4.1 is an automorphism of the q-shuffle algebra V. The map S
from Lemma 4.1 is an antiautomorphism of the q-shuffle algebra V. Below Lemma 4.1 we
mentioned an N2 -grading for the free algebra V. This is also an N2 -grading for the q-shuffle
algebra V.
7

Definition 4.2. Let U denote the subalgebra of the q-shuffle algebra V that is generated by
x, y.
Shortly we will see that U 6= V.
The algebra U is described as follows. With some work (or by [10, Theorem 13], [7, p. 10])
one obtains
x ⋆ x ⋆ x ⋆ y − [3]q x ⋆ x ⋆ y ⋆ x + [3]q x ⋆ y ⋆ x ⋆ x − y ⋆ x ⋆ x ⋆ x = 0,
y ⋆ y ⋆ y ⋆ x − [3]q y ⋆ y ⋆ x ⋆ y + [3]q y ⋆ x ⋆ y ⋆ y − x ⋆ y ⋆ y ⋆ y = 0.

(14)
(15)

So in the q-shuffle algebra V the elements x, y satisfy the q-Serre relations. Consequently
there exists an algebra homomorphism ♮ from Uq+ to the q-shuffle algebra V, that sends A 7→ x
and B 7→ y. The map ♮ has image U by Definition 4.2, and is injective by [11, Theorem 15].
Therefore ♮ : Uq+ → U is an algebra isomorphism. By construction the following diagrams
commute:
♮

Uq+ −−−→


σy

♮

Uq+ −−−→


Sy

V

σ
y

Uq+ −−−→ V
♮

V


yS

Uq+ −−−→ V
♮

2

Earlier we mentioned an N -grading for both the algebra Uq+ and the q-shuffle algebra V.
These gradings are related as follows. The algebra U has an N2 -grading inherited from Uq+
via ♮. With respect to this grading, for (i, j) ∈ N2 the (i, j)-homogeneous component of U
is the ♮-image of the (i, j)-homogeneous component of Uq+ . This homogeneous component is
equal to Vi,j ∩ U.
Next we show that U 6= V. For (i, j) ∈ N2 , the dimension of Vi,j ∩U is di,j and the dimension
of Vi,j is i+j
. There exists (i, j) ∈ N2 such that di,j < i+j
. Therefore U 6= V.
i
i

Next we describe how the map ♮ acts on the PBW basis elements (3). Define x = 1 and
y = −1. A word v1 v2 · · · vn in V is Catalan whenever v 1 + v 2 + · · · + v i is nonnegative for
1 ≤ i ≤ n − 1 and zero for i = n. In this case n is even. For n ≥ 0 define
X
Cn =
v1 v2 · · · v2n [1]q [1 + v 1 ]q [1 + v 1 + v 2 ]q · · · [1 + v 1 + v 2 + · · · + v 2n ]q ,

where the sum is over all the Catalan words v1 v2 · · · v2n in V that have length 2n. For
example
C0 = 1,

C2 = [2]2q xyxy + [3]q [2]2q xxyy.

C1 = [2]q xy,

By [17, Theorem 1.7] the map ♮ sends
Enδ+α0 7→ q −2n (q − q −1 )2n xCn ,

Enδ+α1 7→ q −2n (q − q −1 )2n Cn y

for n ≥ 0, and
Enδ 7→ −q −2n (q − q −1 )2n−1 Cn
for n ≥ 1. See [8, p. 696] for more information about ♮.
8

5

The alternating words

In this section we introduce a type of word in V, said to be alternating. We display some
relations in the q-shuffle algebra V, that are satisfied by the alternating words. Later in the
paper we will use these relations to show that the alternating words are contained in U.
Definition 5.1. A word v1 v2 · · · vn in V is called alternating whenever n ≥ 1 and vi−1 6= vi
for 2 ≤ i ≤ n. Thus an alternating word has the form · · · xyxy · · · .
Definition 5.2. We name the alternating words as follows:
W0 = x,
W1 = y,
G1 = yx,

W−1 = xyx,
W2 = yxy,
G2 = yxyx,

G̃1 = xy,

G̃2 = xyxy,

W−2 = xyxyx,
...
W3 = yxyxy,
...
G3 = yxyxyx,
...
G̃3 = xyxyxy,

(16)
(17)
(18)
(19)

...

For notational convenience define G0 = 1 and G̃0 = 1. So for k ∈ N,
name
W−k
Wk+1
Gk
G̃k

description
xyxy · · · x
yxyx · · · y
yxyx · · · x
xyxy · · · y

x-degree
k+1
k
k
k

y-degree length
k
2k + 1
k+1
2k + 1
k
2k
k
2k

Lemma 5.3. The maps σ, S from Lemma 4.1 act on the alternating words as follows. For
k ∈ N,
(i) the map σ sends
W−k 7→ Wk+1 ,

Wk+1 7→ W−k ,

Gk 7→ G̃k ,

G̃k 7→ Gk ;

Wk+1 7→ Wk+1,

Gk 7→ G̃k ,

G̃k 7→ Gk .

(ii) the map S sends
W−k 7→ W−k ,

Proof. By Lemma 4.1 and Definition 5.2.
Lemma 5.4. For k ∈ N the following holds in the free algebra V:
W−k = xGk = G̃k x,

Gk+1 = yW−k = Wk+1 x,

Wk+1 = y G̃k = Gk y,

G̃k+1 = xWk+1 = W−k y.

Proof. Use Definition 5.2.

9

We are going to show that U contains every alternating word. As a warmup, consider the
alternating words xy and yx. Using (8),
xy = q

qx ⋆ y − q −1 y ⋆ x
,
q 2 − q −2

yx = q

qy ⋆ x − q −1 x ⋆ y
.
q 2 − q −2

(20)

Therefore U contains xy and yx. In order to handle longer alternating words, we will develop
some relations involving the q-shuffle product. Next we describe the q-shuffle product of a
letter and an alternating word.
Lemma 5.5. For k ∈ N,
2

x ⋆ W−k = (1 + q )

k
X

G̃i x2 Gk−i ,

(21)

i=0

−2

−2

x ⋆ Wk+1 = q Gk+1 + G̃k+1 + (1 + q )

k−1
X

Wi+1 x2 Wk−i ,

(22)

i=0

−2

x ⋆ Gk = W−k + (1 + q )

k−1
X

Wi+1 x2 Gk−i−1 ,

(23)

i=0

x ⋆ G̃k = W−k + (1 + q 2 )

k−1
X

G̃k−i−1 x2 Wi+1

(24)

i=0

and
−2

−2

y ⋆ W−k = Gk+1 + q G̃k+1 + (1 + q )

k−1
X

W−i y 2 Wi−k+1,

(25)

i=0

2

y ⋆ Wk+1 = (1 + q )

k
X

Gi y 2 G̃k−i ,

(26)

i=0

y ⋆ Gk = Wk+1 + (1 + q 2 )

k−1
X

Gk−i−1 y 2W−i ,

i=0
k−1
X

y ⋆ G̃k = Wk+1 + (1 + q −2 )

W−i y 2 G̃k−i−1

i=0

Proof. Use (10) and Definition 5.2.
Next we describe the q-shuffle product of an alternating word and a letter.

10

(27)
(28)

Lemma 5.6. For k ∈ N,
W−k ⋆ x = (1 + q 2 )

k
X

G̃k−i x2 Gi ,

(29)

i=0
−2

−2

Wk+1 ⋆ x = Gk+1 + q G̃k+1 + (1 + q )

k−1
X

Wk−i x2 Wi+1 ,

(30)

i=0

k−1
X

2

Gk ⋆ x = W−k + (1 + q )

Wi+1 x2 Gk−i−1,

(31)

i=0

−2

G̃k ⋆ x = W−k + (1 + q )

k−1
X

G̃k−i−1 x2 Wi+1

(32)

i=0

and
−2

−2

W−k ⋆ y = q Gk+1 + G̃k+1 + (1 + q )

k−1
X

Wi−k+1 y 2W−i ,

(33)

i=0

2

Wk+1 ⋆ y = (1 + q )

k
X

Gk−i y 2 G̃i ,

(34)

i=0

−2

Gk ⋆ y = Wk+1 + (1 + q )

k−1
X

Gk−i−1 y 2W−i ,

(35)

i=0

G̃k ⋆ y = Wk+1 + (1 + q 2 )

k−1
X

W−i y 2 G̃k−i−1.

(36)

i=0

Proof. Use (11) and Definition 5.2.
Proposition 5.7. For k ∈ N the following holds in the q-shuffle algebra V:
[W0 , Wk+1] = [W−k , W1 ] = (1 − q −2 )(G̃k+1 − Gk+1 ),

(37)

[W0 , Gk+1]q = [G̃k+1, W0 ]q = (q − q −1 )W−k−1 ,

(38)

[Gk+1 , W1 ]q = [W1 , G̃k+1 ]q = (q − q −1 )Wk+2 .

(39)

Proof. These relations are routinely checked using Lemmas 5.5, 5.6.
Note 5.8. We have a comment about notation. In Proposition 5.7 we used the commutator
and q-commutator notation. Throughout the paper, for any equation in the q-shuffle algebra
V that involves a commutator or q-commutator, it is understand that these commutators
are computed using the q-shuffle product ⋆.
We just displayed some relations for the alternating words in V. Shortly we will display
some more general relations for the alternating words. To obtain these relations we use the
following identities.
11

Lemma 5.9. For k, ℓ ∈ N,
W−k ⋆ W−ℓ = x(Gk ⋆ W−ℓ ) + x(W−k ⋆ Gℓ )q 2 = q 2 (G̃k ⋆ W−ℓ )x + (W−k ⋆ G̃ℓ )x,
W−k ⋆ Wℓ+1 = x(Gk ⋆ Wℓ+1 ) + y(W−k ⋆ G̃ℓ )q −2 = q −2 (G̃k ⋆ Wℓ+1 )x + (W−k ⋆ Gℓ )y,
Wk+1 ⋆ W−ℓ = y(G̃k ⋆ W−ℓ ) + x(Wk+1 ⋆ Gℓ )q −2 = q −2 (Gk ⋆ W−ℓ )y + (Wk+1 ⋆ G̃ℓ )x,
Wk+1 ⋆ Wℓ+1 = y(G̃k ⋆ Wℓ+1 ) + y(Wk+1 ⋆ G̃ℓ )q 2 = q 2 (Gk ⋆ Wℓ+1 )y + (Wk+1 ⋆ Gℓ )y
and
W−k ⋆ Gℓ+1 = x(Gk ⋆ Gℓ+1 ) + y(W−k ⋆ W−ℓ )q −2 = (G̃k ⋆ Gℓ+1 )x + (W−k ⋆ Wℓ+1 )x,
W−k ⋆ G̃ℓ+1 = x(Gk ⋆ G̃ℓ+1 ) + x(W−k ⋆ Wℓ+1 )q 2 = (G̃k ⋆ G̃ℓ+1 )x + (W−k ⋆ W−ℓ )y,
Wk+1 ⋆ Gℓ+1 = y(G̃k ⋆ Gℓ+1 ) + y(Wk+1 ⋆ W−ℓ )q 2 = (Gk ⋆ Gℓ+1 )y + (Wk+1 ⋆ Wℓ+1 )x,
Wk+1 ⋆ G̃ℓ+1 = y(G̃k ⋆ G̃ℓ+1 ) + x(Wk+1 ⋆ Wℓ+1 )q −2 = (Gk ⋆ G̃ℓ+1 )y + (Wk+1 ⋆ W−ℓ )y
and
Gk+1 ⋆ W−ℓ = y(W−k ⋆ W−ℓ ) + x(Gk+1 ⋆ Gℓ ) = q 2 (Wk+1 ⋆ W−ℓ )x + (Gk+1 ⋆ G̃ℓ )x,
Gk+1 ⋆ Wℓ+1 = y(W−k ⋆ Wℓ+1 ) + y(Gk+1 ⋆ G̃ℓ ) = q −2 (Wk+1 ⋆ Wℓ+1 )x + (Gk+1 ⋆ Gℓ )y,
G̃k+1 ⋆ W−ℓ = x(Wk+1 ⋆ W−ℓ ) + x(G̃k+1 ⋆ Gℓ ) = q −2 (W−k ⋆ W−ℓ )y + (G̃k+1 ⋆ G̃ℓ )x,
G̃k+1 ⋆ Wℓ+1 = x(Wk+1 ⋆ Wℓ+1 ) + y(G̃k+1 ⋆ G̃ℓ ) = q 2 (W−k ⋆ Wℓ+1 )y + (G̃k+1 ⋆ Gℓ )y
and
Gk+1 ⋆ Gℓ+1 = y(W−k ⋆ Gℓ+1 ) + y(Gk+1 ⋆ W−ℓ ) = (Wk+1 ⋆ Gℓ+1 )x + (Gk+1 ⋆ Wℓ+1 )x,
Gk+1 ⋆ G̃ℓ+1 = y(W−k ⋆ G̃ℓ+1 ) + x(Gk+1 ⋆ Wℓ+1 ) = (Wk+1 ⋆ G̃ℓ+1 )x + (Gk+1 ⋆ W−ℓ )y,
G̃k+1 ⋆ Gℓ+1 = x(Wk+1 ⋆ Gℓ+1 ) + y(G̃k+1 ⋆ W−ℓ ) = (W−k ⋆ Gℓ+1 )y + (G̃k+1 ⋆ Wℓ+1 )x,
G̃k+1 ⋆ G̃ℓ+1 = x(Wk+1 ⋆ G̃ℓ+1 ) + x(G̃k+1 ⋆ Wℓ+1 ) = (W−k ⋆ G̃ℓ+1 )y + (G̃k+1 ⋆ W−ℓ )y.
Proof. Use (12), (13).
Proposition 5.10. For k, ℓ ∈ N the following relations hold in the q-shuffle algebra V:
[W−k , W−ℓ ] = 0,
[Wk+1 , Wℓ+1 ] = 0,
[W−k , Wℓ+1 ] + [Wk+1 , W−ℓ ] = 0,
[W−k , Gℓ+1 ] + [Gk+1 , W−ℓ ] = 0,

(40)
(41)
(42)

[W−k , G̃ℓ+1 ] + [G̃k+1 , W−ℓ ] = 0,
[Wk+1 , Gℓ+1 ] + [Gk+1 , Wℓ+1 ] = 0,

(43)
(44)

[Wk+1 , G̃ℓ+1 ] + [G̃k+1 , Wℓ+1 ] = 0,

(45)

[Gk+1 , Gℓ+1 ] = 0,

(46)

[G̃k+1 , G̃ℓ+1 ] = 0,

[G̃k+1 , Gℓ+1 ] + [Gk+1 , G̃ℓ+1 ] = 0.
Proof. Use Lemma 5.9 and induction on k + ℓ.
12

(47)

Proposition 5.11. For k, ℓ ∈ N the following relations hold in the q-shuffle algebra V:
[W−k , Gℓ ]q = [W−ℓ , Gk ]q ,

[Gk , Wℓ+1 ]q = [Gℓ , Wk+1 ]q ,

(48)

[G̃k , W−ℓ ]q = [G̃ℓ , W−k ]q ,

[Wℓ+1 , G̃k ]q = [Wk+1 , G̃ℓ ]q ,

(49)

[Gk , G̃ℓ+1 ] − [Gℓ , G̃k+1] = q[W−ℓ , Wk+1]q − q[W−k , Wℓ+1 ]q ,

(50)

[G̃k , Gℓ+1 ] − [G̃ℓ , Gk+1] = q[Wℓ+1 , W−k ]q − q[Wk+1 , W−ℓ ]q ,

(51)

[Gk+1 , G̃ℓ+1 ]q − [Gℓ+1 , G̃k+1 ]q = q[W−ℓ , Wk+2 ] − q[W−k , Wℓ+2 ],

(52)

[G̃k+1 , Gℓ+1 ]q − [G̃ℓ+1 , Gk+1 ]q = q[Wℓ+1 , W−k−1 ] − q[Wk+1 , W−ℓ−1].

(53)

Proof. Each equation is verified by evaluating both sides using Lemma 5.9 and simplifying
the result using Proposition 5.10.
We emphasize a few points about Definition 5.2.
Lemma 5.12. Referring to Definition 5.2, the following (i)–(v) hold.
(i) For each of the lines (16)–(19) the listed elements mutually commute.
(ii) An alternating word is listed in (16) if and only if it commutes with x.
(iii) An alternating word is listed in (17) if and only if it commutes with y.
(iv) An alternating word is listed in (18) if and only if it commutes with qy ⋆ x − q −1 x ⋆ y.
(v) An alternating word is listed in (19) if and only if it commutes with qx ⋆ y − q −1 y ⋆ x.
Proof. (i) By (40), (46).
(ii) Use (23), (24) and (37), (38).
(iii) Use (ii) above and the σ action from Lemma 5.3.
(iv) Use (20) together with (42), (44), (51) at ℓ = 0.
(v) Use (iv) above and the σ action from Lemma 5.3.

6

Commutator relations for alternating words, part I

Our next general goal is to obtain a commutator relation for every pair of alternating words.
As we pursue this goal, it is convenient to split the argument into two cases. In the present
(resp. next) section we treat the case in which the pair of alternating words have length of
opposite (resp. same) parity. Throughout this section fix n ∈ N.

13

In Table 1 below, we see four cases. For each case we have a set L and a set R:
case
1
2
3
4

set L
{Gi ⋆ W−j |i, j ∈ N,
{Gi ⋆ Wj+1 |i, j ∈ N,
{G̃i ⋆ W−j |i, j ∈ N,
{G̃i ⋆ Wj+1 |i, j ∈ N,

i + j = n}
i + j = n}
i + j = n}
i + j = n}

set R
{W−j ⋆ Gi |i, j ∈ N,
{Wj+1 ⋆ Gi |i, j ∈ N,
{W−j ⋆ G̃i |i, j ∈ N,
{Wj+1 ⋆ G̃i |i, j ∈ N,

i + j = n}
i + j = n}
i + j = n}
i + j = n}

Table 1
In each case, we will show that the sets L and R have the same span. To this end, order the
set L as follows:
case
1
2
3
4

ordering of L
G0 ⋆ W−n , Gn ⋆ W0 , G1 ⋆ W1−n , Gn−1 ⋆ W−1 ,
G0 ⋆ Wn+1 , Gn ⋆ W1 , G1 ⋆ Wn , Gn−1 ⋆ W2 ,
G̃0 ⋆ W−n , G̃n ⋆ W0 , G̃1 ⋆ W1−n , G̃n−1 ⋆ W−1 ,
G̃0 ⋆ Wn+1 , G̃n ⋆ W1 , G̃1 ⋆ Wn , G̃n−1 ⋆ W2 ,

G2 ⋆ W2−n ,
G2 ⋆ Wn−1 ,
G̃2 ⋆ W2−n ,
G̃2 ⋆ Wn−1 ,

Gn−2 ⋆ W−2 , . . .
Gn−2 ⋆ W3 , . . .
G̃n−2 ⋆ W−2 , . . .
G̃n−2 ⋆ W3 , . . .

W2−n ⋆ G2 ,
Wn−1 ⋆ G2 ,
W2−n ⋆ G̃2 ,
Wn−1 ⋆ G̃2 ,

W−2 ⋆ Gn−2 , . . .
W3 ⋆ Gn−2 , . . .
W−2 ⋆ G̃n−2 , . . .
W3 ⋆ G̃n−2 , . . .

Order the set R as follows:
case
1
2
3
4

ordering of R
W−n ⋆ G0 , W0 ⋆ Gn , W1−n ⋆ G1 , W−1 ⋆ Gn−1 ,
Wn+1 ⋆ G0 , W1 ⋆ Gn , Wn ⋆ G1 , W2 ⋆ Gn−1 ,
W−n ⋆ G̃0 , W0 ⋆ G̃n , W1−n ⋆ G̃1 , W−1 ⋆ G̃n−1 ,
Wn+1 ⋆ G̃0 , W1 ⋆ G̃n , Wn ⋆ G̃1 , W2 ⋆ G̃n−1 ,

Define sequences {ui }ni=0 , {vi }ni=0 as follows. In cases 1 and 4 let {ui }ni=0 (resp. {vi }ni=0 )
denote the given ordering of L (resp. R). In cases 2 and 3 let {ui }ni=0 (resp. {vi }ni=0 ) denote
the given ordering of R (resp. L).
Lemma 6.1. In each case 1–4 above, the following holds for 0 ≤ j ≤ n.
(i) For j even,
uj = vj + (1 − q 2 )

j−1
X

vj = uj + (1 − q −2 )

(−1)i vi ,

j−1
X

(−1)i ui .

i=0

i=0

(ii) For j odd,
uj = q 2 vj + (1 − q 2 )

j−1
X

vj = q −2 uj + (1 − q −2 )

(−1)i vi ,

j−1
X

(−1)i ui .

i=0

i=0

Proof. To obtain the result for case 1, use Propositions 5.7, 5.10, 5.11 and induction on j.
To obtain the result for case 2 (resp. case 3) (resp. case 4), apply σS (resp. S) (resp. σ) to
everything from case 1.
14

In Appendix A we present Lemma 6.1 in an alternative form.
Proposition 6.2. For each case in Table 1, the sets L and R have the same span.
Proof. By Lemma 6.1.
We mention some relations for later use.
Proposition 6.3. For n ∈ N,
n
X

Gn−k ⋆ W−k q

n
X

Gn−k ⋆ Wk+1 q n−2k =

2k−n

=

k=0

k=0
n
X

k=0
n
X

G̃n−k ⋆ W−k q n−2k =

n
X

k=0
n
X

Wk+1 ⋆ Gn−k q 2k−n ,

k=0
n
X

G̃n−k ⋆ Wk+1 q 2k−n =

k=0

W−k ⋆ Gn−k q n−2k ,

W−k ⋆ G̃n−k q 2k−n .

k=0
n
X

Wk+1 ⋆ G̃n−k q n−2k ,

(54)
(55)
(56)
(57)

k=0

Proof. To verify (54), evaluate each summand on the left using case 1 of Lemma 6.1, and
simplify the result. To obtain (55) (resp. (56)) (resp. (57)) apply σS (resp. S) (resp. σ) to
everything in (54).

7

Commutator relations for alternating words, part II

In this section we obtain a commutator relation for every pair of alternating words that have
length of the same parity. Throughout this section fix an integer n ≥ 1.
Consider the following sets:
N = {G̃i ⋆ Gj |i, j ∈ N, i + j = n},
S = {Gi ⋆ G̃j |i, j ∈ N, i + j = n},
E = {Wi+1 ⋆ W−j |i, j ∈ N, i + j = n − 1},
W = {W−i ⋆ Wj+1 |i, j ∈ N, i + j = n − 1}.
We are going to show that the sets
N ∪ E,

N ∪ W,

S ∪ E,

S∪W

all have the same span. To this end, for each of N, S, E, W we order the elements in two
ways:

15

I
II

ordering of N
G̃0 ⋆ Gn , G̃n ⋆ G0 , G̃1 ⋆ Gn−1 , G̃n−1 ⋆ G1 , G̃2 ⋆ Gn−2 , G̃n−2 ⋆ G2 , . . .
G̃n ⋆ G0 , G̃0 ⋆ Gn , G̃n−1 ⋆ G1 , G̃1 ⋆ Gn−1 , G̃n−2 ⋆ G2 , G̃2 ⋆ Gn−2 , . . .

I
II

ordering of S
Gn ⋆ G̃0 , G0 ⋆ G̃n , Gn−1 ⋆ G̃1 , G1 ⋆ G̃n−1 , Gn−2 ⋆ G̃2 , G2 ⋆ G̃n−2 , . . .
G0 ⋆ G̃n , Gn ⋆ G̃0 , G1 ⋆ G̃n−1 , Gn−1 ⋆ G̃1 , G2 ⋆ G̃n−2 , Gn−2 ⋆ G̃2 , . . .

I
II

ordering of E
Wn ⋆ W0 , W1 ⋆ W1−n , Wn−1 ⋆ W−1 , W2 ⋆ W2−n , Wn−2 ⋆ W−2 , W3 ⋆ W3−n , . . .
W1 ⋆ W1−n , Wn ⋆ W0 , W2 ⋆ W2−n , Wn−1 ⋆ W−1 , W3 ⋆ W3−n , Wn−2 ⋆ W−2 , . . .

I
II

ordering of W
W0 ⋆ Wn , W1−n ⋆ W1 , W−1 ⋆ Wn−1 , W2−n ⋆ W2 , W−2 ⋆ Wn−2 , W3−n ⋆ W3 , . . .
W1−n ⋆ W1 , W0 ⋆ Wn , W2−n ⋆ W2 , W−1 ⋆ Wn−1 , W3−n ⋆ W3 , W−2 ⋆ Wn−2 , . . .

n−1
n−1
Next we define sequences {ui }ni=0 , {vi }ni=0 , {Ui }i=0
, {Vi }i=0
as follows. There are four cases:

case
1
2
3
4

{ui }ni=0
ordering I of N
ordering I of S
ordering II of N
ordering II of S

{vi }ni=0
ordering I of S
ordering I of N
ordering II of S
ordering II of N

n−1
{Ui }i=0
ordering I of E
ordering II of E
ordering I of W
ordering II of W

n−1
{Vi }i=0
ordering I of W
ordering II of W
ordering I of E
ordering II of E

Lemma 7.1. For each case 1–4 above we have the following.
(i) For 0 ≤ j ≤ n and j even,
j−1
X
(−1)i Vi ,
uj = vj + (1 − q )

2

2

vj = uj − (1 − q )

j−1
X

(−1)i Ui .

j−2
X

(−1)i Ui .

i=0

i=0

(ii) For 0 ≤ j ≤ n and j odd,
j−2
X
(−1)i Vi ,
uj = vj + (1 − q )

2

2

vj = uj − (1 − q )

i=0

i=0

(iii) For 0 ≤ j ≤ n − 1 and j even,
Uj = Vj + (1 − q −2 )

j+1
X

Vj = Uj − (1 − q −2 )

(−1)i vi ,

j+1
X

(−1)i ui .

j
X

(−1)i ui .

i=0

i=0

(iv) For 0 ≤ j ≤ n − 1 and j odd,
−2

Uj = Vj + (1 − q )

j
X

−2

i

(−1) vi ,

Vj = Uj − (1 − q )

i=0

i=0

16

Proof. To obtain the result for case 1, use Propositions 5.7, 5.10, 5.11 and induction on j.
To obtain the result for case 2 (resp. case 3) (resp. case 4), apply σS (resp. S) (resp. σ) to
everything from case 1.
In Appendix B we present Lemma 7.1 in an alternative form.
Proposition 7.2. The sets
N ∪ E,

N ∪ W,

S ∪ E,

S∪W

all have the same span.
Proof. Let V denote the span of N ∪ S ∪ E ∪ W . By case 1 or case 4 of Lemma 7.1 we
find that N ∪ E and S ∪ W have the same span, which must be V . By case 2 or case 3 of
Lemma 7.1 we find that N ∪ W and S ∪ E have the same span, which must be V . The result
follows.

8

Each alternating word is contained in U

In Propositions 5.7, 5.10, 5.11 we obtained some relations that involve the alternating words.
In this section we obtain some additional relations for the alternating words; these resemble
the relations in Proposition 6.3. As we will see, these additional relations together with
Propositions 5.7, 5.10, 5.11 imply that each alternating word is contained in U.
Proposition 8.1. For n ≥ 1,
n
X

k=0
n
X

Gk ⋆ G̃n−k q

n−2k

=q

Gk ⋆ G̃n−k q 2k−n = q

n−1
X

k=0
n−1
X

k=0

k=0
n−1
X

n
X

n−1
X

k=0
n
X

k=0

G̃k ⋆ Gn−k q n−2k = q

W−k ⋆ Wn−k q n−1−2k ,

(58)

Wn−k ⋆ W−k q n−1−2k ,

(59)

Wn−k ⋆ W−k q 2k+1−n ,

(60)

W−k ⋆ Wn−k q 2k+1−n .

(61)

k=0

G̃k ⋆ Gn−k q 2k−n = q

k=0

Proof. We first verify (58) by evaluating each side. In (58) the k-summand on the left is
G̃n q n (resp. Gn q −n ) for k = 0 (resp. k = n). By Lemma 5.4 we have G̃n = xWn and
Gn = yW1−n . By Lemma 5.9,
Gk ⋆ G̃n−k = y(W1−k ⋆ G̃n−k ) + x(Gk ⋆ Wn−k )
for 1 ≤ k ≤ n − 1 and
W−k ⋆ Wn−k = x(Gk ⋆ Wn−k ) + y(W−k ⋆ G̃n−k−1 )q −2
for 0 ≤ k ≤ n − 1. Using these comments, one checks that the two sides of (58) are equal. To
obtain (59) (resp. (60)) (resp. (61)), apply S (resp. σ) (resp. σS) to everything in (58).
17

Lemma 8.2. Using the equations below, the alternating words in V are recursively obtained
from x, y in the following order:
W0 ,

W1 ,

G1 ,

G̃1 ,

W−1 ,

W2 ,

G2 ,

G̃2 ,

W−2 ,

W3 ,

...

We have W0 = x and W1 = y. For n ≥ 1,
Pn−1
Pn−1
q k=0
W−k ⋆ Wn−k q n−1−2k − k=1
Gk ⋆ G̃n−k q n−2k Wn ⋆ W0 − W0 ⋆ Wn
Gn =
+
,
q n + q −n
(1 + q −2n )(1 − q −2 )
W0 ⋆ Wn − Wn ⋆ W0
G̃n = Gn +
,
1 − q −2
qW0 ⋆ Gn − q −1 Gn ⋆ W0
,
W−n =
q − q −1
qGn ⋆ W1 − q −1 W1 ⋆ Gn
Wn+1 =
.
q − q −1

(62)
(63)
(64)
(65)

Proof. Equation (63) is from (37). To obtain (62), subtract q n times (63) from (58), and
simplify the result. Equations (64), (65) are from (38), (39).
Theorem 8.3. Each alternating word of V is contained in U.
Proof. By Lemma 8.2.

9

Some generating functions

We continue to discuss the alternating words in V. In previous sections we found many
relations involving these words. In this section we express some of these relations using
generating functions. We use these generating functions to solve for the alternating words
(18) in terms of the alternating words (16), (17), (19).
Definition 9.1. We define some generating functions in an indeterminate t:
X
X
G(t) =
tn Gn ,
G̃(t) =
tn G̃n ,
n∈N

W + (t) =

X

n∈N

W − (t) =

tn Wn+1 ,

n∈N

X

tn W−n .

n∈N

Lemma 9.2. We have
G(q −1 t) ⋆ W − (qt) = W − (q −1 t) ⋆ G(qt),
G̃(q −1 t) ⋆ W + (qt) = W + (q −1 t) ⋆ G̃(qt),
G(qt) ⋆ W + (q −1 t) = W + (qt) ⋆ G(q −1 t).
G̃(qt) ⋆ W − (q −1 t) = W − (qt) ⋆ G̃(q −1 t),
Proof. Routine consequence of Proposition 6.3.
18

Lemma 9.3. We have
G(q −1 t) ⋆ G̃(qt) − qtW − (q −1 t) ⋆ W + (qt) = 1,
G(qt) ⋆ G̃(q −1 t) − qtW + (qt) ⋆ W − (q −1 t) = 1,
G̃(q −1 t) ⋆ G(qt) − qtW + (q −1 t) ⋆ W − (qt) = 1,
G̃(qt) ⋆ G(q −1 t) − qtW − (qt) ⋆ W + (q −1 t) = 1.
Proof. Routine consequence of Proposition 8.1.
Remark 9.4. By Lemmas 9.2, 9.3 the following matrices are inverses with respect to the
q-shuffle product:




G(q −1 t) qtW − (q −1 t)
G̃(qt)
−qtW − (qt)
.
,
−W + (qt)
G(qt)
W + (q −1 t)
G̃(q −1 t)
Our next goal is to solve for G(t). To this end, we introduce some elements {Dn }n∈N in V.
These elements will be defined recursively.
Definition 9.5. Define {Dn }n∈N in V such that D0 = 1 and for n ≥ 1,
D0 ⋆ G̃n + D1 ⋆ G̃n−1 + · · · + Dn ⋆ G̃0 = 0.

(66)

Example 9.6. We have
D1 = −G̃1 ,
D2 = G̃1 ⋆ G̃1 − G̃2 ,
D3 = 2G̃1 ⋆ G̃2 − G̃1 ⋆ G̃1 ⋆ G̃1 − G̃3 ,
D4 = G̃1 ⋆ G̃1 ⋆ G̃1 ⋆ G̃1 + 2G̃1 ⋆ G̃3 + G̃2 ⋆ G̃2 − 3G̃1 ⋆ G̃1 ⋆ G̃2 − G̃4
and
G̃1 = −D1 ,
G̃2 = D1 ⋆ D1 − D2 ,
G̃3 = 2D1 ⋆ D2 − D1 ⋆ D1 ⋆ D1 − D3 ,
G̃4 = D1 ⋆ D1 ⋆ D1 ⋆ D1 + 2D1 ⋆ D3 + D2 ⋆ D2 − 3D1 ⋆ D1 ⋆ D2 − D4 .
Lemma 9.7. For n ≥ 1 the following hold in the q-shuffle algebra V.
(i) Dn is a homogeneous polynomial in G̃1 , G̃2 , . . . , G̃n that has total degree n, where we
view each G̃i as having degree i. In this polynomial the coefficient of G̃n is −1.
(ii) G̃n is a homogeneous polynomial in D1 , D2 , . . . , Dn that has total degree n, where we
view each Di as having degree i. In this polynomial the coefficient of Dn is −1.
Proof. By Definition 9.5 and induction on n.
19

Lemma 9.8. The following coincide:
(i) the subalgebra of the q-shuffle algebra V generated by {Dn }∞
n=1 ;
(ii) the subalgebra of the q-shuffle algebra V generated by {G̃n }∞
n=1 .
Proof. Each subalgebra contains the other by Lemma 9.7.
We emphasize a few points.
Lemma 9.9. For n ∈ N we have Dn ∈ U.
Proof. By Theorem 8.3 and Lemma 9.8.
Lemma 9.10. For i, j ∈ N the following holds in the q-shuffle algebra V:
[Di , Dj ] = 0,

[Di , G̃j ] = 0.

Proof. By Lemma 9.8 and since the {G̃j }j∈N mutually commute.
Definition 9.11. We define a generating function in the indeterminate t:
X
D(t) =
tn Dn .
n∈N

Lemma 9.12. We have
D(t) ⋆ G̃(t) = 1 = G̃(t) ⋆ D(t).
Proof. Use Definition 9.5 and Lemma 9.10.
Lemma 9.13. We have
W − (q −1 t) ⋆ D(q −1 t) = D(qt) ⋆ W − (qt),
D(q −1 t) ⋆ W + (q −1 t) = W + (qt) ⋆ D(qt).
Proof. By the two equations in Lemma 9.2 that involve G̃, together with Lemma 9.12.
Proposition 9.14. We have
G(t) = D(q 2 t) + q 2 tW − (t) ⋆ D(t) ⋆ W + (t),
G(t) = D(q −2 t) + tW + (t) ⋆ D(t) ⋆ W − (t).

(67)
(68)

Proof. In the equations of Lemma 9.3, eliminate the G̃ term using Lemma 9.12, evaluate the
result using Lemma 9.13, and then make a change of variables t 7→ q ±1 t as needed.
Theorem 9.15. For n ∈ N we have
Gn = q 2n Dn + q 2

X

W−i ⋆ Dj ⋆ Wk+1 ,

(69)

i+j+k+1=n

i,j,k≥0

Gn = q −2n Dn +

X

i+j+k+1=n

i,j,k≥0

20

Wk+1 ⋆ Dj ⋆ W−i .

(70)

Proof. For the equations (67) and (68), compare the coeffient of tn on either side.
Example 9.16. For 1 ≤ n ≤ 4 the equations (69), (70) are given below:
G1 = q 2 D1 + q 2 W0 ⋆ W1 ,
G2 = q 4 D2 + q 2 W0 ⋆ W2 + q 2 W−1 ⋆ W1 + q 2 W0 ⋆ D1 ⋆ W1 ,
G3 = q 6 D3 + q 2 W0 ⋆ W3 + q 2 W−1 ⋆ W2 + q 2 W−2 ⋆ W1 + q 2 W0 ⋆ D1 ⋆ W2
+ q 2 W−1 ⋆ D1 ⋆ W1 + q 2 W0 ⋆ D2 ⋆ W1 ,
G4 = q 8 D4 + q 2 W0 ⋆ W4 + q 2 W−1 ⋆ W3 + q 2 W−2 ⋆ W2 + q 2 W−3 ⋆ W1
+ q 2 W0 ⋆ D1 ⋆ W3 + q 2 W−1 ⋆ D1 ⋆ W2 + q 2 W−2 ⋆ D1 ⋆ W1 + q 2 W0 ⋆ D2 ⋆ W2
+ q 2 W−1 ⋆ D2 ⋆ W1 + q 2 W0 ⋆ D3 ⋆ W1 ,
and
G1 = q −2 D1 + W1 ⋆ W0 ,
G2 = q −4 D2 + W1 ⋆ W−1 + W2 ⋆ W0 + W1 ⋆ D1 ⋆ W0 ,
G3 = q −6 D3 + W1 ⋆ W−2 + W2 ⋆ W−1 + W3 ⋆ W0 + W1 ⋆ D1 ⋆ W −1
+ W2 ⋆ D1 ⋆ W0 + W1 ⋆ D2 ⋆ W0 ,
G4 = q −8 D4 + W1 ⋆ W−3 + W2 ⋆ W−2 + W3 ⋆ W−1 + W4 ⋆ W0
+ W1 ⋆ D1 ⋆ W−2 + W2 ⋆ D1 ⋆ W−1 + W3 ⋆ D1 ⋆ W0 + W1 ⋆ D2 ⋆ W−1
+ W2 ⋆ D2 ⋆ W0 + W1 ⋆ D3 ⋆ W0 .
Note that D1 , D2 , D3 , D4 are given in Example 9.6.

10

The alternating PBW basis for U

In this section we obtain some PBW bases for U, including the alternating PBW basis.
Theorem 10.1. A PBW basis for U is obtained by the elements
{W−i }i∈N ,

{G̃j+1 }j∈N ,

{Wk+1 }k∈N

in any linear order < that satisfies one of (i)–(vi) below:
(i) W−i < G̃j+1 < Wk+1 for i, j, k ∈ N;
(ii) Wk+1 < G̃j+1 < W−i for i, j, k ∈ N;
(iii) Wk+1 < W−i < G̃j+1 for i, j, k ∈ N;
(iv) W−i < Wk+1 < G̃j+1 for i, j, k ∈ N;
(v) G̃j+1 < Wk+1 < W−i for i, j, k ∈ N;
(vi) G̃j+1 < W−i < Wk+1 for i, j, k ∈ N.
21

(71)

Proof. (i) We invoke Proposition 3.9. For notational convenience we identify the algebras
Uq+ and U, via the isomorphism ♮ from below (15). Let Ω denote the set of alternating words
listed in (71). We have Ω ⊆ U by Theorem 8.3. We show that Ω is feasible in the sense
of Definition 3.5. Definition 3.5(i) holds since each element of Ω is a word in V. Definition
3.5(ii) holds by the table above Lemma 5.3. We have shown that Ω is feasible. The set
Ω has a linear order < from the theorem statement. We show that Ω in order < satisfies
Proposition 3.9(ii). In the present notation, we must show that the vector space U is spanned
by
a1 ⋆ a2 ⋆ · · · ⋆ an

n ∈ N,

a1 , a2 , . . . , an ∈ Ω,

a1 ≤ a2 ≤ · · · ≤ an .

(72)

Let A denote the set of alternating words in V. So A is the union of Ω and {Gℓ+1 }ℓ∈N . The
generators x, y of U are contained in A, so the algebra U is generated by A. Therefore the
vector space U is spanned by
a1 ⋆ a2 ⋆ · · · ⋆ an

n ∈ N,

a1 , a2 , . . . , an ∈ A.

(73)

We have a linear order < on Ω; extend < to A such that
W−i < Gℓ+1 < G̃j+1 < Wk+1

i, j, k, ℓ ∈ N.

(74)

For every product a1 ⋆ a2 ⋆ · · · ⋆ an in (73) and for every pair as−1 , as (2 ≤ s ≤ n) of adjacent
terms such that as−1 > as , we can use the commutator relations from Sections 6, 7 to express
as−1 ⋆ as as a linear combination of products a′s−1 ⋆ a′s such that a′s−1 , a′s ∈ A and a′s−1 ≤ a′s .
Specifically, use Lemma 6.1 (resp. Lemma 7.1) if the lengths of as−1 and as have opposite
(resp. same) parity. This argument shows that the vector space U is spanned by the products
a1 ⋆ a2 ⋆ · · · ⋆ an

n ∈ N,

a1 , a2 , . . . , an ∈ A,

a1 ≤ a2 ≤ · · · ≤ an .

Let a1 ⋆ a2 ⋆ · · · ⋆ an denote one of the above products. We show that a1 ⋆ a2 ⋆ · · · ⋆ an is
contained in the span of (72). Our proof is by induction on the number ζ of terms among
a1 , a2 , . . . , an that are contained in {Gℓ+1 }ℓ∈N . First assume that ζ = 0. Then ai ∈ Ω for
1 ≤ i ≤ n, so a1 ⋆ a2 ⋆ · · · ⋆ an is listed in (72). Next assume that ζ ≥ 1. At least one of
a1 , a2 , . . . , an is contained in {Gℓ+1 }ℓ∈N . Pick the maximal integer s such that 1 ≤ s ≤ n
and as is contained in {Gℓ+1 }ℓ∈N . Eliminate as using (69) and straighten the result using the
commutator relations in Lemma 6.1. These moves and induction show that a1 ⋆ a2 ⋆ · · · ⋆ an
is a linear combination of vectors, each contained in the span of (72). So a1 ⋆ a2 ⋆ · · · ⋆ an
is contained in the span of (72), as desired. By the above comments the vector space U is
spanned by (72). Proposition 3.9(ii) is now satisfied. By that proposition we find that Ω in
order < is a PBW basis for U.
(ii) Similar to the proof of (i) above, with line (74) replaced by
Wk+1 < Gℓ+1 < G̃j+1 < W−i
and use (70) instead of (69).
(iii) By (ii) above and case 3 of Proposition 6.2.
(iv) By (i) above and case 4 of Proposition 6.2.
(v) By (ii) above and case 4 of Proposition 6.2.
(vi) By (i) above and case 3 of Proposition 6.2.
22

i, j, k, ℓ ∈ N,

Theorem 10.2. A PBW basis for U is obtained by the elements
{W−i }i∈N ,

{Gj+1 }j∈N ,

{Wk+1 }k∈N

in any linear order < that satisfies one of (i)–(vi) below:
(i) W−i < Gj+1 < Wk+1 for i, j, k ∈ N;
(ii) Wk+1 < Gj+1 < W−i for i, j, k ∈ N;
(iii) Wk+1 < W−i < Gj+1 for i, j, k ∈ N;
(iv) W−i < Wk+1 < Gj+1 for i, j, k ∈ N;
(v) Gj+1 < Wk+1 < W−i for i, j, k ∈ N;
(vi) Gj+1 < W−i < Wk+1 for i, j, k ∈ N.
Proof. Apply the automorphism σ to everything in Theorem 10.2, and use Lemma 5.3(i).
In our view, the above twelve PBW bases for U are not substantially different. So we focus
on the most convenient one, which is from Theorem 10.1(i).
Definition 10.3. The alternating PBW basis for U consists of the elements
{W−i }i∈N ,

{G̃j+1 }j∈N ,

{Wk+1 }k∈N

in a linear order < that satisfies
W−i < G̃j+1 < Wk+1

11

i, j, k ∈ N.

Comparing the Damiani PBW basis and the alternating PBW basis

In Section 2 we described the Damiani PBW basis. In the previous section we defined the
alternating PBW basis. In this section we show how these two PBW bases are related.
We will adopt the following point of view. Instead of working directly with the Damiani PBW
∞
∞
basis (3), we will work with the closely related elements {xCn }∞
n=0 , {Cn y}n=0 , {Cn }n=1 from
∞
the end of Section 4. We begin with {xCn }∞
n=0 and {Cn y}n=0 .
Definition 11.1. We define some generating functions in the indeterminate t:
X
X
C − (t) =
tn (xCn ),
C + (t) =
tn (Cn y).
n∈N

n∈N

Proposition 11.2. We have
C − (−t) = W − (q −1 t) ⋆ D(q −1 t) = D(qt) ⋆ W − (qt),
C + (−t) = D(q −1 t) ⋆ W + (q −1 t) = W + (qt) ⋆ D(qt).
23

Proof. We first verify C − (−t) = W − (q −1 t) ⋆ D(q −1 t). To do this, it suffices to show that for
n ∈ N,
n −n

xCn = (−1) q

n
X

W−i ⋆ Dn−i .

(75)

i=0

c n denote the expression on the right in (75). We show that xCn = xC
c n . We will use
Let xC
c 0 . Next assume that n ≥ 1.
induction on n. The result holds for n = 0, since xC0 = x = xC
By the equation on the left in (5) together with the discussion at the end of Section 4,
(q − q −1 )(xCn ) = (xCn−1 ) ⋆ (xy) − (xy) ⋆ (xCn−1 ).

(76)

By induction, the right-hand side of (76) is equal to
c n−1 ⋆ (xy) − (xy) ⋆ xC
c n−1 ,
xC

which by construction and xy = G̃1 is equal to
(−1)

n−1 1−n

q

n−1
X

(W−i ⋆ Dn−i−1 ⋆ G̃1 − G̃1 ⋆ W−i ⋆ Dn−i−1 ),

i=0

which by Lemma 9.10 is equal to
(−1)

n−1 1−n

q

n−1
X

(W−i ⋆ G̃1 − G̃1 ⋆ W−i ) ⋆ Dn−i−1 ,

i=0

which by (43) is equal to
(−1)n−1 q 1−n

n−1
X

(W0 ⋆ G̃i+1 − G̃i+1 ⋆ W0 ) ⋆ Dn−i−1 ,

i=0

which after a change of variables i 7→ i − 1 is equal to
(−1)

n−1 1−n

q

n
X

(W0 ⋆ G̃i − G̃i ⋆ W0 ) ⋆ Dn−i ,

i=0

which by G̃0 = 1 and (38) is equal to
(−1)

n−1 1−n

q

−2

(1 − q )

n
X

(W0 ⋆ G̃i − W−i ) ⋆ Dn−i ,

i=0

which by (66) and algebra is equal to
n −n

(−1) q

−1

(q − q )

n
X

W−i ⋆ Dn−i ,

i=0

c n . We have shown that xCn = xC
c n , so (75) holds. We have
which is equal to (q − q −1 )xC
−
− −1
−1
verified C (−t) = W (q t) ⋆ D(q t). In this equation apply σS to each side, to get
C + (−t) = D(q −1 t) ⋆ W + (q −1 t). The remaining equations in the proposition statement are
from Lemma 9.13.
24

Next we restate Proposition 11.2 using the style of (75).
Theorem 11.3. For n ∈ N,
xCn = (−1) q

n
X

W−i ⋆ Dn−i = (−1) q

Cn y = (−1)n q −n

n
X

Dn−i ⋆ Wi+1 = (−1)n q n

n −n

n n

i=0

i=0

n
X

Dn−i ⋆ W−i ,

i=0
n
X

Wi+1 ⋆ Dn−i .

i=0

Proof. For each equation in Proposition 11.2, compare the coefficient of tn on either side.
Proposition 11.4. We have
W − (t) = C − (−qt) ⋆ G̃(t) = G̃(t) ⋆ C − (−q −1 t),
W + (t) = G̃(t) ⋆ C + (−qt) = C + (−q −1 t) ⋆ G̃(t).
Proof. Evaluate the equations in Proposition 11.2 using Lemma 9.12.
Theorem 11.5. For n ∈ N,
W−n =
Wn+1 =

n
X

i i

(−1) q (xCi ) ⋆ G̃n−i

i=0
n
X

n
X
=
(−1)i q −i G̃n−i ⋆ (xCi ),

(−1)i q i G̃n−i ⋆ (Ci y) =

i=0

i=0
n
X

(−1)i q −i (Ci y) ⋆ G̃n−i .

i=0

Proof. For each equation in Proposition 11.4, compare the coefficients of tn on either side.
Now we bring in {Cn }∞
n=1 . Before getting into detail we emphasize one point.
Lemma 11.6. In the q-shuffle algebra V the elements {Cn }n∈N mutually commute.
Proof. By the comment below Proposition 2.4 and the discussion at the end of Section 4.
Definition 11.7. We define a generating function in the indeterminate t:
X
C(t) =
tn Cn .
n∈N

Proposition 11.8. We have
C(−t) = D(qt) ⋆ D(q −1 t).

(77)

Proof. We first show that for n ∈ N,
Gn =

n
X

i i

(−1) q Ci ⋆ G̃n−i + q

2

n−1
X
i=0

i=0

25

(−1)i q i (xCi ) ⋆ Wn−i .

(78)

For n = 0 the equation (78) holds, since each side is equal to 1. Next assume that n ≥ 1.
By the first equation in Theorem 11.5,
n n

W−n = (−1) q xCn +

n−1
X

(−1)i q i (xCi ) ⋆ G̃n−i .

(79)

i=0

We will evaluate (79) after some comments. By Lemma 5.4 we have W−n = xGn . Also by
Lemma 5.4 we have G̃n−i = xWn−i for 0 ≤ i ≤ n − 1. By this and (12),

(xCi ) ⋆ G̃n−i = x Ci ⋆ G̃n−i + q 2 (xCi ) ⋆ Wn−i
(0 ≤ i ≤ n − 1).
(80)
Evaluating (79) using the above comments, we obtain
xGn = x

n
X

(−1)i q i Ci ⋆ G̃n−i + q 2 x

n−1
X

(−1)i q i (xCi ) ⋆ Wn−i .

i=0

i=0

In the above equation, each term has an x on the left; removing such x we obtain (78). In
terms of generating functions, (78) becomes
G(t) = C(−qt) ⋆ G̃(t) + q 2 tC − (−qt) ⋆ W + (t).
Adjusting this equation using the first equation in Proposition 11.2, we obtain
G(t) = C(−qt) ⋆ G̃(t) + q 2 tW − (t) ⋆ D(t) ⋆ W + (t).

(81)

Comparing (67), (81) we obtain D(q 2 t) = C(−qt) ⋆ G̃(t). In this equation replace t by q −1 t
and use Lemma 9.12 to obtain (77).
Proposition 11.9. For n ∈ N,
Cn = (−1)n

n
X

q 2i−n Di ⋆ Dn−i

i=0

Proof. In the equation (77) compare the coefficient of tn on either side.
Corollary 11.10. For n ≥ 1 the following hold in the q-shuffle algebra V.
(i) Cn is a homogeneous polynomial in D1 , D2 , . . . , Dn that has total degree n, where we
view each Di as having degree i. In this polynomial the coefficient of Dn is (−1)n (q n +
q −n ).
(ii) Dn is a homogeneous polynomial in C1 , C2 , . . . , Cn that has total degree n, where we
view each Ci as having degree i. In this polynomial the coefficient of Cn is (−1)n (q n +
q −n )−1 .
Proof. (i) By Proposition 11.9.
(ii) By (i) above and induction on n.
26

Corollary 11.11. For n ≥ 1 the following hold in the q-shuffle algebra V.
(i) Cn is a homogeneous polynomial in G̃1 , G̃2 , . . . , G̃n that has total degree n, where we
view each G̃i as having degree i. In this polynomial the coefficient of G̃n is (−1)n+1 (q n +
q −n ).
(ii) G̃n is a homogeneous polynomial in C1 , C2 , . . . , Cn that has total degree n, where we
view each Ci as having degree i. In this polynomial the coefficient of Cn is (−1)n+1 (q n +
q −n )−1 .
Proof. Combine Lemma 9.7 and and Corollary 11.10.
Corollary 11.12. The following (i)–(iii) coincide:
(i) the subalgebra of the q-shuffle algebra V generated by {Cn }∞
n=1 ;
(ii) the subalgebra of the q-shuffle algebra V generated by {Dn }∞
n=1 ;
(iii) the subalgebra of the q-shuffle algebra V generated by {G̃n }∞
n=1 .
Proof. By Lemma 9.8 and Corollary 11.11.
∞
In Corollary 11.12 we saw that {Cn }∞
n=1 and {G̃n }n=1 generate the same subalgebra of the
∞
q-shuffle algebra V. Next we discuss in more detail how {Cn }∞
n=1 and {G̃n }n=1 are related.

Lemma 11.13. We have
C(−qt) ⋆ G̃(q 2 t) = D(t) = C(−q −1 t) ⋆ G̃(q −2 t).
Proof. To verify the above equations, eliminate C(−qt) and C(−q −1 t) using Proposition
11.8, and evaluate the result using Lemma 9.12.
Theorem 11.14. For n ∈ N,
0=

n
X

(−1)i [2n − i]q Ci ⋆ G̃n−i .

(82)

i=0

Proof. By Lemma 11.13,
C(−qt) ⋆ G̃(q 2 t) = C(−q −1 t) ⋆ G̃(q −2 t).
In this equation, compare the coefficient of tn on either side.
∞
Remark 11.15. Using (82) we can recursively solve for {Cn }∞
n=1 in terms of {G̃n }n=1 , and
∞
also {G̃n }∞
n=1 in terms of {Cn }n=1 .

27

12

Some comments about Propositions 6.3 and 8.1

Consider the equations in Propositions 6.3 and 8.1. For each equation, it is natural to ask
what is the common value of each side, in terms of the standard basis for V. In this section
we compute this common value, and give some additional results of a similar nature.
Near the end of Section 4 we defined the Catalan words in V, using the notation x = 1 and
y = −1. We now use this notation to define another kind of word.
Definition 12.1. A word v1 v2 · · · vn in V is constrained whenever v 1 + v 2 + · · ·+ v i ∈ {0, ±1}
for 1 ≤ i ≤ n − 1 and v1 + v 2 + · · · + vn = 0. In this case n is even.
Example 12.2. For 0 ≤ n ≤ 3 we give the constrained words of length 2n.
n
0
1
2
3

xyxyxy,

xyxyyx,

constained words of length 2n
1
xy, yx
xyxy, xyyx, yxxy, yxyx
xyyxxy, xyyxyx, yxxyxy, yxxyyx,

yxyxxy,

yxyxyx

Lemma 12.3. For n ∈ N there are 2n constrained words of length 2n. These words have
the form b1 b2 · · · bn with bi ∈ {xy, yx} for 1 ≤ i ≤ n.
For n ∈ N consider the sum of the constrained words that have length 2n.
Lemma 12.4. For n ∈ N the above sum is equal to (xy + yx)n , where the exponent is with
respect to the free product.
The following results can be obtained using Lemma 5.9 and induction on n. The proofs are
straightforward and omitted.
Proposition 12.5. For n ∈ N,
n
X

Gn−k ⋆ W−k q

n
X

Gn−k ⋆ Wk+1q n−2k =

2k−n

=

k=0

n
X

W−k ⋆ Gn−k q n−2k = [2]nq (xy + yx)n x,

k=0

k=0
n
X

n
X

G̃n−k ⋆ W−k q n−2k =

n
X

n
X

G̃n−k ⋆ Wk+1q 2k−n =

k=0

k=0

Wk+1 ⋆ Gn−k q 2k−n = [2]nq y(xy + yx)n ,

k=0

W−k ⋆ G̃n−k q 2k−n = [2]nq x(xy + yx)n ,

k=0
n
X

Wk+1 ⋆ G̃n−k q n−2k = [2]nq (xy + yx)n y.

k=0

28

Proposition 12.6. For n ≥ 1,
n
X

k=0
n
X

k=0
n
X

k=0
n
X

Gk ⋆ G̃n−k q n−2k = q
Gk ⋆ G̃n−k q 2k−n = q
G̃k ⋆ Gn−k q n−2k = q
G̃k ⋆ Gn−k q 2k−n = q

n−1
X

k=0
n−1
X

k=0
n−1
X

k=0
n−1
X

W−k ⋆ Wn−k q n−1−2k = [2]qn−1 (xy + yx)n−1 (qxy + q −1 yx),
Wn−k ⋆ W−k q n−1−2k = [2]qn−1 (q −1 xy + qyx)(xy + yx)n−1 ,
Wn−k ⋆ W−k q 2k+1−n = [2]qn−1 (xy + yx)n−1 (q −1 xy + qyx),
W−k ⋆ Wn−k q 2k+1−n = [2]qn−1 (qxy + q −1 yx)(xy + yx)n−1 .

k=0

k=0

Proposition 12.7. For n ∈ N,
n
X

k=0
n
X

W−k ⋆ Wk−n q

2k−n

=

n
X

W−k ⋆ Wk−n q n−2k = q[2]n+1
x(xy + yx)n x,
q

k=0

Wk+1 ⋆ Wn−k+1q 2k−n =

n
X

Wk+1 ⋆ Wn−k+1q n−2k = q[2]n+1
y(xy + yx)n y.
q

k=0

k=0

Proposition 12.8. For n ≥ 1,
=

Gk ⋆ Gn−k q n−2k = [2]nq y(xy + yx)n−1 x,

k=0

n
X

n
X

G̃k ⋆ G̃n−k q 2k−n =

n
X

G̃k ⋆ G̃n−k q n−2k = [2]nq x(xy + yx)n−1y.

n
X

k=0

Gk ⋆ Gn−k q

2k−n

k=0

k=0

29

Proposition 12.9. For n ≥ 1,
n
X

Gn−k ⋆ W−k q n−2k = q[2]nq (q −1 xy + qyx)(xy + yx)n−1x,

k=0

n
X

W−k ⋆ Gn−k q 2k−n = q −1 [2]nq (qxy + q −1 yx)(xy + yx)n−1x,

k=0

n
X

Gn−k ⋆ Wk+1 q 2k−n = q −1 [2]nq y(xy + yx)n−1 (qxy + q −1 yx),

k=0

n
X

Wk+1 ⋆ Gn−k q n−2k = q[2]nq y(xy + yx)n−1 (q −1 xy + qyx),

k=0

n
X

G̃n−k ⋆ W−k q 2k−n = q −1 [2]nq x(xy + yx)n−1 (q −1 xy + qyx),

k=0

n
X

W−k ⋆ G̃n−k q n−2k = q[2]nq x(xy + yx)n−1 (qxy + q −1 yx),

k=0

n
X

G̃n−k ⋆ Wk+1 q n−2k = q[2]nq (qxy + q −1 yx)(xy + yx)n−1 y,

k=0

n
X

Wk+1 ⋆ G̃n−k q 2k−n = q −1 [2]nq (q −1 xy + qyx)(xy + yx)n−1y.

k=0

13

Directions for future research

Problem 13.1. Determine if the relations in Proposition 5.11 can be obtained directly from
the relations in Propositions 5.7, 5.10.
Problem 13.2. Consider the algebra Uq+ defined by generators (1) subject to the relations
in Propositions 5.7, 5.10, 5.11. By those propositions the algebra Uq+ is a homomorphic
preimage of Uq+ . Determine the center of Uq+ and the kernel of the homomorphism.
∞
∞
∞
Problem 13.3. Find some generators {W−k }∞
k=0 , {Wk+1 }k=0 , {Gk+1 }k=0 , {G̃k+1 }k=0 for Oq
that satisfy the relations in [5, Definition 3.1]. The papers [2], [13], [14], [15], [16], [18] might
be helpful in this direction.

Problem 13.4. In [4] Baseilhac and Kolb obtained a PBW basis for Oq that involves some
elements
{Bnδ+α0 }∞
n=0 ,

{Bnδ+α1 }∞
n=0 ,

{Bnδ }∞
n=1 .

(83)

This PBW basis is roughly analogous to the PBW basis for Uq+ given in (3). Find the
relationship between the elements (83) and the Oq generators in Problem 13.3. We expect
that the relationship generalizes the results in Section 11 of the present paper.

30

14

Acknowledgment

The author thanks Pascal Baseilhac, Samuel Belliard, Jonas Hartwig, Jae-ho Lee, Kazumasa
Nomura, and Travis Scrimshaw for valuable discussions about this paper and related topics.

15

Appendix A: Commutator relations for alternating
words, part I

In this appendix we give a reformulation of Lemma 6.1.
Lemma 15.1. For i, j ∈ N the following holds in the q-shuffle algebra V.
(i) For i ≤ j,
i
X

2

Gi ⋆ W−j = W−j ⋆ Gi + (1 − q )
−2

2

W−ℓ−j ⋆ Gi−ℓ + (q − 1)

ℓ=1
i
X

W−j ⋆ Gi = Gi ⋆ W−j + (1 − q )

i
X

Wℓ−i ⋆ Gj+ℓ ,

ℓ=1

Gi−ℓ ⋆ W−ℓ−j + (q

−2

− 1)

ℓ=1

i
X

Gj+ℓ ⋆ Wℓ−i

i
X

Wi−ℓ+1 ⋆ Gj+ℓ ,

ℓ=1

and
−2

Gi ⋆ Wj+1 = Wj+1 ⋆ Gi + (1 − q )
2

Wj+1 ⋆ Gi = Gi ⋆ Wj+1 + (1 − q )

i
X

Wℓ+j+1 ⋆ Gi−ℓ + (q

ℓ=1
i
X

−2

− 1)

ℓ=1

2

Gi−ℓ ⋆ Wℓ+j+1 + (q − 1)

ℓ=1

i
X

Gj+ℓ ⋆ Wi−ℓ+1

ℓ=1

and
−2

G̃i ⋆ W−j = W−j ⋆ G̃i + (1 − q )
2

W−j ⋆ G̃i = G̃i ⋆ W−j + (1 − q )

i
X

W−ℓ−j ⋆ G̃i−ℓ + (q

ℓ=1
i
X

−2

− 1)

i
X

Wℓ−i ⋆ G̃j+ℓ ,

ℓ=1

2

G̃i−ℓ ⋆ W−ℓ−j + (q − 1)

ℓ=1

i
X

G̃j+ℓ ⋆ Wℓ−i

i
X

Wi−ℓ+1 ⋆ G̃j+ℓ ,

ℓ=1

and
2

G̃i ⋆ Wj+1 = Wj+1 ⋆ G̃i + (1 − q )
−2

i
X

2

Wℓ+j+1 ⋆ G̃i−ℓ + (q − 1)

ℓ=1
i
X

Wj+1 ⋆ G̃i = G̃i ⋆ Wj+1 + (1 − q )

ℓ=1

G̃i−ℓ ⋆ Wℓ+j+1 + (q

ℓ=1

31

−2

− 1)

i
X
ℓ=1

G̃j+ℓ ⋆ Wi−ℓ+1 .

(ii) For i > j,
2

2

Gi ⋆ W−j = q W−j ⋆ Gi + (1 − q )

j
X

2

W−i−ℓ ⋆ Gj−ℓ + (q − 1)

j
X

−2

W−j ⋆ Gi = q Gi ⋆ W−j + (1 − q )

Wℓ−j ⋆ Gi+ℓ ,

ℓ=1

ℓ=0

−2

j
X

Gj−ℓ ⋆ W−i−ℓ + (q

−2

− 1)

j
X

Gi+ℓ ⋆ Wℓ−j

j
X

Wj−ℓ+1 ⋆ Gi+ℓ ,

ℓ=1

ℓ=0

and
−2

−2

Gi ⋆ Wj+1 = q Wj+1 ⋆ Gi + (1 − q )

j
X

Wi+ℓ+1 ⋆ Gj−ℓ + (q

−2

− 1)

ℓ=1

ℓ=0

2

2

Wj+1 ⋆ Gi = q Gi ⋆ Wj+1 + (1 − q )

j
X

2

Gj−ℓ ⋆ Wi+ℓ+1 + (q − 1)

j
X

Gi+ℓ ⋆ Wj−ℓ+1

ℓ=1

ℓ=0

and
−2

−2

G̃i ⋆ W−j = q W−j ⋆ G̃i + (1 − q )

j
X

W−i−ℓ ⋆ G̃j−ℓ + (q

−2

j
X

− 1)

ℓ=1

ℓ=0

W−j ⋆ G̃i = q 2 G̃i ⋆ W−j + (1 − q 2 )

j
X

Wℓ−j ⋆ G̃i+ℓ ,

G̃j−ℓ ⋆ W−i−ℓ + (q 2 − 1)

j
X

G̃i+ℓ ⋆ Wℓ−j

j
X

Wj−ℓ+1 ⋆ G̃i+ℓ ,

ℓ=1

ℓ=0

and
2

2

G̃i ⋆ Wj+1 = q Wj+1 ⋆ G̃i + (1 − q )

j
X

2

Wi+ℓ+1 ⋆ G̃j−ℓ + (q − 1)

ℓ=1

ℓ=0

j

Wj+1 ⋆ G̃i = q −2 G̃i ⋆ Wj+1 + (1 − q −2 )

X
ℓ=0

32

G̃j−ℓ ⋆ Wi+ℓ+1 + (q −2 − 1)

j
X
ℓ=1

G̃i+ℓ ⋆ Wj−ℓ+1 .

16

Appendix B: Commutator relations for alternating
words, part II

In this appendix we give a reformulation of Lemma 7.1.
Lemma 16.1. For i, j ∈ N the following holds in the q-shuffle algebra V.
(i) For i ≤ j,
2

G̃i ⋆ Gj = Gj ⋆ G̃i + (1 − q )
2

Gi ⋆ G̃j = G̃j ⋆ Gi + (1 − q )

i
X

ℓ=1
i
X

2

Wℓ−i ⋆ Wj+ℓ − (1 − q )

i−1
X

W−j−ℓ ⋆ Wi−ℓ ,

ℓ=0

2

Wi−ℓ+1 ⋆ W−j−ℓ+1 − (1 − q )

ℓ=1

G̃j ⋆ Gi = Gi ⋆ G̃j + (1 − q 2 )
Gj ⋆ G̃i = G̃i ⋆ Gj + (1 − q 2 )

i
X

ℓ=1
i
X

i−1
X

Wj+ℓ+1 ⋆ Wℓ−i+1 ,

ℓ=0

Wj+ℓ ⋆ Wℓ−i − (1 − q 2 )

i−1
X

Wi−ℓ ⋆ W−j−ℓ ,

ℓ=0

W−j−ℓ+1 ⋆ Wi−ℓ+1 − (1 − q 2 )

i−1
X

Wℓ−i+1 ⋆ Wj+ℓ+1,

ℓ=0

ℓ=1

Wi+1 ⋆ W−j = W−j ⋆ Wi+1 + (1 − q )

i
X
ℓ=0

i
X

W−i ⋆ Wj+1 = Wj+1 ⋆ W−i + (1 − q −2 )

i
X

i
X

−2

W−j ⋆ Wi+1 = Wi+1 ⋆ W−j + (1 − q −2 )
Wj+1 ⋆ W−i = W−i ⋆ Wj+1 + (1 − q −2 )

ℓ=0
i
X

ℓ=0
i
X
ℓ=0

33

−2

Gj+1+ℓ ⋆ G̃i−ℓ − (1 − q )

Gi−ℓ ⋆ G̃j+1+ℓ ,

G̃j+1+ℓ ⋆ Gi−ℓ − (1 − q −2 )

G̃i−ℓ ⋆ Gj+1+ℓ ,

ℓ=0

Gi−ℓ ⋆ G̃j+1+ℓ − (1 − q −2 )
G̃i−ℓ ⋆ Gj+1+ℓ − (1 − q −2 )

ℓ=0
i
X

ℓ=0
i
X
ℓ=0

Gj+1+ℓ ⋆ G̃i−ℓ ,
G̃j+1+ℓ ⋆ Gi−ℓ .

(ii) For i > j,
2

G̃i ⋆ Gj = Gj ⋆ G̃i + (1 − q )

j
X

2

Wℓ−j ⋆ Wi+ℓ − (1 − q )

Gi ⋆ G̃j = G̃j ⋆ Gi + (1 − q )

X

G̃j ⋆ Gi = Gi ⋆ G̃j + (1 − q 2 )

j
X

W−i−ℓ ⋆ Wj−ℓ ,

ℓ=0

ℓ=1
j

2

j−1
X

2

Wj−ℓ+1 ⋆ W−i−ℓ+1 − (1 − q )
Wi+ℓ ⋆ Wℓ−j − (1 − q 2 )

Gj ⋆ G̃i = G̃i ⋆ Gj + (1 − q )

j−1
X

Wj−ℓ ⋆ W−i−ℓ ,

ℓ=0

ℓ=1
j

X

Wi+ℓ+1 ⋆ Wℓ−j+1,

ℓ=0

ℓ=1

2

j−1
X

2

W−i−ℓ+1 ⋆ Wj−ℓ+1 − (1 − q )

j
X

Gi+1+ℓ ⋆ G̃j−ℓ − (1 − q −2 )

X

G̃i+1+ℓ ⋆ Gj−ℓ − (1 − q −2 )

X

Gj−ℓ ⋆ G̃i+1+ℓ − (1 − q −2 )

X

G̃j−ℓ ⋆ Gi+1+ℓ − (1 − q −2 )

ℓ=0

34

X

G̃j−ℓ ⋆ Gi+1+ℓ ,

X

Gi+1+ℓ ⋆ G̃j−ℓ ,

X

G̃i+1+ℓ ⋆ Gj−ℓ .

ℓ=0
j

ℓ=0
j

Wj+1 ⋆ W−i = W−i ⋆ Wj+1 + (1 − q −2 )

Gj−ℓ ⋆ G̃i+1+ℓ ,

ℓ=0
j

ℓ=0
j

W−j ⋆ Wi+1 = Wi+1 ⋆ W−j + (1 − q −2 )

j
X
ℓ=0
j

ℓ=0
j

W−i ⋆ Wj+1 = Wj+1 ⋆ W−i + (1 − q −2 )

Wℓ−j+1 ⋆ Wi+ℓ+1 ,

ℓ=0

ℓ=1

Wi+1 ⋆ W−j = W−j ⋆ Wi+1 + (1 − q −2 )

j−1
X

ℓ=0

17

Appendix C: Examples of commutator relations

In this appendix we give some examples of commutator relations from Lemmas 6.1 and 7.1.
Length 2:
W1 ⋆ W0 = W0 ⋆ W1 + (1 − q −2 )(G1 − G̃1 ).
Length 3:
G1 ⋆ W0 = q 2 W0 ⋆ G1 + (1 − q 2 )W−1 ,
W1 ⋆ G1 = q 2 G1 ⋆ W1 + (1 − q 2 )W2 ,
G̃1 ⋆ W0 = q −2 W0 ⋆ G̃1 + (1 − q −2 )W−1 ,
W1 ⋆ G̃1 = q −2 G̃1 ⋆ W1 + (1 − q −2 )W2 .
Length 4:
W2 ⋆ W0 = W0 ⋆ W2 + (1 − q −2 )(G2 − G̃2 ),
W1 ⋆ W−1 = W−1 ⋆ W1 + (1 − q −2 )(G2 − G̃2 ),
G̃1 ⋆ G1 = G1 ⋆ G̃1 + (1 − q 2 )(W0 ⋆ W2 − W−1 ⋆ W1 ).
Length 5:
G2 ⋆ W0
G1 ⋆ W−1
W1 ⋆ G2
W2 ⋆ G1

= q 2 W0 ⋆ G2 + (1 − q 2 )W−2 ,
= (q 2 − 1)W0 ⋆ G2 + W−1 ⋆ G1 + (1 − q 2 )W−2 ,
= q 2 G2 ⋆ W1 + (1 − q 2 )W3 ,
= (q 2 − 1)G2 ⋆ W1 + G1 ⋆ W2 + (1 − q 2 )W3 ,

G̃2 ⋆ W0 = q −2 W0 ⋆ G̃2 + (1 − q −2 )W−2 ,
G̃1 ⋆ W−1 = (q −2 − 1)W0 ⋆ G̃2 + W−1 ⋆ G̃1 + (1 − q −2 )W−2 ,
W1 ⋆ G̃2 = q −2 G̃2 ⋆ W1 + (1 − q −2 )W3 ,
W2 ⋆ G̃1 = (q −2 − 1)G̃2 ⋆ W1 + G̃1 ⋆ W2 + (1 − q −2 )W3 .
Length 6:
W3 ⋆ W0 = W0 ⋆ W3 + (1 − q −2 )(G3 − G̃3 ),
W2 ⋆ W−1 = W−1 ⋆ W2 + (1 − q −2 )(G2 ⋆ G̃1 + G3 − G1 ⋆ G̃2 − G̃3 ),
W1 ⋆ W−2 = W−2 ⋆ W1 + (1 − q −2 )(G3 − G̃3 ),
G̃1 ⋆ G2 = G2 ⋆ G̃1 + (1 − q 2 )(W0 ⋆ W3 − W−2 ⋆ W1 ),
G̃2 ⋆ G1 = G1 ⋆ G̃2 + (1 − q 2 )(W0 ⋆ W3 − W−2 ⋆ W1 ).

35

Length 7:
G3 ⋆ W0 = q 2 W0 ⋆ G3 + (1 − q 2 )W−3 ,
G2 ⋆ W−1 = q 2 W−1 ⋆ G2 + (1 − q 2 )W−2 ⋆ G1 + (q 2 − 1)W0 ⋆ G3 + (1 − q 2 )W−3 ,
G1 ⋆ W−2 = W−2 ⋆ G1 + (q 2 − 1)W0 ⋆ G3 + (1 − q 2 )W−3 ,
W1 ⋆ G3 = q 2 G3 ⋆ W1 + (1 − q 2 )W4 ,
W2 ⋆ G2 = q 2 G2 ⋆ W2 + (1 − q 2 )G1 ⋆ W3 + (q 2 − 1)G3 ⋆ W1 + (1 − q 2 )W4 ,
W3 ⋆ G1 = G1 ⋆ W3 + (q 2 − 1)G3 ⋆ W1 + (1 − q 2 )W4 ,
G̃3 ⋆ W0 = q −2 W0 ⋆ G̃3 + (1 − q −2 )W−3 ,
G̃2 ⋆ W−1 = q −2 W−1 ⋆ G̃2 + (1 − q −2 )W−2 ⋆ G̃1 + (q −2 − 1)W0 ⋆ G̃3 + (1 − q −2 )W−3 ,
G̃1 ⋆ W−2 = W−2 ⋆ G̃1 + (q −2 − 1)W0 ⋆ G̃3 + (1 − q −2 )W−3 ,
W1 ⋆ G̃3 = q −2 G̃3 ⋆ W1 + (1 − q −2 )W4 ,
W2 ⋆ G̃2 = q −2 G̃2 ⋆ W2 + (1 − q −2 )G̃1 ⋆ W3 + (q −2 − 1)G̃3 ⋆ W1 + (1 − q −2 )W4 ,
W3 ⋆ G̃1 = G̃1 ⋆ W3 + (q −2 − 1)G̃3 ⋆ W1 + (1 − q −2 )W4 .
Length 8:
W4 ⋆ W0 = W0 ⋆ W4 + (1 − q −2 )(G4 − G̃4 ),
W3 ⋆ W−1 = W−1 ⋆ W3 + (1 − q −2 )(G3 ⋆ G̃1 + G4 − G1 ⋆ G̃3 − G̃4 ),
W2 ⋆ W−2 = W−2 ⋆ W2 + (1 − q −2 )(G3 ⋆ G̃1 + G4 − G1 ⋆ G̃3 − G̃4 ),
W1 ⋆ W−3 = W−3 ⋆ W1 + (1 − q −2 )(G4 − G̃4 ),
G̃1 ⋆ G3 = G3 ⋆ G̃1 + (1 − q 2 )(W0 ⋆ W4 − W−3 ⋆ W1 ),
G̃2 ⋆ G2 = G2 ⋆ G̃2 + (1 − q 2 )(W0 ⋆ W4 + W−1 ⋆ W3 − W−2 ⋆ W2 − W−3 ⋆ W1 ),
G̃3 ⋆ G1 = G1 ⋆ G̃3 + (1 − q 2 )(W0 ⋆ W4 − W−3 ⋆ W1 ).

References
[1] P. Baseilhac. Deformed Dolan-Grady relations in quantum integrable models. Nuclear
Phys. B 709 (2005) 491–521; arXiv:hep-th/0404149.
[2] P. Baseilhac and S. Belliard.
arXiv:1704.02950.

An attractive basis for the q-Onsager algebra.

[3] P. Baseilhac and K. Koizumi. A new (in)finite dimensional algebra for quantum integrable models. Nuclear Phys. B 720 (2005) 325–347; arXiv:math-ph/0503036.
[4] P. Baseilhac and S. Kolb. Braid group action and root vectors for the q-Onsager algebra;
arXiv:1706.08747.
[5] P. Baseilhac and K. Shigechi. A new current algebra and the reflection equation. Lett.
Math. Phys. 92 (2010) 47–65; arXiv:0906.1482v2.
36

b 2 . J.
[6] I. Damiani. A basis of type Poincare-Birkoff-Witt for the quantum algebra of sl
Algebra 161 (1993) 291–310.
[7] J. A. Green. Shuffle algebras, Lie algebras and quantum groups. Téxtos de Matemática.
Série B [Texts in Mathematics. Series B], 9. Universidade de Coimbra, Departamento
de Matemática, Coimbra, 1995. vi+29 pp.
[8] B. Leclerc. Dual canonical bases, quantum shuffles and q-characters. Math. Z. 246
(2004) 691–732; arXiv:math/0209133.
[9] G. Lusztig. Introduction to quantum groups. Progress in Mathematics, 110. Birkhauser,
Boston, 1993.
[10] M. Rosso. Groupes quantiques et algèbres de battage quantiques. C. R. Acad. Sci.
Paris 320 (1995) 145–148.
[11] M. Rosso. Quantum groups and quantum shuffles. Invent. Math 133 (1998) 399–416.
[12] P. Terwilliger. Two relations that generalize the q-Serre relations and the Dolan-Grady
relations. In Physics and Combinatorics 1999 (Nagoya), 377–398, World Scientific Publishing, River Edge, NJ, 2001; arXiv:math.QA/0307016.
b 2 ). Linear Algebra
[13] P. Terwilliger. The q-Onsager algebra and the positive part of Uq (sl
Appl. 521 (2017) 19–56; arXiv:1506.08666.
[14] P. Terwilliger. The Lusztig automorphism of the q-Onsager algebra. J. Algebra. 506
(2018) 56–75; arXiv:1706.05546.
[15] P. Terwilliger. The q-Onsager algebra and the universal Askey-Wilson algebra. SIGMA
Symmetry Integrability Geom. Methods Appl. 14 (2018) Paper No. 044, 18 pp.
[16] S. Post and P. Terwilliger. An infinite-dimensional q -module obtained from the qshuffle algebra for affine sl2 ; arXiv:1806.10007.
[17] P. Terwilliger. Using Catalan words and a q-shuffle algebra to describe a PBW basis for
b 2 ). J. Algebra, to appear; arXiv:1806.11228.
the positive part of Uq (sl

[18] P. Terwilliger. An action of the free product Z2 ⋆ Z2 ⋆ Z2 on the q-Onsager algebra and
its current algebra. Nuclear Phys. B 936 (2018) 306–319; arXiv:1808.09901.
Paul Terwilliger
Department of Mathematics
University of Wisconsin
480 Lincoln Drive
Madison, WI 53706-1388 USA
email: terwilli@math.wisc.edu

37

